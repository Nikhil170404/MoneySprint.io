/*! For license information please see main.2b95540f.js.LICENSE.txt */
(()=>{var e={497:(e,t,n)=>{"use strict";var i=n(218);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,s,o){if(o!==i){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return n.PropTypes=n,n}},173:(e,t,n)=>{e.exports=n(497)()},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},730:(e,t,n)=>{"use strict";var i=n(43),r=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,i,r,s,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,i){var r=m.hasOwnProperty(t)?m[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),x=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var L,F=Object.assign;function V(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var z=!1;function U(e,t){if(!e||z)return"";z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(1!==o||1!==a)do{if(o--,0>--a||r[o]!==s[a]){var l="\n"+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{z=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function j(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=U(e.type,!1);case 11:return e=U(e.type.render,!1);case 1:return e=U(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case x:return"Portal";case I:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case D:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=H(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=ge(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,ke=null,Se=null;function Ie(e){if(e=br(e)){if("function"!==typeof xe)throw Error(s(280));var t=e.stateNode;t&&(t=_r(t),xe(e.stateNode,e.type,t))}}function Ee(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Te(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ie(e),t)for(e=0;e<t.length;e++)Ie(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var Pe=!1;function De(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ce(e,t,n)}finally{Pe=!1,(null!==ke||null!==Se)&&(Ae(),Te())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var i=_r(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Oe=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){Oe=!1}function Re(e,t,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,Ve=!1,ze=null,Ue={onError:function(e){Le=!0,Fe=e}};function je(e,t,n,i,r,s,o,a,l){Le=!1,Fe=null,Re.apply(Ue,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return We(r),e;if(o===i)return We(r),t;o=o.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=o;else{for(var a=!1,l=r.child;l;){if(l===n){a=!0,n=r,i=o;break}if(l===i){a=!0,i=r,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,i=r;break}if(l===i){a=!0,i=o,n=r;break}l=l.sibling}if(!a)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=r.unstable_scheduleCallback,Qe=r.unstable_cancelCallback,Ye=r.unstable_shouldYield,Xe=r.unstable_requestPaint,$e=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~r;0!==a?i=ht(a):0!==(s&=o)&&(i=ht(s))}else 0!==(o=n&~r)?i=ht(o):0!==s&&(i=ht(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-ot(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-ot(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,xt,kt,St,It,Et=!1,Tt=[],Ct=null,At=null,Pt=null,Dt=new Map,Nt=new Map,Ot=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Lt(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=br(t))&&xt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ft(e){var t=vr(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void It(e.priority,(function(){kt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=br(n))&&xt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);we=i,n.target.dispatchEvent(i),we=null,t.shift()}return!0}function zt(e,t,n){Vt(e)&&n.delete(t)}function Ut(){Et=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==At&&Vt(At)&&(At=null),null!==Pt&&Vt(Pt)&&(Pt=null),Dt.forEach(zt),Nt.forEach(zt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ut)))}function Bt(e){function t(t){return jt(t,e)}if(0<Tt.length){jt(Tt[0],e);for(var n=1;n<Tt.length;n++){var i=Tt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==Ct&&jt(Ct,e),null!==At&&jt(At,e),null!==Pt&&jt(Pt,e),Dt.forEach(t),Nt.forEach(t),n=0;n<Ot.length;n++)(i=Ot[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=w.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,i){var r=bt,s=qt.transition;qt.transition=null;try{bt=1,Gt(e,t,n,i)}finally{bt=r,qt.transition=s}}function Kt(e,t,n,i){var r=bt,s=qt.transition;qt.transition=null;try{bt=4,Gt(e,t,n,i)}finally{bt=r,qt.transition=s}}function Gt(e,t,n,i){if(Wt){var r=Yt(e,t,n,i);if(null===r)Wi(e,t,i,Qt,n),Rt(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,i,r),!0;case"dragenter":return At=Lt(At,e,t,n,i,r),!0;case"mouseover":return Pt=Lt(Pt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Dt.set(s,Lt(Dt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Nt.set(s,Lt(Nt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(Rt(e,i),4&t&&-1<Mt.indexOf(e)){for(;null!==r;){var s=br(r);if(null!==s&&_t(s),null===(s=Yt(e,t,n,i))&&Wi(e,t,i,Qt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Qt=null;function Yt(e,t,n,i){if(Qt=null,null!==(e=vr(e=_e(i))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,i=n.length,r="value"in $t?$t.value:$t.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var o=i-e;for(t=1;t<=o&&n[i-t]===r[s-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var o in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(r):r[o]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=F({},cn,{view:0,detail:0}),dn=sn(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:In,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),gn=sn(F({},fn,{dataTransfer:0})),mn=sn(F({},hn,{relatedTarget:0})),yn=sn(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(F({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function In(){return Sn}var En=F({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:In,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(En),Cn=sn(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:In})),Pn=sn(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Dn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=sn(Dn),On=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Rn,Fn=u&&(!Mn||Rn&&8<Rn&&11>=Rn),Vn=String.fromCharCode(32),zn=!1;function Un(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Hn(e,t,n,i){Ee(i),0<(t=Ki(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Vi(e,0)}function Yn(e){if(G(wr(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Zn="oninput"in document;if(!Zn){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),Zn="function"===typeof ei.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){Kn&&(Kn.detachEvent("onpropertychange",ni),Gn=Kn=null)}function ni(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,_e(e)),De(Qn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Gn=n,(Kn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function si(e,t){if("click"===e)return Yn(t)}function oi(e,t){if("input"===e||"change"===e)return Yn(t)}var ai="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(ai(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!ai(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var o=ui(n,i);r&&o&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gi=u&&"documentMode"in document&&11>=document.documentMode,mi=null,yi=null,vi=null,bi=!1;function wi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;bi||null==mi||mi!==Q(i)||("selectionStart"in(i=mi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Ki(yi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=mi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},ki={},Si={};function Ii(e){if(ki[e])return ki[e];if(!xi[e])return e;var t,n=xi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Si)return ki[e]=n[t];return e}u&&(Si=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Ei=Ii("animationend"),Ti=Ii("animationiteration"),Ci=Ii("animationstart"),Ai=Ii("transitionend"),Pi=new Map,Di="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(e,t){Pi.set(e,t),l(t,[e])}for(var Oi=0;Oi<Di.length;Oi++){var Mi=Di[Oi];Ni(Mi.toLowerCase(),"on"+(Mi[0].toUpperCase()+Mi.slice(1)))}Ni(Ei,"onAnimationEnd"),Ni(Ti,"onAnimationIteration"),Ni(Ci,"onAnimationStart"),Ni("dblclick","onDoubleClick"),Ni("focusin","onFocus"),Ni("focusout","onBlur"),Ni(Ai,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ri="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Li=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ri));function Fi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,o,a,l,c){if(je.apply(this,arguments),Le){if(!Le)throw Error(s(198));var u=Fe;Le=!1,Fe=null,Ve||(Ve=!0,ze=u)}}(i,t,void 0,e),e.currentTarget=null}function Vi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;Fi(r,a,c),s=l}else for(o=0;o<i.length;o++){if(l=(a=i[o]).instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;Fi(r,a,c),s=l}}}if(Ve)throw e=ze,Ve=!1,ze=null,e}function zi(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var i=e+"__bubble";n.has(i)||(qi(t,e,2,!1),n.add(i))}function Ui(e,t,n){var i=0;t&&(i|=4),qi(n,e,i,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Bi(e){if(!e[ji]){e[ji]=!0,o.forEach((function(t){"selectionchange"!==t&&(Li.has(t)||Ui(t,!1,e),Ui(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ji]||(t[ji]=!0,Ui("selectionchange",!1,t))}}function qi(e,t,n,i){switch(Xt(t)){case 1:var r=Ht;break;case 4:r=Kt;break;default:r=Gt}n=r.bind(null,t,n,e),r=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var o=i.tag;if(3===o||4===o){var a=i.stateNode.containerInfo;if(a===r||8===a.nodeType&&a.parentNode===r)break;if(4===o)for(o=i.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;o=o.return}for(;null!==a;){if(null===(o=vr(a)))return;if(5===(l=o.tag)||6===l){i=s=o;continue e}a=a.parentNode}}i=i.return}De((function(){var i=s,r=_e(n),o=[];e:{var a=Pi.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Ei:case Ti:case Ci:l=yn;break;case Ai:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=i;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ne(p,d))&&u.push(Hi(p,g,f)))),h)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,r),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[pr])&&(l||a)&&(a=r.window===r?r:(a=r.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?a:wr(l),f=null==c?a:wr(c),(a=new u(g,p+"leave",l,n,r)).target=h,a.relatedTarget=f,g=null,vr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gi(f))p++;for(f=0,g=d;g;g=Gi(g))f++;for(;0<p-f;)u=Gi(u),p--;for(;0<f-p;)d=Gi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gi(u),d=Gi(d)}u=null}else u=null;null!==l&&Qi(o,a,l,u,!1),null!==c&&null!==h&&Qi(o,h,c,u,!0)}if("select"===(l=(a=i?wr(i):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var m=Xn;else if(Wn(a))if($n)m=oi;else{m=ri;var y=ii}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(m=si);switch(m&&(m=m(e,i))?Hn(o,m,n,r):(y&&y(e,a,i),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=i?wr(i):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mi=y,yi=i,vi=null);break;case"focusout":vi=yi=mi=null;break;case"mousedown":bi=!0;break;case"contextmenu":case"mouseup":case"dragend":bi=!1,wi(o,n,r);break;case"selectionchange":if(gi)break;case"keydown":case"keyup":wi(o,n,r)}var v;if(Mn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Un(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in($t=r)?$t.value:$t.textContent,Bn=!0)),0<(y=Ki(i,b)).length&&(b=new wn(b,e,null,n,r),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=jn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(zn=!0,Vn);case"textInput":return(e=t.data)===Vn&&zn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Mn&&Un(e,t)?(e=en(),Zt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=Ki(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),o.push({event:r,listeners:i}),r.data=v))}Vi(o,t)}))}function Hi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ki(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=Ne(e,n))&&i.unshift(Hi(e,s,r)),null!=(s=Ne(e,t))&&i.push(Hi(e,s,r))),e=e.return}return i}function Gi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qi(e,t,n,i,r){for(var s=t._reactName,o=[];null!==n&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===i)break;5===a.tag&&null!==c&&(a=c,r?null!=(l=Ne(n,s))&&o.unshift(Hi(n,l,a)):r||null!=(l=Ne(n,s))&&o.push(Hi(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yi=/\r\n?/g,Xi=/\u0000|\uFFFD/g;function $i(e){return("string"===typeof e?e:""+e).replace(Yi,"\n").replace(Xi,"")}function Ji(e,t,n){if(t=$i(t),$i(e)!==t&&n)throw Error(s(425))}function Zi(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,or="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(ar)}:ir;function ar(e){setTimeout((function(){throw e}))}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Bt(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Bt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,gr="__reactEvents$"+hr,mr="__reactListeners$"+hr,yr="__reactHandles$"+hr;function vr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function br(e){return!(e=e[dr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _r(e){return e[fr]||null}var xr=[],kr=-1;function Sr(e){return{current:e}}function Ir(e){0>kr||(e.current=xr[kr],xr[kr]=null,kr--)}function Er(e,t){kr++,xr[kr]=e.current,e.current=t}var Tr={},Cr=Sr(Tr),Ar=Sr(!1),Pr=Tr;function Dr(e,t){var n=e.type.contextTypes;if(!n)return Tr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Nr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Or(){Ir(Ar),Ir(Cr)}function Mr(e,t,n){if(Cr.current!==Tr)throw Error(s(168));Er(Cr,t),Er(Ar,n)}function Rr(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,q(e)||"Unknown",r));return F({},n,i)}function Lr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Pr=Cr.current,Er(Cr,e),Er(Ar,Ar.current),!0}function Fr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Rr(e,t,Pr),i.__reactInternalMemoizedMergedChildContext=e,Ir(Ar),Ir(Cr),Er(Cr,e)):Ir(Ar),Er(Ar,n)}var Vr=null,zr=!1,Ur=!1;function jr(e){null===Vr?Vr=[e]:Vr.push(e)}function Br(){if(!Ur&&null!==Vr){Ur=!0;var e=0,t=bt;try{var n=Vr;for(bt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Vr=null,zr=!1}catch(r){throw null!==Vr&&(Vr=Vr.slice(e+1)),Ge(Ze,Br),r}finally{bt=t,Ur=!1}}return null}var qr=[],Wr=0,Hr=null,Kr=0,Gr=[],Qr=0,Yr=null,Xr=1,$r="";function Jr(e,t){qr[Wr++]=Kr,qr[Wr++]=Hr,Hr=e,Kr=t}function Zr(e,t,n){Gr[Qr++]=Xr,Gr[Qr++]=$r,Gr[Qr++]=Yr,Yr=e;var i=Xr;e=$r;var r=32-ot(i)-1;i&=~(1<<r),n+=1;var s=32-ot(t)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Xr=1<<32-ot(t)+r|n<<r|i,$r=s+e}else Xr=1<<s|n<<r|i,$r=e}function es(e){null!==e.return&&(Jr(e,1),Zr(e,1,0))}function ts(e){for(;e===Hr;)Hr=qr[--Wr],qr[Wr]=null,Kr=qr[--Wr],qr[Wr]=null;for(;e===Yr;)Yr=Gr[--Qr],Gr[Qr]=null,$r=Gr[--Qr],Gr[Qr]=null,Xr=Gr[--Qr],Gr[Qr]=null}var ns=null,is=null,rs=!1,ss=null;function os(e,t){var n=Nc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function as(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yr?{id:Xr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Nc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!as(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&as(e,t)?os(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw ds(),Error(s(418));for(;t;)os(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=is;e;)e=cr(e.nextSibling)}function fs(){is=ns=null,rs=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ys=Sr(null),vs=null,bs=null,ws=null;function _s(){ws=bs=vs=null}function xs(e){var t=ys.current;Ir(ys),e._currentValue=t}function ks(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Ss(e,t){vs=e,ws=bs=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function Is(e){var t=e._currentValue;if(ws!==e)if(e={context:e,memoizedValue:t,next:null},null===bs){if(null===vs)throw Error(s(308));bs=e,vs.dependencies={lanes:0,firstContext:e}}else bs=bs.next=e;return t}var Es=null;function Ts(e){null===Es?Es=[e]:Es.push(e)}function Cs(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ts(t)):(n.next=r.next,r.next=n),t.interleaved=n,As(e,i)}function As(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ps=!1;function Ds(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ns(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Os(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ms(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,As(e,n)}return null===(r=i.interleaved)?(t.next=t,Ts(i)):(t.next=r.next,r.next=t),i.interleaved=t,As(e,n)}function Rs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Ls(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=o:s=s.next=o,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fs(e,t,n,i){var r=e.updateQueue;Ps=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(null!==a){r.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?s=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(o=0,u=c=l=null,a=s;;){var d=a.lane,f=a.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,g=a;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Ps=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=r.shared.pending))break;a=(d=a).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Fl|=o,e.lanes=o,e.memoizedState=h}}function Vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var zs=(new i.Component).refs;function Us(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var js={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),s=Os(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ms(e,s,r))&&(ic(t,e,r,i),Rs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=tc(),r=nc(e),s=Os(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Ms(e,s,r))&&(ic(t,e,r,i),Rs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),i=nc(e),r=Os(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ms(e,r,i))&&(ic(t,e,i,n),Rs(t,e,i))}};function Bs(e,t,n,i,r,s,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,o):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function qs(e,t,n){var i=!1,r=Tr,s=t.contextType;return"object"===typeof s&&null!==s?s=Is(s):(r=Nr(t)?Pr:Cr.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Dr(e,r):Tr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=js,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Ws(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&js.enqueueReplaceState(t,t.state,null)}function Hs(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=zs,Ds(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Is(s):(s=Nr(t)?Pr:Cr.current,r.context=Dr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Us(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&js.enqueueReplaceState(r,r.state,null),Fs(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function Ks(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=r.refs;t===zs&&(t=r.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Gs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qs(e){return(0,e._init)(e._payload)}function Ys(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function o(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=Vc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===k?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&Qs(s)===t.type)?((i=r(t,n.props)).ref=Ks(e,t,n),i.return=e,i):((i=Rc(n.type,n.key,n.props,null,e.mode,i)).ref=Ks(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Lc(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Ks(e,null,t),n.return=e,n;case x:return(t=zc(t,e.mode,n)).return=e,t;case N:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Gs(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?c(e,t,n,i):null;case x:return n.key===r?u(e,t,n,i):null;case N:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||R(n))return null!==r?null:h(e,t,n,i,null);Gs(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case x:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case N:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||R(i))return h(t,e=e.get(n)||null,i,r,null);Gs(t,i)}return null}function g(r,s,a,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<a.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(r,h,a[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(r,h),s=o(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===a.length)return n(r,h),rs&&Jr(r,g),c;if(null===h){for(;g<a.length;g++)null!==(h=d(r,a[g],l))&&(s=o(h,s,g),null===u?c=h:u.sibling=h,u=h);return rs&&Jr(r,g),c}for(h=i(r,h);g<a.length;g++)null!==(m=p(h,r,g,a[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=o(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach((function(e){return t(r,e)})),rs&&Jr(r,g),c}function m(r,a,l,c){var u=R(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=a,m=a=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(r,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(r,g),a=o(b,a,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(r,g),rs&&Jr(r,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(r,v.value,c))&&(a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return rs&&Jr(r,m),u}for(g=i(r,g);!v.done;m++,v=l.next())null!==(v=p(g,r,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),a=o(v,a,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach((function(e){return t(r,e)})),rs&&Jr(r,m),u}return function e(i,s,o,l){if("object"===typeof o&&null!==o&&o.type===k&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case _:e:{for(var c=o.key,u=s;null!==u;){if(u.key===c){if((c=o.type)===k){if(7===u.tag){n(i,u.sibling),(s=r(u,o.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&Qs(c)===u.type){n(i,u.sibling),(s=r(u,o.props)).ref=Ks(i,u,o),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}o.type===k?((s=Lc(o.props.children,i.mode,l,o.key)).return=i,i=s):((l=Rc(o.type,o.key,o.props,null,i.mode,l)).ref=Ks(i,s,o),l.return=i,i=l)}return a(i);case x:e:{for(u=o.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===o.containerInfo&&s.stateNode.implementation===o.implementation){n(i,s.sibling),(s=r(s,o.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=zc(o,i.mode,l)).return=i,i=s}return a(i);case N:return e(i,s,(u=o._init)(o._payload),l)}if(te(o))return g(i,s,o,l);if(R(o))return m(i,s,o,l);Gs(i,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,o)).return=i,i=s):(n(i,s),(s=Vc(o,i.mode,l)).return=i,i=s),a(i)):n(i,s)}}var Xs=Ys(!0),$s=Ys(!1),Js={},Zs=Sr(Js),eo=Sr(Js),to=Sr(Js);function no(e){if(e===Js)throw Error(s(174));return e}function io(e,t){switch(Er(to,t),Er(eo,e),Er(Zs,Js),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ir(Zs),Er(Zs,t)}function ro(){Ir(Zs),Ir(eo),Ir(to)}function so(e){no(to.current);var t=no(Zs.current),n=le(t,e.type);t!==n&&(Er(eo,e),Er(Zs,n))}function oo(e){eo.current===e&&(Ir(Zs),Ir(eo))}var ao=Sr(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function uo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var ho=w.ReactCurrentDispatcher,fo=w.ReactCurrentBatchConfig,po=0,go=null,mo=null,yo=null,vo=!1,bo=!1,wo=0,_o=0;function xo(){throw Error(s(321))}function ko(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ai(e[n],t[n]))return!1;return!0}function So(e,t,n,i,r,o){if(po=o,go=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?aa:la,e=n(i,r),bo){o=0;do{if(bo=!1,wo=0,25<=o)throw Error(s(301));o+=1,yo=mo=null,t.updateQueue=null,ho.current=ca,e=n(i,r)}while(bo)}if(ho.current=oa,t=null!==mo&&null!==mo.next,po=0,yo=mo=go=null,vo=!1,t)throw Error(s(300));return e}function Io(){var e=0!==wo;return wo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?go.memoizedState=yo=e:yo=yo.next=e,yo}function To(){if(null===mo){var e=go.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?go.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(s(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?go.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Ao(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=mo,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var a=r.next;r.next=o.next,o.next=a}i.baseQueue=r=o,n.pending=null}if(null!==r){o=r.next,i=i.baseState;var l=a=null,c=null,u=o;do{var h=u.lane;if((po&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,a=i):c=c.next=d,go.lanes|=h,Fl|=h}u=u.next}while(null!==u&&u!==o);null===c?a=i:c.next=l,ai(i,t.memoizedState)||(wa=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{o=r.lane,go.lanes|=o,Fl|=o,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Po(e){var t=To(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,o=t.memoizedState;if(null!==r){n.pending=null;var a=r=r.next;do{o=e(o,a.action),a=a.next}while(a!==r);ai(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,i]}function Do(){}function No(e,t){var n=go,i=To(),r=t(),o=!ai(i.memoizedState,r);if(o&&(i.memoizedState=r,wa=!0),i=i.queue,Wo(Ro.bind(null,n,i,e),[e]),i.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,zo(9,Mo.bind(null,n,i,r,t),void 0,null),null===Pl)throw Error(s(349));0!==(30&po)||Oo(n,t,r)}return r}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Mo(e,t,n,i){t.value=n,t.getSnapshot=i,Lo(t)&&Fo(e)}function Ro(e,t,n){return n((function(){Lo(t)&&Fo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ai(e,n)}catch(i){return!0}}function Fo(e){var t=As(e,1);null!==t&&ic(t,e,1,-1)}function Vo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=na.bind(null,go,e),[t.memoizedState,e]}function zo(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=go.updateQueue)?(t={lastEffect:null,stores:null},go.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Uo(){return To().memoizedState}function jo(e,t,n,i){var r=Eo();go.flags|=e,r.memoizedState=zo(1|t,n,void 0,void 0===i?null:i)}function Bo(e,t,n,i){var r=To();i=void 0===i?null:i;var s=void 0;if(null!==mo){var o=mo.memoizedState;if(s=o.destroy,null!==i&&ko(i,o.deps))return void(r.memoizedState=zo(t,n,s,i))}go.flags|=e,r.memoizedState=zo(1|t,n,s,i)}function qo(e,t){return jo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ho(e,t){return Bo(4,2,e,t)}function Ko(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=To();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ko(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=To();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&ko(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ai(n,t)||(n=gt(),go.lanes|=n,Fl|=n,e.baseState=!0),t)}function Zo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var i=fo.transition;fo.transition={};try{e(!1),t()}finally{bt=n,fo.transition=i}}function ea(){return To().memoizedState}function ta(e,t,n){var i=nc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},ia(e))ra(t,n);else if(null!==(n=Cs(e,t,n,i))){ic(n,e,i,tc()),sa(n,t,i)}}function na(e,t,n){var i=nc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(ia(e))ra(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ai(a,o)){var l=t.interleaved;return null===l?(r.next=r,Ts(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Cs(e,t,r,i))&&(ic(n,e,i,r=tc()),sa(n,t,i))}}function ia(e){var t=e.alternate;return e===go||null!==t&&t===go}function ra(e,t){bo=vo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function sa(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,vt(e,n)}}var oa={readContext:Is,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},aa={readContext:Is,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Eo();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=ta.bind(null,go,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Vo,useDebugValue:Yo,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=go,r=Eo();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Pl)throw Error(s(349));0!==(30&po)||Oo(i,t,n)}r.memoizedState=n;var o={value:n,getSnapshot:t};return r.queue=o,qo(Ro.bind(null,i,o,e),[e]),i.flags|=2048,zo(9,Mo.bind(null,i,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Pl.identifierPrefix;if(rs){var n=$r;t=":"+t+"R"+(n=(Xr&~(1<<32-ot(Xr)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=_o++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},la={readContext:Is,useCallback:Xo,useContext:Is,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:$o,useReducer:Ao,useRef:Uo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:No,useId:ea,unstable_isNewReconciler:!1},ca={readContext:Is,useCallback:Xo,useContext:Is,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ho,useLayoutEffect:Ko,useMemo:$o,useReducer:Po,useRef:Uo,useState:function(){return Po(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Po(Co)[0],To().memoizedState]},useMutableSource:Do,useSyncExternalStore:No,useId:ea,unstable_isNewReconciler:!1};function ua(e,t){try{var n="",i=t;do{n+=j(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function ha(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function da(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var fa="function"===typeof WeakMap?WeakMap:Map;function pa(e,t,n){(n=Os(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Hl||(Hl=!0,Kl=i),da(0,t)},n}function ga(e,t,n){(n=Os(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){da(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){da(0,t),"function"!==typeof i&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ma(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new fa;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ya(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function va(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Os(-1,1)).tag=2,Ms(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ba=w.ReactCurrentOwner,wa=!1;function _a(e,t,n,i){t.child=null===e?$s(t,null,n,i):Xs(t,e.child,n,i)}function xa(e,t,n,i,r){n=n.render;var s=t.ref;return Ss(t,r),i=So(e,t,n,i,s,r),n=Io(),null===e||wa?(rs&&n&&es(t),t.flags|=1,_a(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function ka(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Oc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Sa(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var o=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(o,i)&&e.ref===t.ref)return Ha(e,t,r)}return t.flags|=1,(e=Mc(s,i)).ref=t.ref,e.return=t,t.child=e}function Sa(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(wa=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Ha(e,t,r);0!==(131072&e.flags)&&(wa=!0)}}return Ta(e,t,n,i,r)}function Ia(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Ml,Ol),Ol|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(Ml,Ol),Ol|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Er(Ml,Ol),Ol|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Er(Ml,Ol),Ol|=i;return _a(e,t,r,n),t.child}function Ea(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,i,r){var s=Nr(n)?Pr:Cr.current;return s=Dr(t,s),Ss(t,r),n=So(e,t,n,i,s,r),i=Io(),null===e||wa?(rs&&i&&es(t),t.flags|=1,_a(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Ha(e,t,r))}function Ca(e,t,n,i,r){if(Nr(n)){var s=!0;Lr(t)}else s=!1;if(Ss(t,r),null===t.stateNode)Wa(e,t),qs(t,n,i),Hs(t,n,i,r),i=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Is(c):c=Dr(t,c=Nr(n)?Pr:Cr.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==i||l!==c)&&Ws(t,o,i,c),Ps=!1;var d=t.memoizedState;o.state=d,Fs(t,i,o,r),l=t.memoizedState,a!==i||d!==l||Ar.current||Ps?("function"===typeof u&&(Us(t,n,u,i),l=t.memoizedState),(a=Ps||Bs(t,n,a,i,d,l,c))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),i=!1)}else{o=t.stateNode,Ns(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:ms(t.type,a),o.props=c,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Is(l):l=Dr(t,l=Nr(n)?Pr:Cr.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&Ws(t,o,i,l),Ps=!1,d=t.memoizedState,o.state=d,Fs(t,i,o,r);var p=t.memoizedState;a!==h||d!==p||Ar.current||Ps?("function"===typeof f&&(Us(t,n,f,i),p=t.memoizedState),(c=Ps||Bs(t,n,c,i,d,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(i,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),o.props=i,o.state=p,o.context=l,i=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Aa(e,t,n,i,s,r)}function Aa(e,t,n,i,r,s){Ea(e,t);var o=0!==(128&t.flags);if(!i&&!o)return r&&Fr(t,n,!1),Ha(e,t,s);i=t.stateNode,ba.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&o?(t.child=Xs(t,e.child,null,s),t.child=Xs(t,null,a,s)):_a(e,t,a,s),t.memoizedState=i.state,r&&Fr(t,n,!0),t.child}function Pa(e){var t=e.stateNode;t.pendingContext?Mr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Mr(0,t.context,!1),io(e,t.containerInfo)}function Da(e,t,n,i,r){return fs(),ps(r),t.flags|=256,_a(e,t,n,i),t.child}var Na,Oa,Ma,Ra,La={dehydrated:null,treeContext:null,retryLane:0};function Fa(e){return{baseLanes:e,cachePool:null,transitions:null}}function Va(e,t,n){var i,r=t.pendingProps,o=ao.current,a=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&o)),i?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Er(ao,1&o),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=Fc(l,r,0,null),e=Lc(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fa(n),t.memoizedState=La,e):za(t,l));if(null!==(o=e.memoizedState)&&null!==(i=o.dehydrated))return function(e,t,n,i,r,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,i=ha(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=i.fallback,r=t.mode,i=Fc({mode:"visible",children:i.children},r,0,null),(o=Lc(o,r,a,null)).flags|=2,i.return=t,o.return=t,i.sibling=o,t.child=i,0!==(1&t.mode)&&Xs(t,e.child,null,a),t.child.memoizedState=Fa(a),t.memoizedState=La,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,Ua(e,t,a,i=ha(o=Error(s(419)),i,void 0))}if(l=0!==(a&e.childLanes),wa||l){if(null!==(i=Pl)){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|a))?0:r)&&r!==o.retryLane&&(o.retryLane=r,As(e,r),ic(i,e,r,-1))}return mc(),Ua(e,t,a,i=ha(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),r._reactRetry=t,null):(e=o.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Gr[Qr++]=Xr,Gr[Qr++]=$r,Gr[Qr++]=Yr,Xr=e.id,$r=e.overflow,Yr=t),t=za(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,o,n);if(a){a=r.fallback,l=t.mode,i=(o=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==o?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Mc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==i?a=Mc(i,a):(a=Lc(a,l,n,null)).flags|=2,a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=null===(l=e.child.memoizedState)?Fa(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=La,r}return e=(a=e.child).sibling,r=Mc(a,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function za(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,i){return null!==i&&ps(i),Xs(t,e.child,null,n),(e=za(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ja(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),ks(e.return,t,n)}function Ba(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function qa(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(_a(e,t,i.children,n),0!==(2&(i=ao.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ja(e,n,t);else if(19===e.tag)ja(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Er(ao,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Ba(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===lo(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Ba(t,!0,n,null,s);break;case"together":Ba(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wa(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ka(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Ga(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Qa(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ga(t),null;case 1:case 17:return Nr(t.type)&&Or(),Ga(t),null;case 3:return i=t.stateNode,ro(),Ir(Ar),Ir(Cr),uo(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Oa(e,t),Ga(t),null;case 5:oo(t);var r=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ma(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return Ga(t),null}if(e=no(Zs.current),hs(t)){i=t.stateNode,n=t.type;var o=t.memoizedProps;switch(i[dr]=t,i[fr]=o,e=0!==(1&t.mode),n){case"dialog":zi("cancel",i),zi("close",i);break;case"iframe":case"object":case"embed":zi("load",i);break;case"video":case"audio":for(r=0;r<Ri.length;r++)zi(Ri[r],i);break;case"source":zi("error",i);break;case"img":case"image":case"link":zi("error",i),zi("load",i);break;case"details":zi("toggle",i);break;case"input":X(i,o),zi("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},zi("invalid",i);break;case"textarea":re(i,o),zi("invalid",i)}for(var l in ve(n,o),r=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&zi("scroll",i)}switch(n){case"input":K(i),Z(i,o,!0);break;case"textarea":K(i),oe(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Zi)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[fr]=i,Na(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,i),n){case"dialog":zi("cancel",e),zi("close",e),r=i;break;case"iframe":case"object":case"embed":zi("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ri.length;r++)zi(Ri[r],e);r=i;break;case"source":zi("error",e),r=i;break;case"img":case"image":case"link":zi("error",e),zi("load",e),r=i;break;case"details":zi("toggle",e),r=i;break;case"input":X(e,i),r=Y(e,i),zi("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=F({},i,{value:void 0}),zi("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),zi("invalid",e)}for(o in ve(n,r),c=r)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?me(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&zi("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":K(e),Z(e,i,!1);break;case"textarea":K(e),oe(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?ne(e,!!i.multiple,o,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Zi)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ga(t),null;case 6:if(e&&null!=t.stateNode)Ra(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=no(to.current),no(Zs.current),hs(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(o=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return Ga(t),null;case 13:if(Ir(ao),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,o=!1;else if(o=hs(t),null!==i&&null!==i.dehydrated){if(null===e){if(!o)throw Error(s(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(s(317));o[dr]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ga(t),o=!1}else null!==ss&&(ac(ss),ss=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ao.current)?0===Rl&&(Rl=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ga(t),null);case 4:return ro(),Oa(e,t),null===e&&Bi(t.stateNode.containerInfo),Ga(t),null;case 10:return xs(t.type._context),Ga(t),null;case 19:if(Ir(ao),null===(o=t.memoizedState))return Ga(t),null;if(i=0!==(128&t.flags),null===(l=o.rendering))if(i)Ka(o,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ka(o,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er(ao,1&ao.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>ql&&(t.flags|=128,i=!0,Ka(o,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=lo(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ka(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!rs)return Ga(t),null}else 2*$e()-o.renderingStartTime>ql&&1073741824!==n&&(t.flags|=128,i=!0,Ka(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=ao.current,Er(ao,i?1&n|2:1&n),t):(Ga(t),null);case 22:case 23:return dc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Ol)&&(Ga(t),6&t.subtreeFlags&&(t.flags|=8192)):Ga(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Ya(e,t){switch(ts(t),t.tag){case 1:return Nr(t.type)&&Or(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ro(),Ir(Ar),Ir(Cr),uo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ir(ao),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ir(ao),null;case 4:return ro(),null;case 10:return xs(t.type._context),null;case 22:case 23:return dc(),null;default:return null}}Na=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Oa=function(){},Ma=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,no(Zs.current);var s,o=null;switch(n){case"input":r=Y(e,r),i=Y(e,i),o=[];break;case"select":r=F({},r,{value:void 0}),i=F({},i,{value:void 0}),o=[];break;case"textarea":r=ie(e,r),i=ie(e,i),o=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=Zi)}for(u in ve(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&zi("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ra=function(e,t,n,i){n!==i&&(t.flags|=4)};var Xa=!1,$a=!1,Ja="function"===typeof WeakSet?WeakSet:Set,Za=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Ic(e,t,i)}else n.current=null}function tl(e,t,n){try{n()}catch(i){Ic(e,t,i)}}var nl=!1;function il(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&tl(t,n,s)}r=r.next}while(r!==i)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function sl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[fr],delete t[gr],delete t[mr],delete t[yr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zi));else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}function ul(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(a){}switch(n.tag){case 5:$a||el(n,t);case 6:var i=hl,r=dl;hl=null,fl(e,t,n),dl=r,null!==(hl=i)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Bt(e)):lr(hl,n.stateNode));break;case 4:i=hl,r=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=i,dl=r;break;case 0:case 11:case 14:case 15:if(!$a&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,void 0!==o&&(0!==(2&s)||0!==(4&s))&&tl(n,t,o),r=r.next}while(r!==i)}fl(e,t,n);break;case 1:if(!$a&&(el(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Ic(n,t,a)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($a=(i=$a)||null!==n.memoizedState,fl(e,t,n),$a=i):fl(e,t,n);break;default:fl(e,t,n)}}function gl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ja),t.forEach((function(t){var i=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(s(160));pl(o,a,r),hl=null,dl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Ic(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)yl(t,e),t=t.sibling}function yl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{il(3,e,e.return),rl(3,e)}catch(m){Ic(e,e.return,m)}try{il(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&el(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&el(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(m){Ic(e,e.return,m)}}if(4&i&&null!=(r=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&$(r,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var h=c[a],d=c[a+1];"style"===h?me(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):b(r,h,d,u)}switch(l){case"input":J(r,o);break;case"textarea":se(r,o);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(r,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(r,!!o.multiple,o.defaultValue,!0):ne(r,!!o.multiple,o.multiple?[]:"",!1))}r[fr]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,o=e.memoizedProps;try{r.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(r=e.child).flags&&(o=null!==r.memoizedState,r.stateNode.isHidden=o,!o||null!==r.alternate&&null!==r.alternate.memoizedState||(Bl=$e())),4&i&&gl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($a=(u=$a)||h,ml(t,e),$a=u):ml(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Za=e,h=e.child;null!==h;){for(d=Za=h;null!==Za;){switch(p=(f=Za).child,f.tag){case 0:case 11:case 14:case 15:il(4,f,f.return);break;case 1:el(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){i=f,n=f.return;try{t=i,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Ic(i,n,m)}}break;case 5:el(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Za=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(o=r.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,a=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",a))}catch(m){Ic(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&i&&gl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),ul(e,ll(e),r);break;case 3:case 4:var o=i.stateNode.containerInfo;cl(e,ll(e),o);break;default:throw Error(s(161))}}catch(a){Ic(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Za=e,wl(e,t,n)}function wl(e,t,n){for(var i=0!==(1&e.mode);null!==Za;){var r=Za,s=r.child;if(22===r.tag&&i){var o=null!==r.memoizedState||Xa;if(!o){var a=r.alternate,l=null!==a&&null!==a.memoizedState||$a;a=Xa;var c=$a;if(Xa=o,($a=l)&&!c)for(Za=r;null!==Za;)l=(o=Za).child,22===o.tag&&null!==o.memoizedState?kl(r):null!==l?(l.return=o,Za=l):kl(r);for(;null!==s;)Za=s,wl(s,t,n),s=s.sibling;Za=r,Xa=a,$a=c}_l(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Za=s):_l(e)}}function _l(e){for(;null!==Za;){var t=Za;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$a||rl(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!$a)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:ms(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Vs(t,o,i);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vs(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}$a||512&t.flags&&sl(t)}catch(f){Ic(t,t.return,f)}}if(t===e){Za=null;break}if(null!==(n=t.sibling)){n.return=t.return,Za=n;break}Za=t.return}}function xl(e){for(;null!==Za;){var t=Za;if(t===e){Za=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Za=n;break}Za=t.return}}function kl(e){for(;null!==Za;){var t=Za;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ic(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Ic(t,r,l)}}var s=t.return;try{sl(t)}catch(l){Ic(t,s,l)}break;case 5:var o=t.return;try{sl(t)}catch(l){Ic(t,o,l)}}}catch(l){Ic(t,t.return,l)}if(t===e){Za=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Za=a;break}Za=t.return}}var Sl,Il=Math.ceil,El=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Cl=w.ReactCurrentBatchConfig,Al=0,Pl=null,Dl=null,Nl=0,Ol=0,Ml=Sr(0),Rl=0,Ll=null,Fl=0,Vl=0,zl=0,Ul=null,jl=null,Bl=0,ql=1/0,Wl=null,Hl=!1,Kl=null,Gl=null,Ql=!1,Yl=null,Xl=0,$l=0,Jl=null,Zl=-1,ec=0;function tc(){return 0!==(6&Al)?$e():-1!==Zl?Zl:Zl=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Nl?Nl&-Nl:null!==gs.transition?(0===ec&&(ec=gt()),ec):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ic(e,t,n,i){if(50<$l)throw $l=0,Jl=null,Error(s(185));yt(e,n,i),0!==(2&Al)&&e===Pl||(e===Pl&&(0===(2&Al)&&(Vl|=n),4===Rl&&lc(e,Nl)),rc(e,i),1===n&&0===Al&&0===(1&t.mode)&&(ql=$e()+500,zr&&Br()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-ot(s),a=1<<o,l=r[o];-1===l?0!==(a&n)&&0===(a&i)||(r[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}(e,t);var i=dt(e,e===Pl?Nl:0);if(0===i)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){zr=!0,jr(e)}(cc.bind(null,e)):jr(cc.bind(null,e)),or((function(){0===(6&Al)&&Br()})),n=null;else{switch(wt(i)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=Pc(n,sc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sc(e,t){if(Zl=-1,ec=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(kc()&&e.callbackNode!==n)return null;var i=dt(e,e===Pl?Nl:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=yc(e,i);else{t=i;var r=Al;Al|=2;var o=gc();for(Pl===e&&Nl===t||(Wl=null,ql=$e()+500,fc(e,t));;)try{bc();break}catch(l){pc(e,l)}_s(),El.current=o,Al=r,null!==Dl?t=0:(Pl=null,Nl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=oc(e,r))),1===t)throw n=Ll,fc(e,0),lc(e,i),rc(e,$e()),n;if(6===t)lc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ai(s(),r))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=yc(e,i))&&(0!==(o=pt(e))&&(i=o,t=oc(e,o))),1===t))throw n=Ll,fc(e,0),lc(e,i),rc(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,jl,Wl);break;case 3:if(lc(e,i),(130023424&i)===i&&10<(t=Bl+500-$e())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){tc(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(xc.bind(null,e,jl,Wl),t);break}xc(e,jl,Wl);break;case 4:if(lc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var a=31-ot(i);o=1<<a,(a=t[a])>r&&(r=a),i&=~o}if(i=r,10<(i=(120>(i=$e()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Il(i/1960))-i)){e.timeoutHandle=ir(xc.bind(null,e,jl,Wl),i);break}xc(e,jl,Wl);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===n?sc.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(fc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=jl,jl=n,null!==t&&ac(t)),e}function ac(e){null===jl?jl=e:jl.push.apply(jl,e)}function lc(e,t){for(t&=~zl,t&=~Vl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),i=1<<n;e[n]=-1,t&=~i}}function cc(e){if(0!==(6&Al))throw Error(s(327));kc();var t=dt(e,0);if(0===(1&t))return rc(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=oc(e,i))}if(1===n)throw n=Ll,fc(e,0),lc(e,t),rc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,jl,Wl),rc(e,$e()),null}function uc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(ql=$e()+500,zr&&Br())}}function hc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&kc();var t=Al;Al|=1;var n=Cl.transition,i=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=i,Cl.transition=n,0===(6&(Al=t))&&Br()}}function dc(){Ol=Ml.current,Ir(Ml)}function fc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Dl)for(n=Dl.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Or();break;case 3:ro(),Ir(Ar),Ir(Cr),uo();break;case 5:oo(i);break;case 4:ro();break;case 13:case 19:Ir(ao);break;case 10:xs(i.type._context);break;case 22:case 23:dc()}n=n.return}if(Pl=e,Dl=e=Mc(e.current,null),Nl=Ol=t,Rl=0,Ll=null,zl=Vl=Fl=0,jl=Ul=null,null!==Es){for(t=0;t<Es.length;t++)if(null!==(i=(n=Es[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var o=s.next;s.next=r,i.next=o}n.pending=i}Es=null}return e}function pc(e,t){for(;;){var n=Dl;try{if(_s(),ho.current=oa,vo){for(var i=go.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}vo=!1}if(po=0,yo=mo=go=null,bo=!1,wo=0,Tl.current=null,null===n||null===n.return){Rl=1,Ll=t,Dl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Nl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ya(a);if(null!==p){p.flags&=-257,va(p,a,l,0,t),1&p.mode&&ma(o,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){ma(o,u,t),mc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var y=ya(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),va(y,a,l,0,t),ps(ua(c,l));break e}}o=c=ua(c,l),4!==Rl&&(Rl=2),null===Ul?Ul=[o]:Ul.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,pa(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Gl||!Gl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Ls(o,ga(o,l,t));break e}}o=o.return}while(null!==o)}_c(n)}catch(w){t=w,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function gc(){var e=El.current;return El.current=oa,null===e?oa:e}function mc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Pl||0===(268435455&Fl)&&0===(268435455&Vl)||lc(Pl,Nl)}function yc(e,t){var n=Al;Al|=2;var i=gc();for(Pl===e&&Nl===t||(Wl=null,fc(e,t));;)try{vc();break}catch(r){pc(e,r)}if(_s(),Al=n,El.current=i,null!==Dl)throw Error(s(261));return Pl=null,Nl=0,Rl}function vc(){for(;null!==Dl;)wc(Dl)}function bc(){for(;null!==Dl&&!Ye();)wc(Dl)}function wc(e){var t=Sl(e.alternate,e,Ol);e.memoizedProps=e.pendingProps,null===t?_c(e):Dl=t,Tl.current=null}function _c(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,Ol)))return void(Dl=n)}else{if(null!==(n=Ya(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Rl=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Rl&&(Rl=5)}function xc(e,t,n){var i=bt,r=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,i){do{kc()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-ot(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,o),e===Pl&&(Dl=Pl=null,Nl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ql||(Ql=!0,Pc(tt,(function(){return kc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var a=bt;bt=1;var l=Al;Al|=4,Tl.current=null,function(e,t){if(er=Wt,fi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch(_){n=null;break e}var a=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=a+r),d!==o||0!==i&&3!==d.nodeType||(c=a+i),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===r&&(l=a),f===o&&++h===i&&(c=a),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Za=t;null!==Za;)if(e=(t=Za).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Za=e;else for(;null!==Za;){t=Za;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ms(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(_){Ic(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Za=e;break}Za=t.return}g=nl,nl=!1}(e,n),yl(n,e),pi(tr),Wt=!!er,tr=er=null,e.current=n,bl(n,e,r),Xe(),Al=l,bt=a,Cl.transition=o}else e.current=n;if(Ql&&(Ql=!1,Yl=e,Xl=r),o=e.pendingLanes,0===o&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Hl)throw Hl=!1,e=Kl,Kl=null,e;0!==(1&Xl)&&0!==e.tag&&kc(),o=e.pendingLanes,0!==(1&o)?e===Jl?$l++:($l=0,Jl=e):$l=0,Br()}(e,t,n,i)}finally{Cl.transition=r,bt=i}return null}function kc(){if(null!==Yl){var e=wt(Xl),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Al))throw Error(s(331));var r=Al;for(Al|=4,Za=e.current;null!==Za;){var o=Za,a=o.child;if(0!==(16&Za.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Za=u;null!==Za;){var h=Za;switch(h.tag){case 0:case 11:case 15:il(8,h,o)}var d=h.child;if(null!==d)d.return=h,Za=d;else for(;null!==Za;){var f=(h=Za).sibling,p=h.return;if(ol(h),h===u){Za=null;break}if(null!==f){f.return=p,Za=f;break}Za=p}}}var g=o.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Za=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Za=a;else e:for(;null!==Za;){if(0!==(2048&(o=Za).flags))switch(o.tag){case 0:case 11:case 15:il(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Za=v;break e}Za=o.return}}var b=e.current;for(Za=b;null!==Za;){var w=(a=Za).child;if(0!==(2064&a.subtreeFlags)&&null!==w)w.return=a,Za=w;else e:for(a=b;null!==Za;){if(0!==(2048&(l=Za).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(x){Ic(l,l.return,x)}if(l===a){Za=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Za=_;break e}Za=l.return}}if(Al=r,Br(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(x){}i=!0}return i}finally{bt=n,Cl.transition=t}}return!1}function Sc(e,t,n){e=Ms(e,t=pa(0,t=ua(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Gl||!Gl.has(i))){t=Ms(t,e=ga(t,e=ua(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Nl&n)===n&&(4===Rl||3===Rl&&(130023424&Nl)===Nl&&500>$e()-Bl?fc(e,0):zl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=tc();null!==(e=As(e,t))&&(yt(e,t,n),rc(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Tc(e,n)}function Pc(e,t){return Ge(e,t)}function Dc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nc(e,t,n,i){return new Dc(e,t,n,i)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Nc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,i,r,o){var a=2;if(i=e,"function"===typeof e)Oc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case k:return Lc(n.children,r,o,t);case S:a=8,r|=8;break;case I:return(e=Nc(12,n,t,2|r)).elementType=I,e.lanes=o,e;case A:return(e=Nc(13,n,t,r)).elementType=A,e.lanes=o,e;case P:return(e=Nc(19,n,t,r)).elementType=P,e.lanes=o,e;case O:return Fc(n,r,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:a=10;break e;case T:a=9;break e;case C:a=11;break e;case D:a=14;break e;case N:a=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Nc(a,n,t,r)).elementType=e,t.type=i,t.lanes=o,t}function Lc(e,t,n,i){return(e=Nc(7,e,i,t)).lanes=n,e}function Fc(e,t,n,i){return(e=Nc(22,e,i,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Nc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Nc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,i,r,s,o,a,l){return e=new Uc(e,t,n,a,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Nc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ds(s),e}function Bc(e){if(!e)return Tr;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Nr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Nr(n))return Rr(e,n,t)}return t}function qc(e,t,n,i,r,s,o,a,l){return(e=jc(n,i,!0,e,0,s,0,a,l)).context=Bc(null),n=e.current,(s=Os(i=tc(),r=nc(n))).callback=void 0!==t&&null!==t?t:null,Ms(n,s,r),e.current.lanes=r,yt(e,r,i),rc(e,i),e}function Wc(e,t,n,i){var r=t.current,s=tc(),o=nc(r);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Os(s,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=Ms(r,t,o))&&(ic(e,r,o,s),Rs(e,r,o)),o}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Kc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Kc(e,t),(e=e.alternate)&&Kc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ar.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Pa(t),fs();break;case 5:so(t);break;case 1:Nr(t.type)&&Lr(t);break;case 4:io(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Er(ys,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Er(ao,1&ao.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Va(e,t,n):(Er(ao,1&ao.current),null!==(e=Ha(e,t,n))?e.sibling:null);Er(ao,1&ao.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return qa(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er(ao,ao.current),i)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Ha(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,rs&&0!==(1048576&t.flags)&&Zr(t,Kr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Wa(e,t),e=t.pendingProps;var r=Dr(t,Cr.current);Ss(t,n),r=So(null,t,i,e,r,n);var o=Io();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Nr(i)?(o=!0,Lr(t)):o=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Ds(t),r.updater=js,t.stateNode=r,r._reactInternals=t,Hs(t,i,e,n),t=Aa(null,t,i,!0,o,n)):(t.tag=0,rs&&o&&es(t),_a(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Wa(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===D)return 14}return 2}(i),e=ms(i,e),r){case 0:t=Ta(null,t,i,e,n);break e;case 1:t=Ca(null,t,i,e,n);break e;case 11:t=xa(null,t,i,e,n);break e;case 14:t=ka(null,t,i,ms(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Ta(e,t,i,r=t.elementType===i?r:ms(i,r),n);case 1:return i=t.type,r=t.pendingProps,Ca(e,t,i,r=t.elementType===i?r:ms(i,r),n);case 3:e:{if(Pa(t),null===e)throw Error(s(387));i=t.pendingProps,r=(o=t.memoizedState).element,Ns(e,t),Fs(t,i,null,n);var a=t.memoizedState;if(i=a.element,o.isDehydrated){if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,i,n,r=ua(Error(s(423)),t));break e}if(i!==r){t=Da(e,t,i,n,r=ua(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=$s(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){t=Ha(e,t,n);break e}_a(e,t,i,n)}t=t.child}return t;case 5:return so(t),null===e&&cs(t),i=t.type,r=t.pendingProps,o=null!==e?e.memoizedProps:null,a=r.children,nr(i,r)?a=null:null!==o&&nr(i,o)&&(t.flags|=32),Ea(e,t),_a(e,t,a,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Va(e,t,n);case 4:return io(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=Xs(t,null,i,n):_a(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,xa(e,t,i,r=t.elementType===i?r:ms(i,r),n);case 7:return _a(e,t,t.pendingProps,n),t.child;case 8:case 12:return _a(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,o=t.memoizedProps,a=r.value,Er(ys,i._currentValue),i._currentValue=a,null!==o)if(ai(o.value,a)){if(o.children===r.children&&!Ar.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===o.tag){(c=Os(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),ks(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(s(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),ks(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}_a(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,Ss(t,n),i=i(r=Is(r)),t.flags|=1,_a(e,t,i,n),t.child;case 14:return r=ms(i=t.type,t.pendingProps),ka(e,t,i,r=ms(i.type,r),n);case 15:return Sa(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:ms(i,r),Wa(e,t),t.tag=1,Nr(i)?(e=!0,Lr(t)):e=!1,Ss(t,n),qs(t,i,r),Hs(t,i,r,n),Aa(null,t,i,!0,e,n);case 19:return qa(e,t,n);case 22:return Ia(e,t,n)}throw Error(s(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function eu(e,t,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if("function"===typeof r){var a=r;r=function(){var e=Hc(o);a.call(e)}}Wc(t,o,e,r)}else o=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Hc(o);s.call(e)}}var o=qc(t,i,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pr]=o.current,Bi(8===e.nodeType?e.parentNode:e),hc(),o}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var a=i;i=function(){var e=Hc(l);a.call(e)}}var l=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pr]=l.current,Bi(8===e.nodeType?e.parentNode:e),hc((function(){Wc(t,l,n,i)})),l}(n,t,e,r,i);return Hc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hc((function(){Wc(null,e,null,null)})),t[pr]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,$e()),0===(6&Al)&&(ql=$e()+500,Br()))}break;case 13:hc((function(){var t=As(e,1);if(null!==t){var n=tc();ic(t,e,1,n)}})),Gc(e,1)}},xt=function(e){if(13===e.tag){var t=As(e,134217728);if(null!==t)ic(t,e,134217728,tc());Gc(e,134217728)}},kt=function(e){if(13===e.tag){var t=nc(e),n=As(e,t);if(null!==n)ic(n,e,t,tc());Gc(e,t)}},St=function(){return bt},It=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=_r(i);if(!r)throw Error(s(90));G(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=uc,Ae=hc;var tu={usingClientEntryPoint:!1,Events:[br,wr,_r,Ee,Te,uc]},nu={findFiberByHostInstance:vr,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},iu={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{rt=ru.inject(iu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(s(299));var n=!1,i="",r=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,Bi(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return hc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,o="",a=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,r,0,o,a),e[pr]=t.current,Bi(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(s(200));return eu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(s(40));return!!e._reactRootContainer&&(hc((function(){eu(null,null,e,!1,(function(){e._reactRootContainer=null,e[pr]=null}))})),!0)},t.unstable_batchedUpdates=uc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Jc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return eu(e,t,n,!1,i)},t.version="18.2.0-next-9e3b772b8-20220608"},391:(e,t,n)=>{"use strict";var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},153:(e,t,n)=>{"use strict";var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:a.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var _=Array.isArray,x=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function I(e,t,i){var r,s={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,r)&&!S.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:o,ref:a,props:s,_owner:k.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function A(e,t,r,s,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return o=o(l=e),e=""===s?"."+C(l,0):s,_(o)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),A(o,t,r,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,r+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+C(a=e[c],c);l+=A(a,t,r,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=A(a=a.value,t,r,u=s+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var i=[],r=0;return A(e,i,"","",(function(e){return t.call(n,e,r++)})),i}function D(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},O={transition:null},M={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:O,ReactCurrentOwner:k};t.Children={map:P,forEach:function(e,t,n){P(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return P(e,(function(){t++})),t},toArray:function(e){return P(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=r,t.Profiler=o,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)x.call(t,c)&&!S.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:o,props:r,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=I,t.createFactory=function(e){var t=I.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:D}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.2.0"},43:(e,t,n)=>{"use strict";e.exports=n(202)},579:(e,t,n)=>{"use strict";e.exports=n(153)},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,o=r>>>1;i<o;){var a=2*(i+1)-1,l=e[a],c=a+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[a]=n,i=a);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(m=!1,w(e),!g)if(null!==i(c))g=!0,O(x);else{var t=i(u);null!==t&&M(_,t.startTime-e)}}function x(e,n){g=!1,m&&(m=!1,v(E),E=-1),p=!0;var s=f;try{for(w(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===i(c)&&r(c),w(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&M(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,I=null,E=-1,T=5,C=-1;function A(){return!(t.unstable_now()-C<T)}function P(){if(null!==I){var e=t.unstable_now();C=e;var n=!0;try{n=I(!0,e)}finally{n?k():(S=!1,I=null)}}else S=!1}if("function"===typeof b)k=function(){b(P)};else if("undefined"!==typeof MessageChannel){var D=new MessageChannel,N=D.port2;D.port1.onmessage=P,k=function(){N.postMessage(null)}}else k=function(){y(P,0)};function O(e){I=e,S||(S=!0,k())}function M(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,O(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:a=s+a,sortIndex:-1},s>o?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(m?(v(E),E=-1):m=!0,M(_,s-o))):(e.sortIndex=a,n(c,e),g||p||(g=!0,O(x))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},853:(e,t,n)=>{"use strict";e.exports=n(234)}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>"static/js/"+e+".50385a13.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="expense-tracker:";n.l=(i,r,s,o)=>{if(e[i])e[i].push(r);else{var a,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,n.nc&&a.setAttribute("nonce",n.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[r];var d=(t,n)=>{a.onerror=a.onload=null,clearTimeout(f);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=d.bind(null,a.onerror),a.onload=d.bind(null,a.onload),l&&document.head.appendChild(a)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/Moneysprint.io/",(()=>{var e={792:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((n,i)=>r=e[t]=[n,i]));i.push(r[2]=s);var o=n.p+n.u(t),a=new Error;n.l(o,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,r[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var r,s,o=i[0],a=i[1],l=i[2],c=0;if(o.some((t=>0!==e[t]))){for(r in a)n.o(a,r)&&(n.m[r]=a[r]);if(l)l(n)}for(t&&t(i);c<o.length;c++)s=o[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunkexpense_tracker=self.webpackChunkexpense_tracker||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{FirebaseError:()=>x,SDK_VERSION:()=>Ae,_DEFAULT_ENTRY_NAME:()=>fe,_addComponent:()=>ve,_addOrOverwriteComponent:()=>be,_apps:()=>ge,_clearComponents:()=>Ie,_components:()=>ye,_getProvider:()=>_e,_isFirebaseApp:()=>ke,_isFirebaseServerApp:()=>Se,_registerComponent:()=>we,_removeServiceInstance:()=>xe,_serverApps:()=>me,deleteApp:()=>Me,getApp:()=>Ne,getApps:()=>Oe,initializeApp:()=>Pe,initializeServerApp:()=>De,onLog:()=>Le,registerVersion:()=>Re,setLogLevel:()=>Fe});var t=n(43),i=n(391);const r=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,o=s?e[r+1]:0,a=r+2<e.length,l=a?e[r+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|l>>6,d=63&l;a||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const l=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==a||null==l)throw new o;const c=t<<2|s>>4;if(i.push(c),64!==a){const e=s<<4&240|a>>2;if(i.push(e),64!==l){const e=a<<6&192|l;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},l=function(e){try{return s.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=c(e[n],t[n]));return e}const u=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return u()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/Moneysprint.io",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&l(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},d=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config};class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}function p(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function g(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function m(){return"object"===typeof self&&self.self===self}function y(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function v(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function b(){const e=p();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function w(){return!g()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"===typeof indexedDB}catch(e){return!1}}class x extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,x.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.create)}}class k{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(S,((e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")}))}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new x(n,s,t)}}const S=/\{\$([^}]+)}/g;function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function E(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(T(n)&&T(s)){if(!E(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function T(e){return null!==e&&"object"===typeof e}function C(e){const t=[];for(const[n,i]of Object.entries(e))Array.isArray(i)?i.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function A(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,i]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(i)}})),t}function P(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function D(e,t){const n=new N(e,t);return n.subscribe.bind(n)}class N{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let i;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");i=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===i.next&&(i.next=O),void 0===i.error&&(i.error=O),void 0===i.complete&&(i.complete=O);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(e){}})),this.observers.push(i),r}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function O(){}function M(e){return e&&e._delegate?e._delegate:e}class R{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const L="[DEFAULT]";class F{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new f;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:L})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:i});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(i){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===L?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(s){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;return this.component?this.component.multipleInstances?e:L:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class V{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new F(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const z=[];var U;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(U||(U={}));const j={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},B=U.INFO,q={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},W=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=q[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class H{constructor(e){this.name=e,this._logLevel=B,this._logHandler=W,this._userLogHandler=null,z.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in U))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?j[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...t),this._logHandler(this,U.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...t),this._logHandler(this,U.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.INFO,...t),this._logHandler(this,U.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.WARN,...t),this._logHandler(this,U.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,U.ERROR,...t),this._logHandler(this,U.ERROR,...t)}}const K=(e,t)=>t.some((t=>e instanceof t));let G,Q;const Y=new WeakMap,X=new WeakMap,$=new WeakMap,J=new WeakMap,Z=new WeakMap;let ee={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return X.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ie(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function te(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Q||(Q=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(re(this),n),ie(Y.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return ie(e.apply(re(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(re(this),t,...i);return $.set(s,t.sort?t.sort():[t]),ie(s)}}function ne(e){return"function"===typeof e?te(e):(e instanceof IDBTransaction&&function(e){if(X.has(e))return;const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)}));X.set(e,t)}(e),K(e,G||(G=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,ee):e)}function ie(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(ie(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)}));return t.then((t=>{t instanceof IDBCursor&&Y.set(t,e)})).catch((()=>{})),Z.set(t,e),t}(e);if(J.has(e))return J.get(e);const t=ne(e);return t!==e&&(J.set(e,t),Z.set(t,e)),t}const re=e=>Z.get(e);const se=["get","getKey","getAll","getAllKeys","count"],oe=["put","add","delete","clear"],ae=new Map;function le(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(ae.get(t))return ae.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=oe.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!se.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return i&&(s=s.index(a.shift())),(await Promise.all([s[n](...a),r&&t.done]))[0]};return ae.set(t,s),s}!function(e){ee=e(ee)}((e=>({...e,get:(t,n,i)=>le(t,n)||e.get(t,n,i),has:(t,n)=>!!le(t,n)||e.has(t,n)})));class ce{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((e=>e)).join(" ")}}const ue="@firebase/app",he="0.10.0",de=new H("@firebase/app"),fe="[DEFAULT]",pe={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ge=new Map,me=new Map,ye=new Map;function ve(e,t){try{e.container.addComponent(t)}catch(n){de.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function be(e,t){e.container.addOrOverwriteComponent(t)}function we(e){const t=e.name;if(ye.has(t))return de.debug("There were multiple attempts to register component ".concat(t,".")),!1;ye.set(t,e);for(const n of ge.values())ve(n,e);for(const n of me.values())ve(n,e);return!0}function _e(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function xe(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fe;_e(e,t).clearInstance(n)}function ke(e){return void 0!==e.options}function Se(e){return void 0!==e.settings}function Ie(){ye.clear()}const Ee=new k("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class Te{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new R("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ee.create("app-deleted",{appName:this._name})}}class Ce extends Te{constructor(e,t,n,i){const r=void 0!==t.automaticDataCollectionEnabled&&t.automaticDataCollectionEnabled,s={name:n,automaticDataCollectionEnabled:r};if(void 0!==e.apiKey)super(e,s,i);else{super(e.options,s,i)}this._serverConfig=Object.assign({automaticDataCollectionEnabled:r},t),this._finalizationRegistry=new FinalizationRegistry((()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,Re(ue,he,"serverapp")}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){Me(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw Ee.create("server-app-deleted")}}const Ae="10.10.0";function Pe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:fe,automaticDataCollectionEnabled:!1},t),r=i.name;if("string"!==typeof r||!r)throw Ee.create("bad-app-name",{appName:String(r)});if(n||(n=d()),!n)throw Ee.create("no-options");const s=ge.get(r);if(s){if(E(n,s.options)&&E(i,s.config))return s;throw Ee.create("duplicate-app",{appName:r})}const o=new V(r);for(const l of ye.values())o.addComponent(l);const a=new Te(n,i,o);return ge.set(r,a),a}function De(e,t){if(m())throw Ee.create("invalid-server-app-environment");let n;void 0===t.automaticDataCollectionEnabled&&(t.automaticDataCollectionEnabled=!1),n=ke(e)?e.options:e;const i=Object.assign(Object.assign({},t),n);void 0!==i.releaseOnDeref&&delete i.releaseOnDeref;if(void 0!==t.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw Ee.create("finalization-registry-not-supported",{});const r=""+(s=JSON.stringify(i),[...s].reduce(((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0),0));var s;const o=me.get(r);if(o)return o.incRefCount(t.releaseOnDeref),o;const a=new V(r);for(const c of ye.values())a.addComponent(c);const l=new Ce(n,t,r,a);return me.set(r,l),l}function Ne(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe;const t=ge.get(e);if(!t&&e===fe&&d())return Pe();if(!t)throw Ee.create("no-app",{appName:e});return t}function Oe(){return Array.from(ge.values())}async function Me(e){let t=!1;const n=e.name;if(ge.has(n))t=!0,ge.delete(n);else if(me.has(n)){e.decRefCount()<=0&&(me.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function Re(e,t,n){var i;let r=null!==(i=pe[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void de.warn(e.join(" "))}we(new R("".concat(r,"-version"),(()=>({library:r,version:t})),"VERSION"))}function Le(e,t){if(null!==e&&"function"!==typeof e)throw Ee.create("invalid-log-argument");!function(e,t){for(const n of z){let i=null;t&&t.level&&(i=j[t.level]),n.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),o=2;o<r;o++)s[o-2]=arguments[o];const a=s.map((e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:U[n].toLowerCase(),message:a,args:s,type:t.name})}}}(e,t)}function Fe(e){var t;t=e,z.forEach((e=>{e.setLogLevel(t)}))}const Ve="firebase-heartbeat-database",ze=1,Ue="firebase-heartbeat-store";let je=null;function Be(){return je||(je=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=ie(o);return i&&o.addEventListener("upgradeneeded",(e=>{i(ie(o.result),e.oldVersion,e.newVersion,ie(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),a.then((e=>{s&&e.addEventListener("close",(()=>s())),r&&e.addEventListener("versionchange",(e=>r(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),a}(Ve,ze,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Ue)}catch(n){console.warn(n)}}}).catch((e=>{throw Ee.create("idb-open",{originalErrorMessage:e.message})}))),je}async function qe(e,t){try{const n=(await Be()).transaction(Ue,"readwrite"),i=n.objectStore(Ue);await i.put(t,We(e)),await n.done}catch(n){if(n instanceof x)de.warn(n.message);else{const e=Ee.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});de.warn(e.message)}}}function We(e){return"".concat(e.name,"!").concat(e.options.appId)}class He{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ge(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Ke();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==i&&!this._heartbeatsCache.heartbeats.some((e=>e.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Ke(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find((e=>e.agent===r.agent));if(e){if(e.dates.push(r.date),Qe(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Qe(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=a(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Ke(){return(new Date).toISOString().substring(0,10)}class Ge{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_()&&new Promise(((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Be()).transaction(Ue),n=await t.objectStore(Ue).get(We(e));return await t.done,n}catch(t){if(t instanceof x)de.warn(t.message);else{const e=Ee.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});de.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return qe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return qe(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Qe(e){return a(JSON.stringify({version:2,heartbeats:e})).length}var Ye;Ye="",we(new R("platform-logger",(e=>new ce(e)),"PRIVATE")),we(new R("heartbeat",(e=>new He(e)),"PRIVATE")),Re(ue,he,Ye),Re(ue,he,"esm2017"),Re("fire-js","");class Xe{constructor(e,t){this._delegate=e,this.firebase=t,ve(e,new R("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),Me(this._delegate))))}_getService(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe;var n;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return i.isInitialized()||"EXPLICIT"!==(null===(n=i.getComponent())||void 0===n?void 0:n.instantiationMode)||i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fe;this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){ve(this._delegate,e)}_addOrOverwriteComponent(e){be(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const $e=new k("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."});const Je=function t(){const n=function(t){const n={},i={__esModule:!0,initializeApp:function(e){const r=Pe(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(I(n,r.name))return n[r.name];const s=new t(r,i);return n[r.name]=s,s},app:r,registerVersion:Re,setLogLevel:Fe,onLog:Le,apps:null,SDK_VERSION:Ae,INTERNAL:{registerComponent:function(e){const n=e.name,s=n.replace("-compat","");if(we(e)&&"PUBLIC"===e.type){const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r();if("function"!==typeof e[s])throw $e.create("invalid-app-argument",{appName:n});return e[s]()};void 0!==e.serviceProps&&c(o,e.serviceProps),i[s]=o,t.prototype[s]=function(){const t=this._getService.bind(this,n);for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t.apply(this,e.multipleInstances?r:[])}}return"PUBLIC"===e.type?i[s]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function r(e){if(!I(n,e=e||fe))throw $e.create("no-app",{appName:e});return n[e]}return i.default=i,Object.defineProperty(i,"apps",{get:function(){return Object.keys(n).map((e=>n[e]))}}),r.App=t,i}(Xe);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){c(n,e)},createSubscribe:D,ErrorFactory:k,deepExtend:c}),n}(),Ze=new H("@firebase/app-compat");if(m()&&void 0!==self.firebase){Ze.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Ze.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const et=Je;!function(e){Re("@firebase/app-compat","0.2.30",e)}();et.registerVersion("firebase","10.10.0","app-compat");function tt(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;const nt={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},it="EMAIL_SIGNIN",rt="PASSWORD_RESET",st="RECOVER_EMAIL",ot="REVERT_SECOND_FACTOR_ADDITION",at="VERIFY_AND_CHANGE_EMAIL",lt="VERIFY_EMAIL";function ct(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ut=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},ht=ct,dt=new k("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ft=new H("@firebase/auth");function pt(e){if(ft.logLevel<=U.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];ft.error("Auth (".concat(Ae,"): ").concat(e),...n)}}function gt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];throw wt(e,...n)}function mt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return wt(e,...n)}function yt(e,t,n){const i=Object.assign(Object.assign({},ht()),{[t]:n});return new k("auth","Firebase",i).create(t,{appName:e.name})}function vt(e){return yt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function bt(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&gt(e,"argument-error"),yt(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function wt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if("string"!==typeof e){const t=n[0],i=[...n.slice(1)];return i[0]&&(i[0].appName=e.name),e._errorFactory.create(t,...i)}return dt.create(e,...n)}function _t(e,t){if(!e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];throw wt(t,...i)}}function xt(e){const t="INTERNAL ASSERTION FAILED: "+e;throw pt(t),new Error(t)}function kt(e,t){e||xt(t)}function St(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function It(){return"http:"===Et()||"https:"===Et()}function Et(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Tt{constructor(e,t){this.shortDelay=e,this.longDelay=t,kt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())||v()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(It()||y()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ct(e,t){kt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class At{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void xt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void xt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void xt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Dt=new Tt(3e4,6e4);function Nt(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Ot(e,t,n,i){return Mt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},(async()=>{let r={},s={};i&&("GET"===t?s=i:r={body:JSON.stringify(i)});const o=C(Object.assign({key:e.config.apiKey},s)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),At.fetch()(Lt(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},r))}))}async function Mt(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},Pt),t);try{const t=new Vt(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw zt(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw zt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw zt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw zt(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw yt(e,a,o);gt(e,a)}}catch(r){if(r instanceof x)throw r;gt(e,"network-request-failed",{message:String(r)})}}async function Rt(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await Ot(e,t,n,i,r);return"mfaPendingCredential"in s&&gt(e,"multi-factor-auth-required",{_serverResponse:s}),s}function Lt(e,t,n,i){const r="".concat(t).concat(n,"?").concat(i);return e.config.emulator?Ct(e.config,r):"".concat(e.config.apiScheme,"://").concat(r)}function Ft(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Vt{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(mt(this.auth,"network-request-failed"))),Dt.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function zt(e,t,n){const i={appName:e.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=mt(e,t,i);return r.customData._tokenResponse=n,r}function Ut(e){return void 0!==e&&void 0!==e.getResponse}function jt(e){return void 0!==e&&void 0!==e.enterprise}class Bt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Ft(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}async function qt(e,t){return Ot(e,"GET","/v2/recaptchaConfig",Nt(e,t))}async function Wt(e,t){return Ot(e,"POST","/v1/accounts:lookup",t)}function Ht(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Kt(e){return 1e3*Number(e)}function Gt(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return pt("JWT malformed, contained fewer than 3 sections"),null;try{const e=l(n);return e?JSON.parse(e):(pt("Failed to decode base64 JWT payload"),null)}catch(r){return pt("Caught error parsing JWT payload as JSON",null===r||void 0===r?void 0:r.toString()),null}}function Qt(e){const t=Gt(e);return _t(t,"internal-error"),_t("undefined"!==typeof t.exp,"internal-error"),_t("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Yt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof x&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class Xt{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class $t{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ht(this.lastLoginAt),this.creationTime=Ht(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Jt(e){var t;const n=e.auth,i=await e.getIdToken(),r=await Yt(e,Wt(n,{idToken:i}));_t(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?Zt(s.providerUserInfo):[],a=(l=e.providerData,c=o,[...l.filter((e=>!c.some((t=>t.providerId===e.providerId)))),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new $t(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function Zt(e){return e.map((e=>{var{providerId:t}=e,n=tt(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}class en{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_t(e.idToken,"internal-error"),_t("undefined"!==typeof e.idToken,"internal-error"),_t("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Qt(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){_t(0!==e.length,"internal-error");const t=Qt(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(_t(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:r}=await async function(e,t){const n=await Mt(e,{},(async()=>{const n=C({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:r}=e.config,s=Lt(e,i,"/v1/token","key=".concat(r)),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",At.fetch()(s,{method:"POST",headers:o,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:i,expirationTime:r}=t,s=new en;return n&&(_t("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),i&&(_t("string"===typeof i,"internal-error",{appName:e}),s.accessToken=i),r&&(_t("number"===typeof r,"internal-error",{appName:e}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new en,this.toJSON())}_performRefresh(){return xt("not implemented")}}function tn(e,t){_t("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class nn{constructor(e){var{uid:t,auth:n,stsTokenManager:i}=e,r=tt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Xt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new $t(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Yt(this,this.stsTokenManager.getToken(this.auth,e));return _t(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=M(e),i=await n.getIdToken(t),r=Gt(i);_t(r&&r.exp&&r.auth_time&&r.iat,n.auth,"internal-error");const s="object"===typeof r.firebase?r.firebase:void 0,o=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:r,token:i,authTime:Ht(Kt(r.auth_time)),issuedAtTime:Ht(Kt(r.iat)),expirationTime:Ht(Kt(r.exp)),signInProvider:o||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=M(e);await Jt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(_t(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new nn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){_t(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Jt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Se(this.auth.app))return Promise.reject(vt(this.auth));const e=await this.getIdToken();return await Yt(this,async function(e,t){return Ot(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,i,r,s,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(i=t.email)&&void 0!==i?i:void 0,d=null!==(r=t.phoneNumber)&&void 0!==r?r:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:_,stsTokenManager:x}=t;_t(v&&x,e,"internal-error");const k=en.fromJSON(this.name,x);_t("string"===typeof v,e,"internal-error"),tn(u,e.name),tn(h,e.name),_t("boolean"===typeof b,e,"internal-error"),_t("boolean"===typeof w,e,"internal-error"),tn(d,e.name),tn(f,e.name),tn(p,e.name),tn(g,e.name),tn(m,e.name),tn(y,e.name);const S=new nn({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map((e=>Object.assign({},e)))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new en;i.updateFromServerResponse(t);const r=new nn({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:n});return await Jt(r),r}static async _fromGetAccountInfoResponse(e,t,n){const i=t.users[0];_t(void 0!==i.localId,"internal-error");const r=void 0!==i.providerUserInfo?Zt(i.providerUserInfo):[],s=!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length),o=new en;o.updateFromIdToken(n);const a=new nn({uid:i.localId,auth:e,stsTokenManager:o,isAnonymous:s}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:r,metadata:new $t(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(null===r||void 0===r?void 0:r.length)};return Object.assign(a,l),a}}const rn=new Map;function sn(e){kt(e instanceof Function,"Expected a class definition");let t=rn.get(e);return t?(kt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,rn.set(e,t),t)}class on{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}on.type="NONE";const an=on;function ln(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class cn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=ln(this.userKey,i.apiKey,r),this.fullPersistenceKey=ln("persistence",i.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?nn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new cn(sn(an),e,n);const i=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let r=i[0]||sn(an);const s=ln(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(s);if(t){const n=nn._fromJSON(e,t);c!==r&&(o=n),r=c;break}}catch(l){}const a=i.filter((e=>e._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(t.map((async e=>{if(e!==r)try{await e._remove(s)}catch(l){}}))),new cn(r,e,n)):new cn(r,e,n)}}function un(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(hn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(mn(t))return"Blackberry";if(yn(t))return"Webos";if(dn(t))return"Safari";if((t.includes("chrome/")||fn(t))&&!t.includes("edge/"))return"Chrome";if(gn(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function hn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/firefox\//i.test(e)}function dn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/crios\//i.test(e)}function pn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/iemobile/i.test(e)}function gn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/android/i.test(e)}function mn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/blackberry/i.test(e)}function yn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/webos/i.test(e)}function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function bn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return vn(e)||gn(e)||yn(e)||mn(e)||/windows phone/i.test(e)||pn(e)}function wn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=un(p());break;case"Worker":t="".concat(un(p()),"-").concat(e);break;default:t=e}const i=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Ae,"/").concat(i)}class _n{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,i)=>{try{n(e(t))}catch(r){i(r)}}));n.onAbort=t,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class xn{constructor(e){var t,n,i,r;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=e.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let i=0;i<e.length;i++)n=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}class kn{constructor(e,t,n,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new In(this),this.idTokenSubscription=new In(this),this.beforeStateQueue=new _n(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=sn(t)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await cn.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await Wt(this,{idToken:e}),n=await nn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(Se(this.app)){const e=this.app.settings.authIdToken;return e?new Promise((t=>{setTimeout((()=>this.initializeCurrentUserFromIdToken(e).then(t,t)))})):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return _t(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jt(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Se(this.app))return Promise.reject(vt(this));const t=e?M(e):null;return t&&_t(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&_t(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return Se(this.app)?Promise.reject(vt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Se(this.app)?Promise.reject(vt(this)):this.queue((async()=>{await this.assertedPersistence.setPersistence(sn(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ot(e,"GET","/v2/passwordPolicy",Nt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new xn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new k("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ot(e,"POST","/v2/accounts:revokeToken",Nt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&sn(e)||this._popupRedirectResolver;_t(t,this,"argument-error"),this.redirectPersistenceManager=await cn.create(this,[sn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,i){if(this._deleted)return()=>{};const r="function"===typeof t?t:t.next.bind(t);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(_t(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"===typeof t){const r=e.addObserver(t,n,i);return()=>{s=!0,r()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _t(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=wn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(ft.logLevel<=U.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];ft.warn("Auth (".concat(Ae,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Sn(e){return M(e)}class In{constructor(e){this.auth=e,this.observer=null,this.addObserver=D((e=>this.observer=e))}get next(){return _t(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let En={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Tn(e){return En.loadJS(e)}function Cn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class An{constructor(e){this.type="recaptcha-enterprise",this.auth=Sn(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,i){const r=window.grecaptcha;jt(r)?r.enterprise.ready((()=>{r.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{qt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new Bt(i);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))})(this.auth).then((r=>{if(!t&&jt(window.grecaptcha))n(r,e,i);else{if("undefined"===typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=En.recaptchaEnterpriseScript;0!==t.length&&(t+=r),Tn(t).then((()=>{n(r,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function Pn(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=new An(e);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},t);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Dn(e,t,n,i){var r;if(null===(r=e._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await Pn(e,t,n,"getOobCode"===n);return i(e,r)}return i(e,t).catch((async r=>{if(r.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const r=await Pn(e,t,n,"getOobCode"===n);return i(e,r)}return Promise.reject(r)}))}function Nn(e,t,n){const i=Sn(e);_t(i._canInitEmulator,i,"emulator-config-failed"),_t(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=On(t),{host:o,port:a}=function(e){const t=On(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const e=r[1];return{host:e,port:Mn(i.substr(e.length+1))}}{const[e,t]=i.split(":");return{host:e,port:Mn(t)}}}(t),l=null===a?"":":".concat(a);i.config.emulator={url:"".concat(s,"//").concat(o).concat(l,"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function On(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Mn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Rn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return xt("not implemented")}_getIdTokenResponse(e){return xt("not implemented")}_linkToIdToken(e,t){return xt("not implemented")}_getReauthenticationResolver(e){return xt("not implemented")}}async function Ln(e,t){return Ot(e,"POST","/v1/accounts:resetPassword",Nt(e,t))}async function Fn(e,t){return Ot(e,"POST","/v1/accounts:signUp",t)}async function Vn(e,t){return Rt(e,"POST","/v1/accounts:signInWithPassword",Nt(e,t))}async function zn(e,t){return Ot(e,"POST","/v1/accounts:sendOobCode",Nt(e,t))}async function Un(e,t){return zn(e,t)}async function jn(e,t){return zn(e,t)}class Bn extends Rn{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new Bn(e,t,"password")}static _fromEmailAndCode(e,t){return new Bn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Dn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",Vn);case"emailLink":return async function(e,t){return Rt(e,"POST","/v1/accounts:signInWithEmailLink",Nt(e,t))}(e,{email:this._email,oobCode:this._password});default:gt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Dn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Fn);case"emailLink":return async function(e,t){return Rt(e,"POST","/v1/accounts:signInWithEmailLink",Nt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:gt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function qn(e,t){return Rt(e,"POST","/v1/accounts:signInWithIdp",Nt(e,t))}class Wn extends Rn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Wn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):gt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i}=t,r=tt(t,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Wn(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(e){return qn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,qn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=C(t)}return e}}const Hn={USER_NOT_FOUND:"user-not-found"};class Kn extends Rn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Kn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Kn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Rt(e,"POST","/v1/accounts:signInWithPhoneNumber",Nt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Rt(e,"POST","/v1/accounts:signInWithPhoneNumber",Nt(e,t));if(n.temporaryProof)throw zt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Rt(e,"POST","/v1/accounts:signInWithPhoneNumber",Nt(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Hn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:i}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}=e;return n||t||i||r?new Kn({verificationId:t,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}class Gn{constructor(e){var t,n,i,r,s,o;const a=A(P(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=a.mode)&&void 0!==i?i:null);_t(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(r=a.continueUrl)&&void 0!==r?r:null,this.languageCode=null!==(s=a.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=A(P(e)).link,n=t?A(P(t)).deep_link_id:null,i=A(P(e)).deep_link_id;return(i?A(P(i)).link:null)||i||n||t||e}(e);try{return new Gn(t)}catch(n){return null}}}class Qn{constructor(){this.providerId=Qn.PROVIDER_ID}static credential(e,t){return Bn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Gn.parseLink(t);return _t(n,"argument-error"),Bn._fromEmailAndCode(e,n.code,n.tenantId)}}Qn.PROVIDER_ID="password",Qn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Qn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Yn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xn extends Yn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $n extends Xn{static credentialFromJSON(e){const t="string"===typeof e?JSON.parse(e):e;return _t("providerId"in t&&"signInMethod"in t,"argument-error"),Wn._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return _t(e.idToken||e.accessToken,"argument-error"),Wn._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return $n.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return $n.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i,oauthTokenSecret:r,pendingToken:s,nonce:o,providerId:a}=t;if(!i&&!r&&!n&&!s)return null;if(!a)return null;try{return new $n(a)._credential({idToken:n,accessToken:i,nonce:o,pendingToken:s})}catch(l){return null}}}class Jn extends Xn{constructor(){super("facebook.com")}static credential(e){return Wn._fromParams({providerId:Jn.PROVIDER_ID,signInMethod:Jn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jn.credentialFromTaggedObject(e)}static credentialFromError(e){return Jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Jn.credential(t.oauthAccessToken)}catch(n){return null}}}Jn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Jn.PROVIDER_ID="facebook.com";class Zn extends Xn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Wn._fromParams({providerId:Zn.PROVIDER_ID,signInMethod:Zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Zn.credentialFromTaggedObject(e)}static credentialFromError(e){return Zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:i}=t;if(!n&&!i)return null;try{return Zn.credential(n,i)}catch(r){return null}}}Zn.GOOGLE_SIGN_IN_METHOD="google.com",Zn.PROVIDER_ID="google.com";class ei extends Xn{constructor(){super("github.com")}static credential(e){return Wn._fromParams({providerId:ei.PROVIDER_ID,signInMethod:ei.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ei.credentialFromTaggedObject(e)}static credentialFromError(e){return ei.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return ei.credential(t.oauthAccessToken)}catch(n){return null}}}ei.GITHUB_SIGN_IN_METHOD="github.com",ei.PROVIDER_ID="github.com";class ti extends Rn{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return qn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,qn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qn(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:i,pendingToken:r}=t;return n&&i&&r&&n===i?new ti(n,r):null}static _create(e,t){return new ti(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ni extends Yn{constructor(e){_t(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return ni.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return ni.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=ti.fromJSON(e);return _t(t,"argument-error"),t}static samlCredentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{pendingToken:n,providerId:i}=t;if(!n||!i)return null;try{return ti._create(i,n)}catch(r){return null}}}class ii extends Xn{constructor(){super("twitter.com")}static credential(e,t){return Wn._fromParams({providerId:ii.PROVIDER_ID,signInMethod:ii.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ii.credentialFromTaggedObject(e)}static credentialFromError(e){return ii.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=t;if(!n||!i)return null;try{return ii.credential(n,i)}catch(r){return null}}}async function ri(e,t){return Rt(e,"POST","/v1/accounts:signUp",Nt(e,t))}ii.TWITTER_SIGN_IN_METHOD="twitter.com",ii.PROVIDER_ID="twitter.com";class si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=await nn._fromIdTokenResponse(e,n,i),s=oi(n);return new si({user:r,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const i=oi(n);return new si({user:e,providerId:i,_tokenResponse:n,operationType:t})}}function oi(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class ai extends x{constructor(e,t,n,i){var r;super(t.code,t.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,ai.prototype),this.customData={appName:e.name,tenantId:null!==(r=e.tenantId)&&void 0!==r?r:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,i){return new ai(e,t,n,i)}}function li(e,t,n,i){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw ai._fromErrorAndOperation(e,n,t,i);throw n}))}function ci(e){return new Set(e.map((e=>{let{providerId:t}=e;return t})).filter((e=>!!e)))}async function ui(e,t){const n=M(e);await di(!0,n,t);const{providerUserInfo:i}=await async function(e,t){return Ot(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),r=ci(i||[]);return n.providerData=n.providerData.filter((e=>r.has(e.providerId))),r.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function hi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=await Yt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return si._forOperation(e,"link",i)}async function di(e,t,n){await Jt(t);const i=!1===e?"provider-already-linked":"no-such-provider";_t(ci(t.providerData).has(n)===e,t.auth,i)}async function fi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:i}=e;if(Se(i.app))return Promise.reject(vt(i));const r="reauthenticate";try{const s=await Yt(e,li(i,r,t,e),n);_t(s.idToken,i,"internal-error");const o=Gt(s.idToken);_t(o,i,"internal-error");const{sub:a}=o;return _t(e.uid===a,i,"user-mismatch"),si._forOperation(e,r,s)}catch(s){throw(null===s||void 0===s?void 0:s.code)==="auth/".concat("user-not-found")&&gt(i,"user-mismatch"),s}}async function pi(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Se(e.app))return Promise.reject(vt(e));const i="signIn",r=await li(e,i,t),s=await si._fromIdTokenResponse(e,i,r);return n||await e._updateCurrentUser(s.user),s}async function gi(e,t){return pi(Sn(e),t)}async function mi(e,t){const n=M(e);return await di(!1,n,t.providerId),hi(n,t)}async function yi(e,t){return fi(M(e),t)}async function vi(e,t){if(Se(e.app))return Promise.reject(vt(e));const n=Sn(e),i=await async function(e,t){return Rt(e,"POST","/v1/accounts:signInWithCustomToken",Nt(e,t))}(n,{token:t,returnSecureToken:!0}),r=await si._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}class bi{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?wi._fromServerResponse(e,t):"totpInfo"in t?_i._fromServerResponse(e,t):gt(e,"internal-error")}}class wi extends bi{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new wi(t)}}class _i extends bi{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new _i(t)}}function xi(e,t,n){var i;_t((null===(i=n.url)||void 0===i?void 0:i.length)>0,e,"invalid-continue-uri"),_t("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_t(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(_t(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function ki(e){const t=Sn(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Si(e,t){await async function(e,t){return Ot(e,"POST","/v1/accounts:update",Nt(e,t))}(M(e),{oobCode:t})}async function Ii(e,t){const n=M(e),i=await Ln(n,{oobCode:t}),r=i.requestType;switch(_t(r,n,"internal-error"),r){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_t(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_t(i.mfaInfo,n,"internal-error");default:_t(i.email,n,"internal-error")}let s=null;return i.mfaInfo&&(s=bi._fromServerResponse(Sn(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:s},operation:r}}async function Ei(e,t){const n={identifier:t,continueUri:It()?St():"http://localhost"},{signinMethods:i}=await async function(e,t){return Ot(e,"POST","/v1/accounts:createAuthUri",Nt(e,t))}(M(e),n);return i||[]}async function Ti(e,t){const n=M(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&xi(n.auth,i,t);const{email:r}=await async function(e,t){return zn(e,t)}(n.auth,i);r!==e.email&&await e.reload()}async function Ci(e,t,n){const i=M(e),r={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&xi(i.auth,r,n);const{email:s}=await async function(e,t){return zn(e,t)}(i.auth,r);s!==e.email&&await e.reload()}async function Ai(e,t){let{displayName:n,photoURL:i}=t;if(void 0===n&&void 0===i)return;const r=M(e),s={idToken:await r.getIdToken(),displayName:n,photoUrl:i,returnSecureToken:!0},o=await Yt(r,async function(e,t){return Ot(e,"POST","/v1/accounts:update",t)}(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find((e=>{let{providerId:t}=e;return"password"===t}));a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}async function Pi(e,t,n){const{auth:i}=e,r={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(r.email=t),n&&(r.password=n);const s=await Yt(e,async function(e,t){return Ot(e,"POST","/v1/accounts:update",t)}(i,r));await e._updateTokensIfNecessary(s,!0)}class Di{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.isNewUser=e,this.providerId=t,this.profile=n}}class Ni extends Di{constructor(e,t,n,i){super(e,t,n),this.username=i}}class Oi extends Di{constructor(e,t){super(e,"facebook.com",t)}}class Mi extends Ni{constructor(e,t){super(e,"github.com",t,"string"===typeof(null===t||void 0===t?void 0:t.login)?null===t||void 0===t?void 0:t.login:null)}}class Ri extends Di{constructor(e,t){super(e,"google.com",t)}}class Li extends Ni{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Fi(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:i}=e,r=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!i&&(null===e||void 0===e?void 0:e.idToken)){const i=null===(n=null===(t=Gt(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(i)return new Di(s,"anonymous"!==i&&"custom"!==i?i:null)}if(!i)return null;switch(i){case"facebook.com":return new Oi(s,r);case"github.com":return new Mi(s,r);case"google.com":return new Ri(s,r);case"twitter.com":return new Li(s,r,e.screenName||null);case"custom":case"anonymous":return new Di(s,null);default:return new Di(s,i,r)}}(n)}class Vi{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new Vi("enroll",e,t)}static _fromMfaPendingCredential(e){return new Vi("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null===e||void 0===e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Vi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Vi._fromIdtoken(e.multiFactorSession.idToken)}return null}}class zi{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=Sn(e),i=t.customData._serverResponse,r=(i.mfaInfo||[]).map((e=>bi._fromServerResponse(n,e)));_t(i.mfaPendingCredential,n,"internal-error");const s=Vi._fromMfaPendingCredential(i.mfaPendingCredential);return new zi(s,r,(async e=>{const r=await e._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=await si._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return _t(t.user,n,"internal-error"),si._forOperation(t.user,t.operationType,o);default:gt(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class Ui{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>bi._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new Ui(e)}async getSession(){return Vi._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,i=await this.getSession(),r=await Yt(this.user,n._process(this.user.auth,i,t));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(e){const t="string"===typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Yt(this.user,function(e,t){return Ot(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Nt(e,t))}(this.user.auth,{idToken:n,mfaEnrollmentId:t}));this.enrolledFactors=this.enrolledFactors.filter((e=>{let{uid:n}=e;return n!==t})),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(i){throw i}}}const ji=new WeakMap;const Bi="__sak";class qi{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Bi,"1"),this.storage.removeItem(Bi),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Wi extends qi{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=p();return dn(e)||vn(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=bn(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),i=this.localCache[t];n!==i&&e(t,i,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},r=this.storage.getItem(n);b()&&10===document.documentMode&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wi.type="LOCAL";const Hi=Wi;class Ki extends qi{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Ki.type="SESSION";const Gi=Ki;class Qi{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new Qi(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:i,data:r}=t.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async e=>e(t.origin,r))),a=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Yi(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let i=0;i<t;i++)n+=Math.floor(10*Math.random());return e+n}Qi.receivers=[];class Xi{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const l=Yi("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(t.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"))}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}function $i(){return window}function Ji(){return"undefined"!==typeof $i().WorkerGlobalScope&&"function"===typeof $i().importScripts}const Zi="firebaseLocalStorageDb",er="firebaseLocalStorage",tr="fbase_key";class nr{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ir(e,t){return e.transaction([er],t?"readwrite":"readonly").objectStore(er)}function rr(){const e=indexedDB.open(Zi,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(er,{keyPath:tr})}catch(i){n(i)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(er)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Zi);return new nr(e).toPromise()}(),t(await rr()))}))}))}async function sr(e,t,n){const i=ir(e,!0).put({[tr]:t,value:n});return new nr(i).toPromise()}function or(e,t){const n=ir(e,!0).delete(t);return new nr(n).toPromise()}class ar{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await rr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ji()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Qi._getInstance(Ji()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Xi(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rr();return await sr(e,Bi,"1"),await or(e,Bi),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>sr(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ir(e,!1).get(t),i=await new nr(n).toPromise();return void 0===i?null:i.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>or(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ir(e,!1).getAll();return new nr(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:i,value:r}of e)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),t.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),t.push(i));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const i of Array.from(n))i(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ar.type="LOCAL";const lr=ar;const cr=1e12;class ur{constructor(e){this.auth=e,this.counter=cr,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new hr(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||cr;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||cr;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||cr;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class hr{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"===typeof e?document.getElementById(e):e;_t(i,"argument-error",{appName:t}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<e;i++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const dr=Cn("rcb"),fr=new Tt(3e4,6e4);class pr{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=$i().grecaptcha)||void 0===e?void 0:e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return _t(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Ut($i().grecaptcha)?Promise.resolve($i().grecaptcha):new Promise(((n,i)=>{const r=$i().setTimeout((()=>{i(mt(e,"network-request-failed"))}),fr.get());$i()[dr]=()=>{$i().clearTimeout(r),delete $i()[dr];const s=$i().grecaptcha;if(!s||!Ut(s))return void i(mt(e,"internal-error"));const o=s.render;s.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(s)};Tn("".concat(En.recaptchaV2Script,"?").concat(C({onload:dr,render:"explicit",hl:t}))).catch((()=>{clearTimeout(r),i(mt(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=$i().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class gr{async load(e){return new ur(e)}clearedOneInstance(){}}const mr="recaptcha",yr={theme:"light",type:"image"};class vr{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},yr);this.parameters=n,this.type=mr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Sn(e),this.isInvisible="invisible"===this.parameters.size,_t("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"===typeof t?document.getElementById(t):t;_t(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new gr:new pr,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const i=e=>{e&&(this.tokenChangeListeners.delete(i),n(e))};this.tokenChangeListeners.add(i),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){_t(!this.parameters.sitekey,this.auth,"argument-error"),_t(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_t("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"===typeof e)e(t);else if("string"===typeof e){const n=$i()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){_t(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){_t(It()&&!Ji(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Ot(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);_t(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return _t(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class br{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Kn._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function wr(e,t,n){var i;const r=await n.verify();try{let s;if(_t("string"===typeof r,e,"argument-error"),_t(n.type===mr,e,"argument-error"),s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){_t("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Ot(e,"POST","/v2/accounts/mfaEnrollment:start",Nt(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{_t("signin"===t.type,e,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;_t(n,e,"missing-multi-factor-info");const o=await function(e,t){return Ot(e,"POST","/v2/accounts/mfaSignIn:start",Nt(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Ot(e,"POST","/v1/accounts:sendVerificationCode",Nt(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:r});return t}}finally{n._reset()}}class _r{constructor(e){this.providerId=_r.PROVIDER_ID,this.auth=Sn(e)}verifyPhoneNumber(e,t){return wr(this.auth,e,M(t))}static credential(e,t){return Kn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return _r.credentialFromTaggedObject(t)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:i}=t;return n&&i?Kn._fromTokenResponse(n,i):null}}function xr(e,t){return t?sn(t):(_t(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}_r.PROVIDER_ID="phone",_r.PHONE_SIGN_IN_METHOD="phone";class kr extends Rn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Sr(e){return pi(e.auth,new kr(e),e.bypassAuthState)}function Ir(e){const{auth:t,user:n}=e;return _t(n,t,"internal-error"),fi(n,new kr(e),e.bypassAuthState)}async function Er(e){const{auth:t,user:n}=e;return _t(n,t,"internal-error"),hi(n,new kr(e),e.bypassAuthState)}class Tr{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sr;case"linkViaPopup":case"linkViaRedirect":return Er;case"reauthViaPopup":case"reauthViaRedirect":return Ir;default:gt(this.auth,"internal-error")}}resolve(e){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Cr=new Tt(2e3,1e4);class Ar extends Tr{constructor(e,t,n,i,r){super(e,t,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Ar.currentPopupAction&&Ar.currentPopupAction.cancel(),Ar.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _t(e,this.auth,"internal-error"),e}async onExecution(){kt(1===this.filter.length,"Popup operations only handle one event");const e=Yi();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(mt(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ar.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(mt(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,Cr.get())};e()}}Ar.currentPopupAction=null;const Pr="pendingRedirect",Dr=new Map;class Nr extends Tr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Dr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Lr(t),i=Rr(e);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Dr.set(this.auth._key(),e)}return this.bypassAuthState||Dr.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Or(e,t){return Rr(e)._set(Lr(t),"true")}function Mr(e,t){Dr.set(e._key(),t)}function Rr(e){return sn(e._redirectPersistence)}function Lr(e){return ln(Pr,e.config.apiKey,e.name)}function Fr(e,t,n){return async function(e,t,n){if(Se(e.app))return Promise.reject(vt(e));const i=Sn(e);bt(e,t,Yn),await i._initializationPromise;const r=xr(i,n);return await Or(r,i),r._openRedirect(i,t,"signInViaRedirect")}(e,t,n)}function Vr(e,t,n){return async function(e,t,n){const i=M(e);if(bt(i.auth,t,Yn),Se(i.auth.app))return Promise.reject(vt(i.auth));await i.auth._initializationPromise;const r=xr(i.auth,n);await Or(r,i.auth);const s=await jr(i);return r._openRedirect(i.auth,t,"reauthViaRedirect",s)}(e,t,n)}function zr(e,t,n){return async function(e,t,n){const i=M(e);bt(i.auth,t,Yn),await i.auth._initializationPromise;const r=xr(i.auth,n);await di(!1,i,t.providerId),await Or(r,i.auth);const s=await jr(i);return r._openRedirect(i.auth,t,"linkViaRedirect",s)}(e,t,n)}async function Ur(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Se(e.app))return Promise.reject(vt(e));const i=Sn(e),r=xr(i,t),s=new Nr(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,t)),o}async function jr(e){const t=Yi("".concat(e.uid,":::"));return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class Br{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wr(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Wr(e)){const i=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(mt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qr(e))}saveEventToCache(e){this.cachedEventUids.add(qr(e)),this.lastProcessedEventTime=Date.now()}}function qr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function Wr(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}async function Hr(e){return Ot(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}const Kr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Gr=/^https?/;function Qr(e){const t=St(),{protocol:n,hostname:i}=new URL(t);if(e.startsWith("chrome-extension://")){const r=new URL(e);return""===r.hostname&&""===i?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!Gr.test(n))return!1;if(Kr.test(e))return i===e;const r=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}const Yr=new Tt(3e4,6e4);function Xr(){const e=$i().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function $r(e){return new Promise(((t,n)=>{var i,r,s;function o(){Xr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Xr(),n(mt(e,"network-request-failed"))},timeout:Yr.get()})}if(null===(r=null===(i=$i().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=$i().gapi)||void 0===s?void 0:s.load)){const t=Cn("iframefcb");return $i()[t]=()=>{gapi.load?o():n(mt(e,"network-request-failed"))},Tn("".concat(En.gapiScript,"?onload=").concat(t)).catch((e=>n(e)))}o()}})).catch((e=>{throw Jr=null,e}))}let Jr=null;const Zr=new Tt(5e3,15e3),es="__/auth/iframe",ts="emulator/auth/iframe",ns={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},is=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rs(e){const t=e.config;_t(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ct(t,ts):"https://".concat(e.config.authDomain,"/").concat(es),i={apiKey:t.apiKey,appName:e.name,v:Ae},r=is.get(e.config.apiHost);r&&(i.eid=r);const s=e._getFrameworks();return s.length&&(i.fw=s.join(",")),"".concat(n,"?").concat(C(i).slice(1))}async function ss(e){const t=await function(e){return Jr=Jr||$r(e),Jr}(e),n=$i().gapi;return _t(n,e,"internal-error"),t.open({where:document.body,url:rs(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ns,dontclear:!0},(t=>new Promise((async(n,i)=>{await t.restyle({setHideOnLeave:!1});const r=mt(e,"network-request-failed"),s=$i().setTimeout((()=>{i(r)}),Zr.get());function o(){$i().clearTimeout(s),n(t)}t.ping(o).then(o,(()=>{i(r)}))}))))}const os={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class as{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function ls(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},os),{width:i.toString(),height:r.toString(),top:s,left:o}),c=p().toLowerCase();n&&(a=fn(c)?"_blank":n),hn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce(((e,t)=>{let[n,i]=t;return"".concat(e).concat(n,"=").concat(i,",")}),"");if(function(){var e;return vn(arguments.length>0&&void 0!==arguments[0]?arguments[0]:p())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}(t||"",a),new as(null);const h=window.open(t||"",a,u);_t(h,e,"popup-blocked");try{h.focus()}catch(d){}return new as(h)}const cs="__/auth/handler",us="emulator/auth/handler",hs=encodeURIComponent("fac");async function ds(e,t,n,i,r,s){_t(e.config.authDomain,e,"auth-domain-config-required"),_t(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:i,v:Ae,eventId:r};if(t instanceof Yn){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))o[e]=t}if(t instanceof Xn){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?"#".concat(hs,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(cs);return Ct(t,us)}(e),"?").concat(C(a).slice(1)).concat(c)}const fs="webStorageSupport";const ps=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Gi,this._completeRedirectFn=Ur,this._overrideRedirectResult=Mr}async _openPopup(e,t,n,i){var r;kt(null===(r=this.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");return ls(e,await ds(e,t,n,St(),i),Yi())}async _openRedirect(e,t,n,i){await this._originValidation(e);return function(e){$i().location.href=e}(await ds(e,t,n,St(),i)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(kt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await ss(e),n=new Br(e);return t.register("authEvent",(t=>{_t(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(fs,{type:fs},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[fs];void 0!==r&&t(!!r),gt(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Hr(e);for(const i of t)try{if(Qr(i))return}catch(n){}gt(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return bn()||dn()||vn()}};class gs{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return xt("unexpected MultiFactorSessionType")}}}class ms extends gs{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ms(e)}_finalizeEnroll(e,t,n){return function(e,t){return Ot(e,"POST","/v2/accounts/mfaEnrollment:finalize",Nt(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return Ot(e,"POST","/v2/accounts/mfaSignIn:finalize",Nt(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class ys{constructor(){}static assertion(e){return ms._fromCredential(e)}}ys.FACTOR_ID="phone";var vs="@firebase/auth",bs="1.7.0";class ws{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_t(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(e=>{var t;null===(t=h())||void 0===t||t["_".concat(e)]})("authIdTokenMaxAge");var _s;function xs(){return window}!function(e){En=e}({loadJS:e=>new Promise(((t,n)=>{const i=document.createElement("script");i.setAttribute("src",e),i.onload=t,i.onerror=e=>{const t=mt("internal-error");t.customData=e,n(t)},i.type="text/javascript",i.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(i)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),_s="Browser",we(new R("auth",((e,t)=>{let{options:n}=t;const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;_t(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:_s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wn(_s)},c=new kn(i,r,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],i=(Array.isArray(n)?n:[n]).map(sn);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(i,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),we(new R("auth-internal",(e=>(e=>new ws(e))(Sn(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),Re(vs,bs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(_s)),Re(vs,bs,"esm2017");async function ks(e,t,n){var i;const{BuildInfo:r}=xs();kt(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(kt(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),o={};return vn()?o.ibi=r.packageName:gn()?o.apn=r.packageName:gt(e,"operation-not-supported-in-this-environment"),r.displayName&&(o.appDisplayName=r.displayName),o.sessionId=s,ds(e,n,t.type,void 0,null!==(i=t.eventId)&&void 0!==i?i:void 0,o)}function Ss(e){const{cordova:t}=xs();return new Promise((n=>{t.plugins.browsertab.isAvailable((i=>{let r=null;i?t.plugins.browsertab.openUrl(e):r=t.InAppBrowser.open(e,function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(r)}))}))}const Is=20;class Es extends Br{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function Ts(e){const t=await Ps()._get(Ds(e));return t&&await Ps()._remove(Ds(e)),t}function Cs(e,t){var n,i;const r=function(e){const t=Ns(e),n=t.link?decodeURIComponent(t.link):void 0,i=Ns(n).link,r=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Ns(r).link||r||i||n||e}(t);if(r.includes("/__/auth/callback")){const t=Ns(r),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(i=null===(n=null===s||void 0===s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===i?void 0:i[1],a=o?mt(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:r,postBody:null}}return null}function As(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Is;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function Ps(){return sn(Hi)}function Ds(e){return ln("authEvent",e.config.apiKey,e.name)}function Ns(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return A(n.join("?"))}const Os=class{constructor(){this._redirectPersistence=Gi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ur,this._overrideRedirectResult=Mr}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Es(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){gt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,i){!function(e){var t,n,i,r,s,o,a,l,c,u;const h=xs();_t("function"===typeof(null===(t=null===h||void 0===h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),_t("undefined"!==typeof(null===(n=null===h||void 0===h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),_t("function"===typeof(null===(s=null===(r=null===(i=null===h||void 0===h?void 0:h.cordova)||void 0===i?void 0:i.plugins)||void 0===r?void 0:r.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_t("function"===typeof(null===(l=null===(a=null===(o=null===h||void 0===h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),_t("function"===typeof(null===(u=null===(c=null===h||void 0===h?void 0:h.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===u?void 0:u.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=await this._initialize(e);await r.initialized(),r.resetRedirect(),Dr.clear(),await this._originValidation(e);const s=function(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:As(),postBody:null,tenantId:e.tenantId,error:mt(e,"no-auth-event")}}(e,n,i);await function(e,t){return Ps()._set(Ds(e),t)}(e,s);const o=await ks(e,s,t);return async function(e,t,n){const{cordova:i}=xs();let r=()=>{};try{await new Promise(((s,o)=>{let a=null;function l(){var e;s();const t=null===(e=i.plugins.browsertab)||void 0===e?void 0:e.close;"function"===typeof t&&t(),"function"===typeof(null===n||void 0===n?void 0:n.close)&&n.close()}function c(){a||(a=window.setTimeout((()=>{o(mt(e,"redirect-cancelled-by-user"))}),2e3))}function u(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}t.addPassiveListener(l),document.addEventListener("resume",c,!1),gn()&&document.addEventListener("visibilitychange",u,!1),r=()=>{t.removePassiveListener(l),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",u,!1),a&&window.clearTimeout(a)}}))}finally{r()}}(e,r,await Ss(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=xs(),n={};vn()?n.iosBundleId=t.packageName:gn()?n.androidPackageName=t.packageName:gt(e,"operation-not-supported-in-this-environment"),await Hr(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:r}=xs(),s=setTimeout((async()=>{await Ts(e),t.onEvent(Ms())}),500),o=async n=>{clearTimeout(s);const i=await Ts(e);let r=null;i&&(null===n||void 0===n?void 0:n.url)&&(r=Cs(i,n.url)),t.onEvent(r||Ms())};"undefined"!==typeof n&&"function"===typeof n.subscribe&&n.subscribe(null,o);const a=i,l="".concat(r.packageName.toLowerCase(),"://");xs().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&o({url:e}),"function"===typeof a)try{a(e)}catch(t){console.error(t)}}}};function Ms(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mt("no-auth-event")}}function Rs(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function Ls(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return!("file:"!==Rs()&&"ionic:"!==Rs()&&"capacitor:"!==Rs()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function Fs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return b()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p();return/Edge\/\d+/.test(e)}(e)}function Vs(){try{const e=self.localStorage,t=Yi();if(e)return e.setItem(t,"1"),e.removeItem(t),!Fs()||_()}catch(e){return zs()&&_()}return!1}function zs(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function Us(){return("http:"===Rs()||"https:"===Rs()||y()||Ls())&&!(v()||g())&&Vs()&&!zs()}function js(){return Ls()&&"undefined"!==typeof document}const Bs={LOCAL:"local",NONE:"none",SESSION:"session"},qs=_t,Ws="persistence";async function Hs(e){await e._initializationPromise;const t=Ks(),n=ln(Ws,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function Ks(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}const Gs=_t;class Qs{constructor(){this.browserResolver=sn(ps),this.cordovaResolver=sn(Os),this.underlyingResolver=null,this._redirectPersistence=Gi,this._completeRedirectFn=Ur,this._overrideRedirectResult=Mr}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,i)}async _openRedirect(e,t,n,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,i)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return js()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Gs(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!js()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function Ys(e){return e.unwrap()}function Xs(e,t){var n;const i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code)){t.resolver=new eo(e,function(e,t){var n;const i=M(e),r=t;return _t(t.customData.operationType,i,"argument-error"),_t(null===(n=r.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),zi._fromError(i,r)}(e,t))}else if(i){const e=$s(t),n=t;e&&(n.credential=e,n.tenantId=i.tenantId||void 0,n.email=i.email||void 0,n.phoneNumber=i.phoneNumber||void 0)}}function $s(e){const{_tokenResponse:t}=e instanceof x?e.customData:e;if(!t)return null;if(!(e instanceof x)&&"temporaryProof"in t&&"phoneNumber"in t)return _r.credentialFromResult(e);const n=t.providerId;if(!n||n===nt.PASSWORD)return null;let i;switch(n){case nt.GOOGLE:i=Zn;break;case nt.FACEBOOK:i=Jn;break;case nt.GITHUB:i=ei;break;case nt.TWITTER:i=ii;break;default:const{oauthIdToken:e,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:o,nonce:a}=t;return r||s||e||o?o?n.startsWith("saml.")?ti._create(n,o):Wn._fromParams({providerId:n,signInMethod:n,pendingToken:o,idToken:e,accessToken:r}):new $n(n).credential({idToken:e,accessToken:r,rawNonce:a}):null}return e instanceof x?i.credentialFromError(e):i.credentialFromResult(e)}function Js(e,t){return t.catch((t=>{throw t instanceof x&&Xs(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(i=e,$s(i)),additionalUserInfo:Fi(e),user:to.getOrCreate(n)};var i}))}async function Zs(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>Js(e,n.confirm(t))}}class eo{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return Js(Ys(this.auth),this.resolver.resolveSignIn(e))}}class to{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=M(e);return ji.has(t)||ji.set(t,Ui._fromUser(t)),ji.get(t)}(e)}static getOrCreate(e){return to.USER_MAP.has(e)||to.USER_MAP.set(e,new to(e)),to.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return Js(this.auth,mi(this._delegate,e))}async linkWithPhoneNumber(e,t){return Zs(this.auth,async function(e,t,n){const i=M(e);await di(!1,i,"phone");const r=await wr(i.auth,t,M(n));return new br(r,(e=>mi(i,e)))}(this._delegate,e,t))}async linkWithPopup(e){return Js(this.auth,async function(e,t,n){const i=M(e);bt(i.auth,t,Yn);const r=xr(i.auth,n);return new Ar(i.auth,"linkViaPopup",t,r,i).executeNotNull()}(this._delegate,e,Qs))}async linkWithRedirect(e){return await Hs(Sn(this.auth)),zr(this._delegate,e,Qs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return Js(this.auth,yi(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return Zs(this.auth,async function(e,t,n){const i=M(e);if(Se(i.auth.app))return Promise.reject(vt(i.auth));const r=await wr(i.auth,t,M(n));return new br(r,(e=>yi(i,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return Js(this.auth,async function(e,t,n){const i=M(e);if(Se(i.auth.app))return Promise.reject(mt(i.auth,"operation-not-supported-in-this-environment"));bt(i.auth,t,Yn);const r=xr(i.auth,n);return new Ar(i.auth,"reauthViaPopup",t,r,i).executeNotNull()}(this._delegate,e,Qs))}async reauthenticateWithRedirect(e){return await Hs(Sn(this.auth)),Vr(this._delegate,e,Qs)}sendEmailVerification(e){return Ti(this._delegate,e)}async unlink(e){return await ui(this._delegate,e),this}updateEmail(e){return function(e,t){const n=M(e);return Se(n.auth.app)?Promise.reject(vt(n.auth)):Pi(n,t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return Pi(M(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){const n=M(e);if(Se(n.auth.app))return Promise.reject(vt(n.auth));await hi(n,t)}(this._delegate,e)}updateProfile(e){return Ai(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return Ci(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}to.USER_MAP=new WeakMap;const no=_t;class io{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;no(n,"invalid-api-key",{appName:e.name}),no(n,"invalid-api-key",{appName:e.name});const i="undefined"!==typeof window?Qs:void 0;this._delegate=t.initialize({options:{persistence:so(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(ut),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?to.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){Nn(this._delegate,e,t)}applyActionCode(e){return Si(this._delegate,e)}checkActionCode(e){return Ii(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await Ln(M(e),{oobCode:t,newPassword:n}).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ki(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return Js(this._delegate,async function(e,t,n){if(Se(e.app))return Promise.reject(vt(e));const i=Sn(e),r=Dn(i,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ri),s=await r.catch((t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ki(e),t})),o=await si._fromIdTokenResponse(i,"signIn",s);return await i._updateCurrentUser(o.user),o}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return Ei(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=Gn.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){no(Us(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await Sn(e)._initializationPromise,Ur(e,t,!1)}(this._delegate,Qs);return e?Js(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){Sn(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:i,error:r,complete:s}=ro(e,t,n);return this._delegate.onAuthStateChanged(i,r,s)}onIdTokenChanged(e,t,n){const{next:i,error:r,complete:s}=ro(e,t,n);return this._delegate.onIdTokenChanged(i,r,s)}sendSignInLinkToEmail(e,t){return async function(e,t,n){const i=Sn(e),r={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){_t(t.handleCodeInApp,i,"argument-error"),t&&xi(i,e,t)}(r,n),await Dn(i,r,"getOobCode",jn)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const i=Sn(e),r={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&xi(i,r,n),await Dn(i,r,"getOobCode",Un)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){qs(Object.values(Bs).includes(t),e,"invalid-persistence-type"),v()?qs(t!==Bs.SESSION,e,"unsupported-persistence-type"):g()?qs(t===Bs.NONE,e,"unsupported-persistence-type"):zs()?qs(t===Bs.NONE||t===Bs.LOCAL&&_(),e,"unsupported-persistence-type"):qs(t===Bs.NONE||Vs(),e,"unsupported-persistence-type")}(this._delegate,e),e){case Bs.SESSION:t=Gi;break;case Bs.LOCAL:t=await sn(lr)._isAvailable()?lr:Hi;break;case Bs.NONE:t=an;break;default:return gt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return Js(this._delegate,async function(e){var t;if(Se(e.app))return Promise.reject(vt(e));const n=Sn(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new si({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await ri(n,{returnSecureToken:!0}),r=await si._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}(this._delegate))}signInWithCredential(e){return Js(this._delegate,gi(this._delegate,e))}signInWithCustomToken(e){return Js(this._delegate,vi(this._delegate,e))}signInWithEmailAndPassword(e,t){return Js(this._delegate,function(e,t,n){return Se(e.app)?Promise.reject(vt(e)):gi(M(e),Qn.credential(t,n)).catch((async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&ki(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return Js(this._delegate,async function(e,t,n){if(Se(e.app))return Promise.reject(vt(e));const i=M(e),r=Qn.credentialWithLink(t,n||St());return _t(r._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),gi(i,r)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return Zs(this._delegate,async function(e,t,n){if(Se(e.app))return Promise.reject(vt(e));const i=Sn(e),r=await wr(i,t,M(n));return new br(r,(e=>gi(i,e)))}(this._delegate,e,t))}async signInWithPopup(e){return no(Us(),this._delegate,"operation-not-supported-in-this-environment"),Js(this._delegate,async function(e,t,n){if(Se(e.app))return Promise.reject(mt(e,"operation-not-supported-in-this-environment"));const i=Sn(e);bt(e,t,Yn);const r=xr(i,n);return new Ar(i,"signInViaPopup",t,r).executeNotNull()}(this._delegate,e,Qs))}async signInWithRedirect(e){return no(Us(),this._delegate,"operation-not-supported-in-this-environment"),await Hs(this._delegate),Fr(this._delegate,e,Qs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await Ii(M(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function ro(e,t,n){let i=e;"function"!==typeof e&&({next:i,error:t,complete:n}=e);const r=i;return{next:e=>r(e&&to.getOrCreate(e)),error:t,complete:n}}function so(e,t){const n=function(e,t){const n=Ks();if(!n)return[];const i=ln(Ws,e,t);switch(n.getItem(i)){case Bs.NONE:return[an];case Bs.LOCAL:return[lr,Gi];case Bs.SESSION:return[Gi];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(lr)||n.push(lr),"undefined"!==typeof window)for(const i of[Hi,Gi])n.includes(i)||n.push(i);return n.includes(an)||n.push(an),n}io.Persistence=Bs;class oo{constructor(){this.providerId="phone",this._delegate=new _r(Ys(et.auth()))}static credential(e,t){return _r.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}oo.PHONE_SIGN_IN_METHOD=_r.PHONE_SIGN_IN_METHOD,oo.PROVIDER_ID=_r.PROVIDER_ID;const ao=_t;class lo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:et.app();var i;ao(null===(i=n.options)||void 0===i?void 0:i.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new vr(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}var co;(co=et).INTERNAL.registerComponent(new R("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new io(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:it,PASSWORD_RESET:rt,RECOVER_EMAIL:st,REVERT_SECOND_FACTOR_ADDITION:ot,VERIFY_AND_CHANGE_EMAIL:at,VERIFY_EMAIL:lt}},EmailAuthProvider:Qn,FacebookAuthProvider:Jn,GithubAuthProvider:ei,GoogleAuthProvider:Zn,OAuthProvider:$n,SAMLAuthProvider:ni,PhoneAuthProvider:oo,PhoneMultiFactorGenerator:ys,RecaptchaVerifier:lo,TwitterAuthProvider:ii,Auth:io,AuthCredential:Rn,Error:x}).setInstantiationMode("LAZY").setMultipleInstances(!1)),co.registerVersion("@firebase/auth-compat","0.5.5");var uo,ho="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},fo={},po=po||{},go=ho||self;function mo(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function yo(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var vo="closure_uid_"+(1e9*Math.random()>>>0),bo=0;function wo(e,t,n){return e.call.apply(e.bind,arguments)}function _o(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function xo(e,t,n){return(xo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wo:_o).apply(null,arguments)}function ko(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function So(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function Io(){this.s=this.s,this.o=this.o}Io.prototype.s=!1,Io.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,vo)&&e[vo]||(e[vo]=++bo))},Io.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Eo=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function To(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function Co(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(mo(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function Ao(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Ao.prototype.h=function(){this.defaultPrevented=!0};var Po=function(){if(!go.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};go.addEventListener("test",e,t),go.removeEventListener("test",e,t)}catch(n){}return e}();function Do(e){return/^[\s\xa0]*$/.test(e)}function No(){var e=go.navigator;return e&&(e=e.userAgent)?e:""}function Oo(e){return-1!=No().indexOf(e)}function Mo(e){return Mo[" "](e),e}Mo[" "]=function(){};var Ro,Lo,Fo=Oo("Opera"),Vo=Oo("Trident")||Oo("MSIE"),zo=Oo("Edge"),Uo=zo||Vo,jo=Oo("Gecko")&&!(-1!=No().toLowerCase().indexOf("webkit")&&!Oo("Edge"))&&!(Oo("Trident")||Oo("MSIE"))&&!Oo("Edge"),Bo=-1!=No().toLowerCase().indexOf("webkit")&&!Oo("Edge");function qo(){var e=go.document;return e?e.documentMode:void 0}e:{var Wo="",Ho=function(){var e=No();return jo?/rv:([^\);]+)(\)|;)/.exec(e):zo?/Edge\/([\d\.]+)/.exec(e):Vo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Bo?/WebKit\/(\S+)/.exec(e):Fo?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Ho&&(Wo=Ho?Ho[1]:""),Vo){var Ko=qo();if(null!=Ko&&Ko>parseFloat(Wo)){Ro=String(Ko);break e}}Ro=Wo}if(go.document&&Vo){var Go=qo();Lo=Go||(parseInt(Ro,10)||void 0)}else Lo=void 0;var Qo=Lo;function Yo(e,t){if(Ao.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(jo){e:{try{Mo(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Xo[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Yo.$.h.call(this)}}So(Yo,Ao);var Xo={2:"touch",3:"pen",4:"mouse"};Yo.prototype.h=function(){Yo.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var $o="closure_listenable_"+(1e6*Math.random()|0),Jo=0;function Zo(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.la=r,this.key=++Jo,this.fa=this.ia=!1}function ea(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function ta(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function na(e){const t={};for(const n in e)t[n]=e[n];return t}const ia="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ra(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<ia.length;t++)n=ia[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function sa(e){this.src=e,this.g={},this.h=0}function oa(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Eo(r,t);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(ea(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function aa(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==i)return r}return-1}sa.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=aa(e,t,i,r);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new Zo(t,this.src,s,!!i,r)).ia=n,e.push(t)),t};var la="closure_lm_"+(1e6*Math.random()|0),ca={};function ua(e,t,n,i,r){if(i&&i.once)return da(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ua(e,t[s],n,i,r);return null}return n=ba(n),e&&e[$o]?e.O(t,n,yo(i)?!!i.capture:!!i,r):ha(e,t,n,!1,i,r)}function ha(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=yo(r)?!!r.capture:!!r,a=ya(e);if(a||(e[la]=a=new sa(e)),(n=a.add(t,n,i,o,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ma;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)Po||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(ga(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function da(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)da(e,t[s],n,i,r);return null}return n=ba(n),e&&e[$o]?e.P(t,n,yo(i)?!!i.capture:!!i,r):ha(e,t,n,!0,i,r)}function fa(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)fa(e,t[s],n,i,r);else i=yo(i)?!!i.capture:!!i,n=ba(n),e&&e[$o]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=aa(s=e.g[t],n,i,r))&&(ea(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=ya(e))&&(t=e.g[t.toString()],e=-1,t&&(e=aa(t,n,i,r)),(n=-1<e?t[e]:null)&&pa(n))}function pa(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[$o])oa(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(ga(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=ya(t))?(oa(n,e),0==n.h&&(n.src=null,t[la]=null)):ea(e)}}}function ga(e){return e in ca?ca[e]:ca[e]="on"+e}function ma(e,t){if(e.fa)e=!0;else{t=new Yo(t,this);var n=e.listener,i=e.la||e.src;e.ia&&pa(e),e=n.call(i,t)}return e}function ya(e){return(e=e[la])instanceof sa?e:null}var va="__closure_events_fn_"+(1e9*Math.random()>>>0);function ba(e){return"function"===typeof e?e:(e[va]||(e[va]=function(t){return e.handleEvent(t)}),e[va])}function wa(){Io.call(this),this.i=new sa(this),this.S=this,this.J=null}function _a(e,t){var n,i=e.J;if(i)for(n=[];i;i=i.J)n.push(i);if(e=e.S,i=t.type||t,"string"===typeof t)t=new Ao(t,e);else if(t instanceof Ao)t.target=t.target||e;else{var r=t;ra(t=new Ao(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];r=xa(o,i,!0,t)&&r}if(r=xa(o=t.g=e,i,!0,t)&&r,r=xa(o,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=xa(o=t.g=n[s],i,!1,t)&&r}function xa(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&oa(e.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}So(wa,Io),wa.prototype[$o]=!0,wa.prototype.removeEventListener=function(e,t,n,i){fa(this,e,t,n,i)},wa.prototype.N=function(){if(wa.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)ea(n[i]);delete t.g[e],t.h--}}this.J=null},wa.prototype.O=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},wa.prototype.P=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};var ka=go.JSON.stringify;function Sa(){var e=Da;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ia=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new Ea),(e=>e.reset()));class Ea{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Ta(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Ca(e){go.setTimeout((()=>{throw e}),0)}let Aa,Pa=!1,Da=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ia.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Na=()=>{const e=go.Promise.resolve(void 0);Aa=()=>{e.then(Oa)}};var Oa=()=>{for(var e;e=Sa();){try{e.h.call(e.g)}catch(n){Ca(n)}var t=Ia;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Pa=!1};function Ma(e,t){wa.call(this),this.h=e||1,this.g=t||go,this.j=xo(this.qb,this),this.l=Date.now()}function Ra(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function La(e,t,n){if("function"===typeof e)n&&(e=xo(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=xo(e.handleEvent,e)}return 2147483647<Number(t)?-1:go.setTimeout(e,t||0)}function Fa(e){e.g=La((()=>{e.g=null,e.i&&(e.i=!1,Fa(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}So(Ma,wa),(uo=Ma.prototype).ga=!1,uo.T=null,uo.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),_a(this,"tick"),this.ga&&(Ra(this),this.start()))}},uo.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},uo.N=function(){Ma.$.N.call(this),Ra(this),delete this.g};class Va extends Io{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Fa(this)}N(){super.N(),this.g&&(go.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function za(e){Io.call(this),this.h=e,this.g={}}So(za,Io);var Ua=[];function ja(e,t,n,i){Array.isArray(n)||(n&&(Ua[0]=n.toString()),n=Ua);for(var r=0;r<n.length;r++){var s=ua(t,n[r],i||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Ba(e){ta(e.g,(function(e,t){this.g.hasOwnProperty(t)&&pa(e)}),e),e.g={}}function qa(){this.g=!0}function Wa(e,t,n,i){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return ka(n)}catch(a){return t}}(e,n)+(i?" "+i:"")}))}za.prototype.N=function(){za.$.N.call(this),Ba(this)},za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},qa.prototype.Ea=function(){this.g=!1},qa.prototype.info=function(){};var Ha={},Ka=null;function Ga(){return Ka=Ka||new wa}function Qa(e){Ao.call(this,Ha.Ta,e)}function Ya(e){const t=Ga();_a(t,new Qa(t))}function Xa(e,t){Ao.call(this,Ha.STAT_EVENT,e),this.stat=t}function $a(e){const t=Ga();_a(t,new Xa(t,e))}function Ja(e,t){Ao.call(this,Ha.Ua,e),this.size=t}function Za(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return go.setTimeout((function(){e()}),t)}Ha.Ta="serverreachability",So(Qa,Ao),Ha.STAT_EVENT="statevent",So(Xa,Ao),Ha.Ua="timingevent",So(Ja,Ao);var el={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},tl={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function nl(){}function il(e){return e.h||(e.h=e.i())}function rl(){}nl.prototype.h=null;var sl,ol={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function al(){Ao.call(this,"d")}function ll(){Ao.call(this,"c")}function cl(){}function ul(e,t,n,i){this.l=e,this.j=t,this.m=n,this.W=i||1,this.U=new za(this),this.P=dl,e=Uo?125:void 0,this.V=new Ma(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new hl}function hl(){this.i=null,this.g="",this.h=!1}So(al,Ao),So(ll,Ao),So(cl,nl),cl.prototype.g=function(){return new XMLHttpRequest},cl.prototype.i=function(){return{}},sl=new cl;var dl=45e3,fl={},pl={};function gl(e,t,n){e.L=1,e.A=Ml(Al(t)),e.u=n,e.S=!0,ml(e,null)}function ml(e,t){e.G=Date.now(),wl(e),e.B=Al(e.A);var n=e.B,i=e.W;Array.isArray(i)||(i=[String(i)]),Gl(n.i,"t",i),e.o=0,n=e.l.J,e.h=new hl,e.g=Qc(e.l,n?t:null,!e.u),0<e.O&&(e.M=new Va(xo(e.Pa,e,e.g),e.O)),ja(e.U,e.g,"readystatechange",e.nb),t=e.I?na(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),Ya(),function(e,t,n,i,r,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function yl(e){return!!e.g&&("GET"==e.v&&2!=e.L&&e.l.Ha)}function vl(e,t,n){let i,r=!0;for(;!e.J&&e.o<n.length;){if(i=bl(e,n),i==pl){4==t&&(e.s=4,$a(14),r=!1),Wa(e.j,e.m,null,"[Incomplete Response]");break}if(i==fl){e.s=4,$a(15),Wa(e.j,e.m,n,"[Invalid Chunk]"),r=!1;break}Wa(e.j,e.m,i,null),Il(e,i)}yl(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,$a(16),r=!1),e.i=e.i&&r,r?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Uc(t),t.M=!0,$a(11))):(Wa(e.j,e.m,n,"[Invalid Chunked Response]"),Sl(e),kl(e))}function bl(e,t){var n=e.o,i=t.indexOf("\n",n);return-1==i?pl:(n=Number(t.substring(n,i)),isNaN(n)?fl:(i+=1)+n>t.length?pl:(t=t.slice(i,i+n),e.o=i+n,t))}function wl(e){e.Y=Date.now()+e.P,_l(e,e.P)}function _l(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=Za(xo(e.lb,e),t)}function xl(e){e.C&&(go.clearTimeout(e.C),e.C=null)}function kl(e){0==e.l.H||e.J||qc(e.l,e)}function Sl(e){xl(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,Ra(e.V),Ba(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Il(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||ec(n.i,e)))if(!e.K&&ec(n.i,e)&&3==n.H){try{var i=n.Ja.g.parse(t)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Bc(n),Nc(n)}zc(n),$a(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=Za(xo(n.ib,n),6e3));if(1>=Zl(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else Hc(n,11)}else if((e.K||n.g==e)&&Bc(n),!Do(t))for(r=n.Ja.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const r=c[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(tc(s,s.h),s.h=null))}if(i.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.Da=e,Ol(i.I,i.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((i=n).wa=Gc(i,i.J?i.pa:null,i.Y),o.K){nc(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(xl(a),wl(a)),i.g=o}else Vc(i);0<n.j.length&&Mc(n)}else"stop"!=c[0]&&"close"!=c[0]||Hc(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Hc(n,7):Dc(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}Ya()}catch(c){}}function El(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(mo(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(mo(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(mo(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,s=0;s<r;s++)t.call(void 0,i[s],n&&n[s],e)}(uo=ul.prototype).setTimeout=function(e){this.P=e},uo.nb=function(e){e=e.target;const t=this.M;t&&3==Ic(e)?t.l():this.Pa(e)},uo.Pa=function(e){try{if(e==this.g)e:{const u=Ic(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||Uo||this.g&&(this.h.h||this.g.ja()||Ec(this.g)))){this.J||4!=u||7==t||Ya(),xl(this);var n=this.g.da();this.ca=n;t:if(yl(this)){var i=Ec(this.g);e="";var r=i.length,s=4==Ic(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Sl(this),kl(this);var o="";break t}this.h.i=new go.TextDecoder}for(t=0;t<r;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:s&&t==r-1});i.length=0,this.h.g+=e,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,i,r,s,o){e.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Do(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.s=3,$a(12),Sl(this),kl(this);break e}Wa(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Il(this,n)}this.S?(vl(this,u,o),Uo&&this.i&&3==u&&(ja(this.U,this.V,"tick",this.mb),this.V.start())):(Wa(this.j,this.m,o,null),Il(this,o)),4==u&&Sl(this),this.i&&!this.J&&(4==u?qc(this.l,this):(this.i=!1,wl(this)))}else(function(e){const t={};e=(e.g&&2<=Ic(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(Do(e[i]))continue;var n=Ta(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,$a(12)):(this.s=0,$a(13)),Sl(this),kl(this)}}}catch(u){}},uo.mb=function(){if(this.g){var e=Ic(this.g),t=this.g.ja();this.o<t.length&&(xl(this),vl(this,e,t),this.i&&4!=e&&wl(this))}},uo.cancel=function(){this.J=!0,Sl(this)},uo.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(Ya(),$a(17)),Sl(this),this.s=2,kl(this)):_l(this,this.Y-e)};var Tl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cl(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Cl){this.h=e.h,Pl(this,e.j),this.s=e.s,this.g=e.g,Dl(this,e.m),this.l=e.l;var t=e.i,n=new ql;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Nl(this,n),this.o=e.o}else e&&(t=String(e).match(Tl))?(this.h=!1,Pl(this,t[1]||"",!0),this.s=Rl(t[2]||""),this.g=Rl(t[3]||"",!0),Dl(this,t[4]),this.l=Rl(t[5]||"",!0),Nl(this,t[6]||"",!0),this.o=Rl(t[7]||"")):(this.h=!1,this.i=new ql(null,this.h))}function Al(e){return new Cl(e)}function Pl(e,t,n){e.j=n?Rl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Dl(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Nl(e,t,n){t instanceof ql?(e.i=t,function(e,t){t&&!e.j&&(Wl(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Hl(this,t),Gl(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Ll(t,jl)),e.i=new ql(t,e.h))}function Ol(e,t,n){e.i.set(t,n)}function Ml(e){return Ol(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Rl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Ll(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Fl),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Fl(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Cl.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Ll(t,Vl,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Ll(t,Vl,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Ll(n,"/"==n.charAt(0)?Ul:zl,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Ll(n,Bl)),e.join("")};var Vl=/[#\/\?@]/g,zl=/[#\?:]/g,Ul=/[#\?]/g,jl=/[#\?@]/g,Bl=/#/g;function ql(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Wl(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Hl(e,t){Wl(e),t=Ql(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Kl(e,t){return Wl(e),t=Ql(e,t),e.g.has(t)}function Gl(e,t,n){Hl(e,t),0<n.length&&(e.i=null,e.g.set(Ql(e,t),To(n)),e.h+=n.length)}function Ql(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(uo=ql.prototype).add=function(e,t){Wl(this),this.i=null,e=Ql(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},uo.forEach=function(e,t){Wl(this),this.g.forEach((function(n,i){n.forEach((function(n){e.call(t,n,i,this)}),this)}),this)},uo.ta=function(){Wl(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},uo.Z=function(e){Wl(this);let t=[];if("string"===typeof e)Kl(this,e)&&(t=t.concat(this.g.get(Ql(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},uo.set=function(e,t){return Wl(this),this.i=null,Kl(this,e=Ql(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},uo.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},uo.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),e.push(r)}}return this.i=e.join("&")};var Yl=class{constructor(e,t){this.g=e,this.map=t}};function Xl(e){this.l=e||$l,go.PerformanceNavigationTiming?e=0<(e=go.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(go.g&&go.g.Ka&&go.g.Ka()&&go.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $l=10;function Jl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Zl(e){return e.h?1:e.g?e.g.size:0}function ec(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function tc(e,t){e.g?e.g.add(t):e.h=t}function nc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function ic(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return To(e.i)}Xl.prototype.cancel=function(){if(this.i=ic(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var rc,sc=class{stringify(e){return go.JSON.stringify(e,void 0)}parse(e){return go.JSON.parse(e,void 0)}};function oc(){this.g=new sc}function ac(e,t,n){const i=n||"";try{El(e,(function(e,n){let r=e;yo(e)&&(r=ka(e)),t.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw t.push(i+"type="+encodeURIComponent("_badmap")),r}}function lc(e,t,n,i,r){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,r(i)}catch(s){}}function cc(e){this.l=e.ec||null,this.j=e.ob||!1}function uc(e,t){wa.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=hc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}So(cc,nl),cc.prototype.g=function(){return new uc(this.l,this.j)},cc.prototype.i=(rc={},function(){return rc}),So(uc,wa);var hc=0;function dc(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function fc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,pc(e)}function pc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(uo=uc.prototype).open=function(e,t){if(this.readyState!=hc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,pc(this)},uo.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||go).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},uo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,fc(this)),this.readyState=hc},uo.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,pc(this)),this.g&&(this.readyState=3,pc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof go.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;dc(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},uo.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?fc(this):pc(this),3==this.readyState&&dc(this)}},uo.Za=function(e){this.g&&(this.response=this.responseText=e,fc(this))},uo.Ya=function(e){this.g&&(this.response=e,fc(this))},uo.ka=function(){this.g&&fc(this)},uo.setRequestHeader=function(e,t){this.v.append(e,t)},uo.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},uo.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(uc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var gc=go.JSON.parse;function mc(e){wa.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=yc,this.L=this.M=!1}So(mc,wa);var yc="",vc=/^https?$/i,bc=["POST","PUT"];function wc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,_c(e),kc(e)}function _c(e){e.F||(e.F=!0,_a(e,"complete"),_a(e,"error"))}function xc(e){if(e.h&&"undefined"!=typeof po&&(!e.C[1]||4!=Ic(e)||2!=e.da()))if(e.v&&4==Ic(e))La(e.La,0,e);else if(_a(e,"readystatechange"),4==Ic(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===a){var r=String(e.I).match(Tl)[1]||null;!r&&go.self&&go.self.location&&(r=go.self.location.protocol.slice(0,-1)),i=!vc.test(r?r.toLowerCase():"")}n=i}if(n)_a(e,"complete"),_a(e,"success");else{e.m=6;try{var s=2<Ic(e)?e.g.statusText:""}catch(o){s=""}e.j=s+" ["+e.da()+"]",_c(e)}}finally{kc(e)}}}function kc(e,t){if(e.g){Sc(e);const i=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||_a(e,"ready");try{i.onreadystatechange=r}catch(n){}}}function Sc(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(go.clearTimeout(e.A),e.A=null)}function Ic(e){return e.g?e.g.readyState:0}function Ec(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case yc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Ou){return null}}function Tc(e){let t="";return ta(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Cc(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=Tc(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ol(e,t,n))}function Ac(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Pc(e){this.Ga=0,this.j=[],this.l=new qa,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Ac("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Ac("baseRetryDelayMs",5e3,e),this.hb=Ac("retryDelaySeedMs",1e4,e),this.eb=Ac("forwardChannelMaxRetries",2,e),this.xa=Ac("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new Xl(e&&e.concurrentRequestLimit),this.Ja=new oc,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Dc(e){if(Oc(e),3==e.H){var t=e.W++,n=Al(e.I);if(Ol(n,"SID",e.K),Ol(n,"RID",t),Ol(n,"TYPE","terminate"),Lc(e,n),(t=new ul(e,e.l,t)).L=2,t.A=Ml(Al(n)),n=!1,go.navigator&&go.navigator.sendBeacon)try{n=go.navigator.sendBeacon(t.A.toString(),"")}catch(zD){}!n&&go.Image&&((new Image).src=t.A,n=!0),n||(t.g=Qc(t.l,null),t.g.ha(t.A)),t.G=Date.now(),wl(t)}Kc(e)}function Nc(e){e.g&&(Uc(e),e.g.cancel(),e.g=null)}function Oc(e){Nc(e),e.u&&(go.clearTimeout(e.u),e.u=null),Bc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&go.clearTimeout(e.m),e.m=null)}function Mc(e){if(!Jl(e.i)&&!e.m){e.m=!0;var t=e.Na;Aa||Na(),Pa||(Aa(),Pa=!0),Da.add(t,e),e.C=0}}function Rc(e,t){var n;n=t?t.m:e.W++;const i=Al(e.I);Ol(i,"SID",e.K),Ol(i,"RID",n),Ol(i,"AID",e.V),Lc(e,i),e.o&&e.s&&Cc(i,e.o,e.s),n=new ul(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Fc(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),tc(e.i,n),gl(n,i,t)}function Lc(e,t){e.na&&ta(e.na,(function(e,n){Ol(t,n,e)})),e.h&&El({},(function(e,n){Ol(t,n,e)}))}function Fc(e,t,n){n=Math.min(e.j.length,n);var i=e.h?xo(e.h.Va,e.h,e):null;e:{var r=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),s=!1;else try{ac(a,e,"req"+n+"_")}catch(Yh){i&&i(a)}}if(s){i=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,i}function Vc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Aa||Na(),Pa||(Aa(),Pa=!0),Da.add(t,e),e.A=0}}function zc(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=Za(xo(e.Ma,e),Wc(e,e.A)),e.A++,!0)}function Uc(e){null!=e.B&&(go.clearTimeout(e.B),e.B=null)}function jc(e){e.g=new ul(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Al(e.wa);Ol(t,"RID","rpc"),Ol(t,"SID",e.K),Ol(t,"AID",e.V),Ol(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Ol(t,"TO",e.qa),Ol(t,"TYPE","xmlhttp"),Lc(e,t),e.o&&e.s&&Cc(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=Ml(Al(t)),n.u=null,n.S=!0,ml(n,e)}function Bc(e){null!=e.v&&(go.clearTimeout(e.v),e.v=null)}function qc(e,t){var n=null;if(e.g==t){Bc(e),Uc(e),e.g=null;var i=2}else{if(!ec(e.i,t))return;n=t.F,nc(e.i,t),i=1}if(0!=e.H)if(t.i)if(1==i){n=t.u?t.u.length:0,t=Date.now()-t.G;var r=e.C;_a(i=Ga(),new Ja(i,n)),Mc(e)}else Vc(e);else if(3==(r=t.s)||0==r&&0<t.ca||!(1==i&&function(e,t){return!(Zl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=Za(xo(e.Na,e,t),Wc(e,e.C)),e.C++,!0))}(e,t)||2==i&&zc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),r){case 1:Hc(e,5);break;case 4:Hc(e,10);break;case 3:Hc(e,6);break;default:Hc(e,2)}}function Wc(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function Hc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var i=xo(e.pb,e);n||(n=new Cl("//www.google.com/images/cleardot.gif"),go.location&&"http"==go.location.protocol||Pl(n,"https"),Ml(n)),function(e,t){const n=new qa;if(go.Image){const i=new Image;i.onload=ko(lc,n,i,"TestLoadImage: loaded",!0,t),i.onerror=ko(lc,n,i,"TestLoadImage: error",!1,t),i.onabort=ko(lc,n,i,"TestLoadImage: abort",!1,t),i.ontimeout=ko(lc,n,i,"TestLoadImage: timeout",!1,t),go.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=e}else t(!1)}(n.toString(),i)}else $a(2);e.H=0,e.h&&e.h.za(t),Kc(e),Oc(e)}function Kc(e){if(e.H=0,e.ma=[],e.h){const t=ic(e.i);0==t.length&&0==e.j.length||(Co(e.ma,t),Co(e.ma,e.j),e.i.i.length=0,To(e.j),e.j.length=0),e.h.ya()}}function Gc(e,t,n){var i=n instanceof Cl?Al(n):new Cl(n);if(""!=i.g)t&&(i.g=t+"."+i.g),Dl(i,i.m);else{var r=go.location;i=r.protocol,t=t?t+"."+r.hostname:r.hostname,r=+r.port;var s=new Cl(null);i&&Pl(s,i),t&&(s.g=t),r&&Dl(s,r),n&&(s.l=n),i=s}return n=e.F,t=e.Da,n&&t&&Ol(i,n,t),Ol(i,"VER",e.ra),Lc(e,i),i}function Qc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new mc(new cc({ob:n})):new mc(e.va)).Oa(e.J),t}function Yc(){}function Xc(){if(Vo&&!(10<=Number(Qo)))throw Error("Environmental error: no available transport.")}function $c(e,t){wa.call(this),this.g=new Pc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Do(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Do(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new eu(this)}function Jc(e){al.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Zc(){ll.call(this),this.status=1}function eu(e){this.g=e}function tu(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function nu(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],o=t+(s^n&(r^s))+i[0]+3614090360&4294967295;o=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((r=s+((o=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function iu(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}(uo=mc.prototype).Oa=function(e){this.M=e},uo.ha=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():sl.g(),this.C=this.u?il(this.u):il(sl),this.g.onreadystatechange=xo(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(s){return void wc(this,s)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),r=go.FormData&&e instanceof go.FormData,!(0<=Eo(bc,t))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Sc(this),0<this.B&&((this.L=function(e){return Vo&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=xo(this.ua,this)):this.A=La(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){wc(this,s)}},uo.ua=function(){"undefined"!=typeof po&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,_a(this,"timeout"),this.abort(8))},uo.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,_a(this,"complete"),_a(this,"abort"),kc(this))},uo.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kc(this,!0)),mc.$.N.call(this)},uo.La=function(){this.s||(this.G||this.v||this.l?xc(this):this.kb())},uo.kb=function(){xc(this)},uo.isActive=function(){return!!this.g},uo.da=function(){try{return 2<Ic(this)?this.g.status:-1}catch(rc){return-1}},uo.ja=function(){try{return this.g?this.g.responseText:""}catch(rc){return""}},uo.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),gc(t)}},uo.Ia=function(){return this.m},uo.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(uo=Pc.prototype).ra=8,uo.H=1,uo.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const r=new ul(this,this.l,e);let s=this.s;if(this.U&&(s?(s=na(s),ra(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var i=this.j[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Fc(this,r,t),Ol(n=Al(this.I),"RID",e),Ol(n,"CVER",22),this.F&&Ol(n,"X-HTTP-Session-Id",this.F),Lc(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Tc(s)))+"&"+t:this.o&&Cc(n,this.o,s)),tc(this.i,r),this.bb&&Ol(n,"TYPE","init"),this.P?(Ol(n,"$req",t),Ol(n,"SID","null"),r.aa=!0,gl(r,n,null)):gl(r,n,t),this.H=2}}else 3==this.H&&(e?Rc(this,e):0==this.j.length||Jl(this.i)||Rc(this))},uo.Ma=function(){if(this.u=null,jc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=Za(xo(this.jb,this),e)}},uo.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,$a(10),Nc(this),jc(this))},uo.ib=function(){null!=this.v&&(this.v=null,Nc(this),zc(this),$a(19))},uo.pb=function(e){e?(this.l.info("Successfully pinged google.com"),$a(2)):(this.l.info("Failed to ping google.com"),$a(1))},uo.isActive=function(){return!!this.h&&this.h.isActive(this)},(uo=Yc.prototype).Ba=function(){},uo.Aa=function(){},uo.za=function(){},uo.ya=function(){},uo.isActive=function(){return!0},uo.Va=function(){},Xc.prototype.g=function(e,t){return new $c(e,t)},So($c,wa),$c.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;$a(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Gc(e,null,e.Y),Mc(e)},$c.prototype.close=function(){Dc(this.g)},$c.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ka(e),e=n);t.j.push(new Yl(t.fb++,e)),3==t.H&&Mc(t)},$c.prototype.N=function(){this.g.h=null,delete this.j,Dc(this.g),delete this.g,$c.$.N.call(this)},So(Jc,al),So(Zc,ll),So(eu,Yc),eu.prototype.Ba=function(){_a(this.g,"a")},eu.prototype.Aa=function(e){_a(this.g,new Jc(e))},eu.prototype.za=function(e){_a(this.g,new Zc)},eu.prototype.ya=function(){_a(this.g,"b")},So(tu,(function(){this.blockSize=-1})),tu.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},tu.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,i=this.m,r=this.h,s=0;s<t;){if(0==r)for(;s<=n;)nu(this,e,s),s+=this.blockSize;if("string"===typeof e){for(;s<t;)if(i[r++]=e.charCodeAt(s++),r==this.blockSize){nu(this,i),r=0;break}}else for(;s<t;)if(i[r++]=e[s++],r==this.blockSize){nu(this,i),r=0;break}}this.h=r,this.i+=t},tu.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var ru={};function su(e){return-128<=e&&128>e?function(e,t){var n=ru;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new iu([0|e],0>e?-1:0)})):new iu([0|e],0>e?-1:0)}function ou(e){if(isNaN(e)||!isFinite(e))return lu;if(0>e)return fu(ou(-e));for(var t=[],n=1,i=0;e>=n;i++)t[i]=e/n|0,n*=au;return new iu(t,0)}var au=4294967296,lu=su(0),cu=su(1),uu=su(16777216);function hu(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function du(e){return-1==e.h}function fu(e){for(var t=e.g.length,n=[],i=0;i<t;i++)n[i]=~e.g[i];return new iu(n,~e.h).add(cu)}function pu(e,t){return e.add(fu(t))}function gu(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function mu(e,t){this.g=e,this.h=t}function yu(e,t){if(hu(t))throw Error("division by zero");if(hu(e))return new mu(lu,lu);if(du(e))return t=yu(fu(e),t),new mu(fu(t.g),fu(t.h));if(du(t))return t=yu(e,fu(t)),new mu(fu(t.g),t.h);if(30<e.g.length){if(du(e)||du(t))throw Error("slowDivide_ only works with positive integers.");for(var n=cu,i=t;0>=i.X(e);)n=vu(n),i=vu(i);var r=bu(n,1),s=bu(i,1);for(i=bu(i,2),n=bu(n,2);!hu(i);){var o=s.add(i);0>=o.X(e)&&(r=r.add(n),s=o),i=bu(i,1),n=bu(n,1)}return t=pu(e,r.R(t)),new mu(r,t)}for(r=lu;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),o=(s=ou(n)).R(t);du(o)||0<o.X(e);)o=(s=ou(n-=i)).R(t);hu(s)&&(s=cu),r=r.add(s),e=pu(e,o)}return new mu(r,e)}function vu(e){for(var t=e.g.length+1,n=[],i=0;i<t;i++)n[i]=e.D(i)<<1|e.D(i-1)>>>31;return new iu(n,e.h)}function bu(e,t){var n=t>>5;t%=32;for(var i=e.g.length-n,r=[],s=0;s<i;s++)r[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new iu(r,e.h)}(uo=iu.prototype).ea=function(){if(du(this))return-fu(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.D(n);e+=(0<=i?i:au+i)*t,t*=au}return e},uo.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(hu(this))return"0";if(du(this))return"-"+fu(this).toString(e);for(var t=ou(Math.pow(e,6)),n=this,i="";;){var r=yu(n,t).g,s=((0<(n=pu(n,r.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(hu(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},uo.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},uo.X=function(e){return du(e=pu(this,e))?-1:hu(e)?0:1},uo.abs=function(){return du(this)?fu(this):this},uo.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0,r=0;r<=t;r++){var s=i+(65535&this.D(r))+(65535&e.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(e.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new iu(n,-2147483648&n[n.length-1]?-1:0)},uo.R=function(e){if(hu(this)||hu(e))return lu;if(du(this))return du(e)?fu(this).R(fu(e)):fu(fu(this).R(e));if(du(e))return fu(this.R(fu(e)));if(0>this.X(uu)&&0>e.X(uu))return ou(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],i=0;i<2*t;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<e.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=e.D(r)>>>16,l=65535&e.D(r);n[2*i+2*r]+=o*l,gu(n,2*i+2*r),n[2*i+2*r+1]+=s*l,gu(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,gu(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,gu(n,2*i+2*r+2)}for(i=0;i<t;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=t;i<2*t;i++)n[i]=0;return new iu(n,0)},uo.gb=function(e){return yu(this,e).h},uo.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)&e.D(i);return new iu(n,this.h&e.h)},uo.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)|e.D(i);return new iu(n,this.h|e.h)},uo.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],i=0;i<t;i++)n[i]=this.D(i)^e.D(i);return new iu(n,this.h^e.h)},Xc.prototype.createWebChannel=Xc.prototype.g,$c.prototype.send=$c.prototype.u,$c.prototype.open=$c.prototype.m,$c.prototype.close=$c.prototype.close,el.NO_ERROR=0,el.TIMEOUT=8,el.HTTP_ERROR=6,tl.COMPLETE="complete",rl.EventType=ol,ol.OPEN="a",ol.CLOSE="b",ol.ERROR="c",ol.MESSAGE="d",wa.prototype.listen=wa.prototype.O,mc.prototype.listenOnce=mc.prototype.P,mc.prototype.getLastError=mc.prototype.Sa,mc.prototype.getLastErrorCode=mc.prototype.Ia,mc.prototype.getStatus=mc.prototype.da,mc.prototype.getResponseJson=mc.prototype.Wa,mc.prototype.getResponseText=mc.prototype.ja,mc.prototype.send=mc.prototype.ha,mc.prototype.setWithCredentials=mc.prototype.Oa,tu.prototype.digest=tu.prototype.l,tu.prototype.reset=tu.prototype.reset,tu.prototype.update=tu.prototype.j,iu.prototype.add=iu.prototype.add,iu.prototype.multiply=iu.prototype.R,iu.prototype.modulo=iu.prototype.gb,iu.prototype.compare=iu.prototype.X,iu.prototype.toNumber=iu.prototype.ea,iu.prototype.toString=iu.prototype.toString,iu.prototype.getBits=iu.prototype.D,iu.fromNumber=ou,iu.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return fu(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=ou(Math.pow(n,8)),r=lu,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=ou(Math.pow(n,o)),r=r.R(o).add(ou(a))):r=(r=r.R(i)).add(ou(a))}return r};var wu=fo.createWebChannelTransport=function(){return new Xc},_u=fo.getStatEventTarget=function(){return Ga()},xu=fo.ErrorCode=el,ku=fo.EventType=tl,Su=fo.Event=Ha,Iu=fo.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Eu=(fo.FetchXmlHttpFactory=cc,fo.WebChannel=rl),Tu=fo.XhrIo=mc,Cu=fo.Md5=tu,Au=fo.Integer=iu;const Pu="@firebase/firestore";class Du{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Du.UNAUTHENTICATED=new Du(null),Du.GOOGLE_CREDENTIALS=new Du("google-credentials-uid"),Du.FIRST_PARTY=new Du("first-party-uid"),Du.MOCK_USER=new Du("mock-user");let Nu="10.10.0";const Ou=new H("@firebase/firestore");function Mu(){return Ou.logLevel}function Ru(e){if(Ou.logLevel<=U.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Vu);Ou.debug("Firestore (".concat(Nu,"): ").concat(e),...r)}}function Lu(e){if(Ou.logLevel<=U.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Vu);Ou.error("Firestore (".concat(Nu,"): ").concat(e),...r)}}function Fu(e){if(Ou.logLevel<=U.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(Vu);Ou.warn("Firestore (".concat(Nu,"): ").concat(e),...r)}}function Vu(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function zu(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(Nu,") INTERNAL ASSERTION FAILED: ")+e;throw Lu(t),new Error(t)}function Uu(e,t){e||zu()}function ju(e,t){return e}const Bu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class qu extends x{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Wu{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}class Hu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Ku{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Du.UNAUTHENTICATED)))}shutdown(){}}class Gu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Qu{constructor(e){this.t=e,this.currentUser=Du.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Wu;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Wu,e.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const t=r;e.enqueueRetryable((async()=>{await t.promise,await i(this.currentUser)}))},o=e=>{Ru("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((e=>o(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(Ru("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Wu)}}),0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(Ru("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Uu("string"==typeof t.accessToken),new Hu(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Uu(null===e||"string"==typeof e),new Du(e)}}class Yu{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=Du.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Xu{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new Yu(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(Du.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class $u{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Ju{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&Ru("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,Ru("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const i=e=>{Ru("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>i(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?i(e):Ru("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(Uu("string"==typeof e.token),this.R=e.token,new $u(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Zu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}class eh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const i=Zu(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<t&&(n+=e.charAt(i[r]%62))}return n}}function th(e,t){return e<t?-1:e>t?1:0}function nh(e,t,n){return e.length===t.length&&e.every(((e,i)=>n(e,t[i])))}function ih(e){return e+"\0"}class rh{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new qu(Bu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new qu(Bu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new qu(Bu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new qu(Bu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return rh.fromMillis(Date.now())}static fromDate(e){return rh.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new rh(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?th(this.nanoseconds,e.nanoseconds):th(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class sh{constructor(e){this.timestamp=e}static fromTimestamp(e){return new sh(e)}static min(){return new sh(new rh(0,0))}static max(){return new sh(new rh(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class oh{constructor(e,t,n){void 0===t?t=0:t>e.length&&zu(),void 0===n?n=e.length-t:n>e.length-t&&zu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===oh.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof oh?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=e.get(i),r=t.get(i);if(n<r)return-1;if(n>r)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class ah extends oh{construct(e,t,n){return new ah(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new qu(Bu.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter((e=>e.length>0)))}return new ah(e)}static emptyPath(){return new ah([])}}const lh=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ch extends oh{construct(e,t,n){return new ch(e,t,n)}static isValidIdentifier(e){return lh.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ch.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ch(["__name__"])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new qu(Bu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new qu(Bu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new qu(Bu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new qu(Bu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ch(t)}static emptyPath(){return new ch([])}}class uh{constructor(e){this.path=e}static fromPath(e){return new uh(ah.fromString(e))}static fromName(e){return new uh(ah.fromString(e).popFirst(5))}static empty(){return new uh(ah.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ah.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ah.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new uh(new ah(e.slice()))}}class hh{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}function dh(e){return e.fields.find((e=>2===e.kind))}function fh(e){return e.fields.filter((e=>2!==e.kind))}hh.UNKNOWN_ID=-1;class ph{constructor(e,t){this.fieldPath=e,this.kind=t}}class gh{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new gh(0,vh.min())}}function mh(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=sh.fromTimestamp(1e9===i?new rh(n+1,0):new rh(n,i));return new vh(r,uh.empty(),t)}function yh(e){return new vh(e.readTime,e.key,-1)}class vh{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new vh(sh.min(),uh.empty(),-1)}static max(){return new vh(sh.max(),uh.empty(),-1)}}function bh(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=uh.comparator(e.documentKey,t.documentKey),0!==n?n:th(e.largestBatchId,t.largestBatchId))}const wh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _h{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function xh(e){if(e.code!==Bu.FAILED_PRECONDITION||e.message!==wh)throw e;Ru("LocalStore","Unexpectedly lost primary lease")}class kh{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&zu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new kh(((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof kh?t:kh.resolve(t)}catch(e){return kh.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):kh.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):kh.reject(t)}static resolve(e){return new kh(((t,n)=>{t(e)}))}static reject(e){return new kh(((t,n)=>{n(e)}))}static waitFor(e){return new kh(((t,n)=>{let i=0,r=0,s=!1;e.forEach((e=>{++i,e.next((()=>{++r,s&&r===i&&t()}),(e=>n(e)))})),s=!0,r===i&&t()}))}static or(e){let t=kh.resolve(!1);for(const n of e)t=t.next((e=>e?kh.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,i)=>{n.push(t.call(this,e,i))})),this.waitFor(n)}static mapArray(e,t){return new kh(((n,i)=>{const r=e.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;t(e[l]).next((e=>{s[l]=e,++o,o===r&&n(s)}),(e=>i(e)))}}))}static doWhile(e,t){return new kh(((n,i)=>{const r=()=>{!0===e()?t().next((()=>{r()}),i):n()};r()}))}}class Sh{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new Wu,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Th(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Nh(t.target.error);this.V.reject(new Th(e,n))}}static open(e,t,n,i){try{return new Sh(t,e.transaction(i,n))}catch(e){throw new Th(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Ru("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Ah(t)}}class Ih{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===Ih.S(p())&&Lu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ru("SimpleDb","Removing database:",e),Ph(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!_())return!1;if(Ih.C())return!0;const e=p(),t=Ih.S(e),n=0<t&&t<10,i=Ih.v(e),r=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||r)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(Ru("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=e=>{const n=e.target.result;t(n)},i.onblocked=()=>{n(new Th(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const i=t.target.error;"VersionError"===i.name?n(new qu(Bu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new qu(Bu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new Th(e,i))},i.onupgradeneeded=e=>{Ru("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,i.transaction,e.oldVersion,this.version).next((()=>{Ru("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.L&&(this.db.onversionchange=e=>this.L(e)),this.db}B(e){this.L=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,i){const r="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.O(e);const t=Sh.open(this.db,e,r?"readonly":"readwrite",n),s=i(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),kh.reject(e)))).toPromise();return s.catch((()=>{})),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(Ru("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Eh{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return Ph(this.k.delete())}}class Th extends qu{constructor(e,t){super(Bu.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Ch(e){return"IndexedDbTransactionError"===e.name}class Ah{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Ru("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Ru("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ph(n)}add(e){return Ru("SimpleDb","ADD",this.store.name,e,e),Ph(this.store.add(e))}get(e){return Ph(this.store.get(e)).next((t=>(void 0===t&&(t=null),Ru("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return Ru("SimpleDb","DELETE",this.store.name,e),Ph(this.store.delete(e))}count(){return Ru("SimpleDb","COUNT",this.store.name),Ph(this.store.count())}W(e,t){const n=this.options(e,t),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const e=i.getAll(n.range);return new kh(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new kh(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){Ru("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const i=this.cursor(n);return this.G(i,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const i=this.cursor(n);return this.G(i,t)}Z(e){const t=this.cursor({});return new kh(((n,i)=>{t.onerror=e=>{const t=Nh(e.target.error);i(t)},t.onsuccess=t=>{const i=t.target.result;i?e(i.primaryKey,i.value).next((e=>{e?i.continue():n()})):n()}}))}G(e,t){const n=[];return new kh(((i,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{const r=e.target.result;if(!r)return void i();const s=new Eh(r),o=t(r.primaryKey,r.value,s);if(o instanceof kh){const e=o.catch((e=>(s.done(),kh.reject(e))));n.push(e)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>kh.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ph(e){return new kh(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Nh(e.target.error);n(t)}}))}let Dh=!1;function Nh(e){const t=Ih.S(p());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new qu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Dh||(Dh=!0,setTimeout((()=>{throw e}),0)),e}}return e}class Oh{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){Ru("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{Ru("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(e){Ch(e)?Ru("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await xh(e)}await this.ee(6e4)}))}}class Mh{constructor(e,t){this.localStore=e,this.persistence=t}async te(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let i=t,r=!0;return kh.doWhile((()=>!0===r&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return Ru("IndexBackfiller","Processing collection: ".concat(t)),this.re(e,t,i).next((e=>{i-=e,n.add(t)}));r=!1})))).next((()=>t-i))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((i=>this.localStore.localDocuments.getNextDocuments(e,t,i,n).next((n=>{const r=n.changes;return this.localStore.indexManager.updateIndexEntries(e,r).next((()=>this.ie(i,n))).next((n=>(Ru("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>r.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const i=yh(t);bh(i,n)>0&&(n=i)})),new vh(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Rh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function Lh(e){return null==e}function Fh(e){return 0===e&&1/e==-1/0}function Vh(e){return"number"==typeof e&&Number.isInteger(e)&&!Fh(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function zh(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=jh(t)),t=Uh(e.get(n),t);return jh(t)}function Uh(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const t=e.charAt(r);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function jh(e){return e+"\x01\x01"}function Bh(e){const t=e.length;if(Uu(t>=2),2===t)return Uu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),ah.emptyPath();const n=t-2,i=[];let r="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&zu(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===r.length?o=n:(r+=n,o=r,r=""),i.push(o);break;case"\x10":r+=e.substring(s,t),r+="\0";break;case"\x11":r+=e.substring(s,t+1);break;default:zu()}s=t+2}return new ah(i)}Rh._e=-1;const qh=["userId","batchId"];function Wh(e,t){return[e,zh(t)]}function Hh(e,t,n){return[e,zh(t),n]}const Kh={},Gh=["prefixPath","collectionGroup","readTime","documentId"],Qh=["prefixPath","collectionGroup","documentId"],Yh=["collectionGroup","readTime","prefixPath","documentId"],Xh=["canonicalId","targetId"],$h=["targetId","path"],Jh=["path","targetId"],Zh=["collectionId","parent"],ed=["indexId","uid"],td=["uid","sequenceNumber"],nd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],id=["indexId","uid","orderedDocumentKey"],rd=["userId","collectionPath","documentId"],sd=["userId","collectionPath","largestBatchId"],od=["userId","collectionGroup","largestBatchId"],ad=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],ld=[...ad,"documentOverlays"],cd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ud=cd,hd=[...ud,"indexConfiguration","indexState","indexEntries"];class dd extends _h{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function fd(e,t){const n=ju(e);return Ih.M(n.ae,t)}function pd(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function gd(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function md(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class yd{constructor(e,t){this.comparator=e,this.root=t||bd.EMPTY}insert(e,t){return new yd(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bd.BLACK,null,null))}remove(e){return new yd(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bd.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push("".concat(t,":").concat(n)),!1))),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vd(this.root,e,this.comparator,!1)}getReverseIterator(){return new vd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vd(this.root,e,this.comparator,!0)}}class vd{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bd{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:bd.RED,this.left=null!=i?i:bd.EMPTY,this.right=null!=r?r:bd.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new bd(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return bd.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return bd.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zu();if(this.right.isRed())throw zu();const e=this.left.check();if(e!==this.right.check())throw zu();return e+(this.isRed()?0:1)}}bd.EMPTY=null,bd.RED=!0,bd.BLACK=!1,bd.EMPTY=new class{constructor(){this.size=0}get key(){throw zu()}get value(){throw zu()}get color(){throw zu()}get left(){throw zu()}get right(){throw zu()}copy(e,t,n,i,r){return this}insert(e,t,n){return new bd(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wd{constructor(e){this.comparator=e,this.data=new yd(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _d(this.data.getIterator())}getIteratorFrom(e){return new _d(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof wd))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new wd(this.comparator);return t.data=e,t}}class _d{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function xd(e){return e.hasNext()?e.getNext():void 0}class kd{constructor(e){this.fields=e,e.sort(ch.comparator)}static empty(){return new kd([])}unionWith(e){let t=new wd(ch.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new kd(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return nh(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}class Sd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Id{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Sd("Invalid base64 string: "+e):e}}(e);return new Id(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Id(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return th(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Id.EMPTY_BYTE_STRING=new Id("");const Ed=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Td(e){if(Uu(!!e),"string"==typeof e){let t=0;const n=Ed.exec(e);if(Uu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Cd(e.seconds),nanos:Cd(e.nanos)}}function Cd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ad(e){return"string"==typeof e?Id.fromBase64String(e):Id.fromUint8Array(e)}function Pd(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Dd(e){const t=e.mapValue.fields.__previous_value__;return Pd(t)?Dd(t):t}function Nd(e){const t=Td(e.mapValue.fields.__local_write_time__.timestampValue);return new rh(t.seconds,t.nanos)}class Od{constructor(e,t,n,i,r,s,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class Md{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Md("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Md&&e.projectId===this.projectId&&e.database===this.database}}const Rd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Ld={nullValue:"NULL_VALUE"};function Fd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Pd(e)?4:$d(e)?9007199254740991:10:zu()}function Vd(e,t){if(e===t)return!0;const n=Fd(e);if(n!==Fd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Nd(e).isEqual(Nd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Td(e.timestampValue),i=Td(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ad(e.bytesValue).isEqual(Ad(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Cd(e.geoPointValue.latitude)===Cd(t.geoPointValue.latitude)&&Cd(e.geoPointValue.longitude)===Cd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Cd(e.integerValue)===Cd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Cd(e.doubleValue),i=Cd(t.doubleValue);return n===i?Fh(n)===Fh(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return nh(e.arrayValue.values||[],t.arrayValue.values||[],Vd);case 10:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(pd(n)!==pd(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Vd(n[r],i[r])))return!1;return!0}(e,t);default:return zu()}}function zd(e,t){return void 0!==(e.values||[]).find((e=>Vd(e,t)))}function Ud(e,t){if(e===t)return 0;const n=Fd(e),i=Fd(t);if(n!==i)return th(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return th(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Cd(e.integerValue||e.doubleValue),i=Cd(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return jd(e.timestampValue,t.timestampValue);case 4:return jd(Nd(e),Nd(t));case 5:return th(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Ad(e),i=Ad(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=th(n[r],i[r]);if(0!==e)return e}return th(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=th(Cd(e.latitude),Cd(t.latitude));return 0!==n?n:th(Cd(e.longitude),Cd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=Ud(n[r],i[r]);if(e)return e}return th(n.length,i.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Rd.mapValue&&t===Rd.mapValue)return 0;if(e===Rd.mapValue)return 1;if(t===Rd.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const e=th(i[o],s[o]);if(0!==e)return e;const t=Ud(n[i[o]],r[s[o]]);if(0!==t)return t}return th(i.length,s.length)}(e.mapValue,t.mapValue);default:throw zu()}}function jd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return th(e,t);const n=Td(e),i=Td(t),r=th(n.seconds,i.seconds);return 0!==r?r:th(n.nanos,i.nanos)}function Bd(e){return qd(e)}function qd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Td(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Ad(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return uh.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=qd(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(qd(e.fields[r]));return n+"}"}(e.mapValue):zu()}function Wd(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Hd(e){return!!e&&"integerValue"in e}function Kd(e){return!!e&&"arrayValue"in e}function Gd(e){return!!e&&"nullValue"in e}function Qd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Yd(e){return!!e&&"mapValue"in e}function Xd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return gd(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=Xd(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Xd(e.arrayValue.values[n]);return t}return Object.assign({},e)}function $d(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Jd(e){return"nullValue"in e?Ld:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Wd(Md.empty(),uh.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:zu()}function Zd(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Wd(Md.empty(),uh.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Rd:zu()}function ef(e,t){const n=Ud(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function tf(e,t){const n=Ud(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class nf{constructor(e){this.value=e}static empty(){return new nf({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Yd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xd(t)}setAll(e){let t=ch.emptyPath(),n={},i=[];e.forEach(((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=Xd(e):i.push(r.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());Yd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];Yd(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){gd(t,((t,n)=>e[t]=n));for(const i of n)delete e[i]}clone(){return new nf(Xd(this.value))}}function rf(e){const t=[];return gd(e.fields,((e,n)=>{const i=new ch([e]);if(Yd(n)){const e=rf(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)})),new kd(t)}class sf{constructor(e,t,n,i,r,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(e){return new sf(e,0,sh.min(),sh.min(),sh.min(),nf.empty(),0)}static newFoundDocument(e,t,n,i){return new sf(e,1,t,sh.min(),n,i,0)}static newNoDocument(e,t){return new sf(e,2,t,sh.min(),sh.min(),nf.empty(),0)}static newUnknownDocument(e,t){return new sf(e,3,t,sh.min(),sh.min(),nf.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(sh.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nf.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nf.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=sh.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof sf&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new sf(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class of{constructor(e,t){this.position=e,this.inclusive=t}}function af(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],o=e.position[r];if(i=s.field.isKeyField()?uh.comparator(uh.fromName(o.referenceValue),n.key):Ud(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function lf(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vd(e.position[n],t.position[n]))return!1;return!0}class cf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function uf(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class hf{}class df extends hf{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xf(e,t,n):"array-contains"===t?new Ef(e,n):"in"===t?new Tf(e,n):"not-in"===t?new Cf(e,n):"array-contains-any"===t?new Af(e,n):new df(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new kf(e,n):new Sf(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ud(t,this.value)):null!==t&&Fd(this.value)===Fd(t)&&this.matchesComparison(Ud(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return zu()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ff extends hf{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new ff(e,t)}matches(e){return pf(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function pf(e){return"and"===e.op}function gf(e){return"or"===e.op}function mf(e){return yf(e)&&pf(e)}function yf(e){for(const t of e.filters)if(t instanceof ff)return!1;return!0}function vf(e){if(e instanceof df)return e.field.canonicalString()+e.op.toString()+Bd(e.value);if(mf(e))return e.filters.map((e=>vf(e))).join(",");{const t=e.filters.map((e=>vf(e))).join(",");return"".concat(e.op,"(").concat(t,")")}}function bf(e,t){return e instanceof df?function(e,t){return t instanceof df&&e.op===t.op&&e.field.isEqual(t.field)&&Vd(e.value,t.value)}(e,t):e instanceof ff?function(e,t){return t instanceof ff&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,i)=>e&&bf(n,t.filters[i])),!0)}(e,t):void zu()}function wf(e,t){const n=e.filters.concat(t);return ff.create(n,e.op)}function _f(e){return e instanceof df?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Bd(e.value))}(e):e instanceof ff?function(e){return e.op.toString()+" {"+e.getFilters().map(_f).join(" ,")+"}"}(e):"Filter"}class xf extends df{constructor(e,t,n){super(e,t,n),this.key=uh.fromName(n.referenceValue)}matches(e){const t=uh.comparator(e.key,this.key);return this.matchesComparison(t)}}class kf extends df{constructor(e,t){super(e,"in",t),this.keys=If("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Sf extends df{constructor(e,t){super(e,"not-in",t),this.keys=If("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function If(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>uh.fromName(e.referenceValue)))}class Ef extends df{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kd(t)&&zd(t.arrayValue,this.value)}}class Tf extends df{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zd(this.value.arrayValue,t)}}class Cf extends df{constructor(e,t){super(e,"not-in",t)}matches(e){if(zd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zd(this.value.arrayValue,t)}}class Af extends df{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>zd(this.value.arrayValue,e)))}}class Pf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function Df(e){return new Pf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Nf(e){const t=ju(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>vf(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),Lh(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>Bd(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>Bd(e))).join(",")),t.ce=e}return t.ce}function Of(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!uf(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!bf(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!lf(e.startAt,t.startAt)&&lf(e.endAt,t.endAt)}function Mf(e){return uh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Rf(e,t){return e.filters.filter((e=>e instanceof df&&e.field.isEqual(t)))}function Lf(e,t,n){let i=Ld,r=!0;for(const s of Rf(e,t)){let e=Ld,t=!0;switch(s.op){case"<":case"<=":e=Jd(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Ld}ef({value:i,inclusive:r},{value:e,inclusive:t})<0&&(i=e,r=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];ef({value:i,inclusive:r},{value:e,inclusive:n.inclusive})<0&&(i=e,r=n.inclusive);break}return{value:i,inclusive:r}}function Ff(e,t,n){let i=Rd,r=!0;for(const s of Rf(e,t)){let e=Rd,t=!0;switch(s.op){case">=":case">":e=Zd(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Rd}tf({value:i,inclusive:r},{value:e,inclusive:t})>0&&(i=e,r=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];tf({value:i,inclusive:r},{value:e,inclusive:n.inclusive})>0&&(i=e,r=n.inclusive);break}return{value:i,inclusive:r}}class Vf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function zf(e,t,n,i,r,s,o,a){return new Vf(e,t,n,i,r,s,o,a)}function Uf(e){return new Vf(e)}function jf(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Bf(e){return null!==e.collectionGroup}function qf(e){const t=ju(e);if(null===t.le){t.le=[];const e=new Set;for(const r of t.explicitOrderBy)t.le.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new wd(ch.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);i.forEach((i=>{e.has(i.canonicalString())||i.isKeyField()||t.le.push(new cf(i,n))})),e.has(ch.keyField().canonicalString())||t.le.push(new cf(ch.keyField(),n))}return t.le}function Wf(e){const t=ju(e);return t.he||(t.he=Hf(t,qf(e))),t.he}function Hf(e,t){if("F"===e.limitType)return Df(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new cf(e.field,t)}));const n=e.endAt?new of(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new of(e.startAt.position,e.startAt.inclusive):null;return Df(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Kf(e,t){const n=e.filters.concat([t]);return new Vf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Gf(e,t,n){return new Vf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Qf(e,t){return Of(Wf(e),Wf(t))&&e.limitType===t.limitType}function Yf(e){return"".concat(Nf(Wf(e)),"|lt:").concat(e.limitType)}function Xf(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((e=>_f(e))).join(", "),"]")),Lh(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e))).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>Bd(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>Bd(e))).join(",")),"Target(".concat(t,")")}(Wf(e)),"; limitType=").concat(e.limitType,")")}function $f(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):uh.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of qf(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=af(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,qf(e),t))&&!(e.endAt&&!function(e,t,n){const i=af(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,qf(e),t))}(e,t)}function Jf(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Zf(e){return(t,n)=>{let i=!1;for(const r of qf(e)){const e=ep(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function ep(e,t,n){const i=e.field.isKeyField()?uh.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?Ud(i,r):zu()}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return zu()}}class tp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){gd(this.inner,((t,n)=>{for(const[i,r]of n)e(i,r)}))}isEmpty(){return md(this.inner)}size(){return this.innerSize}}const np=new yd(uh.comparator);function ip(){return np}const rp=new yd(uh.comparator);function sp(){let e=rp;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function op(e){let t=rp;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function ap(){return cp()}function lp(){return cp()}function cp(){return new tp((e=>e.toString()),((e,t)=>e.isEqual(t)))}const up=new yd(uh.comparator),hp=new wd(uh.comparator);function dp(){let e=hp;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const fp=new wd(th);function pp(){return fp}function gp(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fh(t)?"-0":t}}function mp(e){return{integerValue:""+e}}function yp(e,t){return Vh(t)?mp(t):gp(e,t)}class vp{constructor(){this._=void 0}}function bp(e,t,n){return e instanceof xp?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Pd(t)&&(t=Dd(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof kp?Sp(e,t):e instanceof Ip?Ep(e,t):function(e,t){const n=_p(e,t),i=Cp(n)+Cp(e.Ie);return Hd(n)&&Hd(e.Ie)?mp(i):gp(e.serializer,i)}(e,t)}function wp(e,t,n){return e instanceof kp?Sp(e,t):e instanceof Ip?Ep(e,t):n}function _p(e,t){return e instanceof Tp?function(e){return Hd(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class xp extends vp{}class kp extends vp{constructor(e){super(),this.elements=e}}function Sp(e,t){const n=Ap(t);for(const i of e.elements)n.some((e=>Vd(e,i)))||n.push(i);return{arrayValue:{values:n}}}class Ip extends vp{constructor(e){super(),this.elements=e}}function Ep(e,t){let n=Ap(t);for(const i of e.elements)n=n.filter((e=>!Vd(e,i)));return{arrayValue:{values:n}}}class Tp extends vp{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Cp(e){return Cd(e.integerValue||e.doubleValue)}function Ap(e){return Kd(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Pp{constructor(e,t){this.field=e,this.transform=t}}class Dp{constructor(e,t){this.version=e,this.transformResults=t}}class Np{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Np}static exists(e){return new Np(void 0,e)}static updateTime(e){return new Np(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Op(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Mp{}function Rp(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Hp(e.key,Np.none()):new Up(e.key,e.data,Np.none());{const n=e.data,i=nf.empty();let r=new wd(ch.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new jp(e.key,i,new kd(r.toArray()),Np.none())}}function Lp(e,t,n){e instanceof Up?function(e,t,n){const i=e.value.clone(),r=qp(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof jp?function(e,t,n){if(!Op(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=qp(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(Bp(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Fp(e,t,n,i){return e instanceof Up?function(e,t,n,i){if(!Op(e.precondition,t))return n;const r=e.value.clone(),s=Wp(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof jp?function(e,t,n,i){if(!Op(e.precondition,t))return n;const r=Wp(e.fieldTransforms,i,t),s=t.data;return s.setAll(Bp(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,i):function(e,t,n){return Op(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Vp(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=_p(i.transform,e||null);null!=r&&(null===n&&(n=nf.empty()),n.set(i.field,r))}return n||null}function zp(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&nh(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof kp&&t instanceof kp||e instanceof Ip&&t instanceof Ip?nh(e.elements,t.elements,Vd):e instanceof Tp&&t instanceof Tp?Vd(e.Ie,t.Ie):e instanceof xp&&t instanceof xp}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Up extends Mp{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class jp extends Mp{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function Bp(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}})),t}function qp(e,t,n){const i=new Map;Uu(e.length===n.length);for(let r=0;r<n.length;r++){const s=e[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,wp(o,a,n[r]))}return i}function Wp(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,bp(e,s,t))}return i}class Hp extends Mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kp extends Mp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gp{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&Lp(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Fp(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Fp(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=lp();return this.mutations.forEach((i=>{const r=e.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=t.has(i.key)?null:o;const a=Rp(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(sh.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),dp())}isEqual(e){return this.batchId===e.batchId&&nh(this.mutations,e.mutations,((e,t)=>zp(e,t)))&&nh(this.baseMutations,e.baseMutations,((e,t)=>zp(e,t)))}}class Qp{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){Uu(e.mutations.length===n.length);let i=up;const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Qp(e,t,n,i)}}class Yp{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Xp{constructor(e,t){this.count=e,this.unchangedNames=t}}var $p,Jp;function Zp(e){switch(e){default:return zu();case Bu.CANCELLED:case Bu.UNKNOWN:case Bu.DEADLINE_EXCEEDED:case Bu.RESOURCE_EXHAUSTED:case Bu.INTERNAL:case Bu.UNAVAILABLE:case Bu.UNAUTHENTICATED:return!1;case Bu.INVALID_ARGUMENT:case Bu.NOT_FOUND:case Bu.ALREADY_EXISTS:case Bu.PERMISSION_DENIED:case Bu.FAILED_PRECONDITION:case Bu.ABORTED:case Bu.OUT_OF_RANGE:case Bu.UNIMPLEMENTED:case Bu.DATA_LOSS:return!0}}function eg(e){if(void 0===e)return Lu("GRPC error has no .code"),Bu.UNKNOWN;switch(e){case $p.OK:return Bu.OK;case $p.CANCELLED:return Bu.CANCELLED;case $p.UNKNOWN:return Bu.UNKNOWN;case $p.DEADLINE_EXCEEDED:return Bu.DEADLINE_EXCEEDED;case $p.RESOURCE_EXHAUSTED:return Bu.RESOURCE_EXHAUSTED;case $p.INTERNAL:return Bu.INTERNAL;case $p.UNAVAILABLE:return Bu.UNAVAILABLE;case $p.UNAUTHENTICATED:return Bu.UNAUTHENTICATED;case $p.INVALID_ARGUMENT:return Bu.INVALID_ARGUMENT;case $p.NOT_FOUND:return Bu.NOT_FOUND;case $p.ALREADY_EXISTS:return Bu.ALREADY_EXISTS;case $p.PERMISSION_DENIED:return Bu.PERMISSION_DENIED;case $p.FAILED_PRECONDITION:return Bu.FAILED_PRECONDITION;case $p.ABORTED:return Bu.ABORTED;case $p.OUT_OF_RANGE:return Bu.OUT_OF_RANGE;case $p.UNIMPLEMENTED:return Bu.UNIMPLEMENTED;case $p.DATA_LOSS:return Bu.DATA_LOSS;default:return zu()}}(Jp=$p||($p={}))[Jp.OK=0]="OK",Jp[Jp.CANCELLED=1]="CANCELLED",Jp[Jp.UNKNOWN=2]="UNKNOWN",Jp[Jp.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jp[Jp.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jp[Jp.NOT_FOUND=5]="NOT_FOUND",Jp[Jp.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jp[Jp.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jp[Jp.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jp[Jp.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jp[Jp.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jp[Jp.ABORTED=10]="ABORTED",Jp[Jp.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jp[Jp.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jp[Jp.INTERNAL=13]="INTERNAL",Jp[Jp.UNAVAILABLE=14]="UNAVAILABLE",Jp[Jp.DATA_LOSS=15]="DATA_LOSS";let tg=null;function ng(){return new TextEncoder}const ig=new Au([4294967295,4294967295],0);function rg(e){const t=ng().encode(e),n=new Cu;return n.update(t),new Uint8Array(n.digest())}function sg(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new Au([n,i],0),new Au([r,s],0)]}class og{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ag("Invalid padding: ".concat(t));if(n<0)throw new ag("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ag("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ag("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ee=Au.fromNumber(this.Te)}de(e,t,n){let i=e.add(t.multiply(Au.fromNumber(n)));return 1===i.compare(ig)&&(i=new Au([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=rg(e),[n,i]=sg(t);for(let r=0;r<this.hashCount;r++){const e=this.de(n,i,r);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const i=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),s=new og(r,i,t);return n.forEach((e=>s.insert(e))),s}insert(e){if(0===this.Te)return;const t=rg(e),[n,i]=sg(t);for(let r=0;r<this.hashCount;r++){const e=this.de(n,i,r);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ag extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class lg{constructor(e,t,n,i,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const i=new Map;return i.set(e,cg.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new lg(sh.min(),i,new yd(th),ip(),dp())}}class cg{constructor(e,t,n,i,r){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new cg(n,t,dp(),dp(),dp())}}class ug{constructor(e,t,n,i){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=i}}class hg{constructor(e,t){this.targetId=e,this.fe=t}}class dg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Id.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=i}}class fg{constructor(){this.ge=0,this.pe=mg(),this.ye=Id.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=dp(),t=dp(),n=dp();return this.pe.forEach(((i,r)=>{switch(r){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:n=n.add(i);break;default:zu()}})),new cg(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=mg()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,Uu(this.ge>=0)}Le(){this.Se=!0,this.we=!0}}class pg{constructor(e){this.Be=e,this.ke=new Map,this.qe=ip(),this.Qe=gg(),this.Ke=new yd(th)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Le(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:zu()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,i=this.Ye(t);if(i){const r=i.target;if(Mf(r))if(0===n){const e=new uh(r.path);this.We(t,e,sf.newNoDocument(e,sh.min()))}else Uu(1===n);else{const i=this.Ze(t);if(i!==n){const n=this.Xe(e),r=n?this.et(n,e,i):1;if(0!==r){this.He(t);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==tg||tg.tt(function(e,t,n,i,r){var s,o,a,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===r,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==d?void 0:d.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==i?void 0:i.mightContain(e))&&void 0!==t&&t}}),h}(i,e.fe,this.Be.nt(),n,r))}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=t;let s,o;try{s=Ad(n).toUint8Array()}catch(e){if(e instanceof Sd)return Fu("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new og(s,i,r)}catch(e){return Fu(e instanceof ag?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.Te?null:o}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Be.getRemoteKeysForTarget(t);let i=0;return n.forEach((n=>{const r=this.Be.nt(),s="projects/".concat(r.projectId,"/databases/").concat(r.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),i++)})),i}it(e){const t=new Map;this.ke.forEach(((n,i)=>{const r=this.Ye(i);if(r){if(n.current&&Mf(r.target)){const t=new uh(r.target.path);null!==this.qe.get(t)||this.st(i,t)||this.We(i,t,sf.newNoDocument(t,e))}n.De&&(t.set(i,n.ve()),n.Fe())}}));let n=dp();this.Qe.forEach(((e,t)=>{let i=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(i=!1,!1)})),i&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const i=new lg(e,t,this.Ke,this.qe,n);return this.qe=ip(),this.Qe=gg(),this.Ke=new yd(th),i}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const i=this.ze(e);this.st(e,t)?i.Me(t,1):i.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Be.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new fg,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new wd(th),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||Ru("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Be._t(e)}He(e){this.ke.set(e,new fg),this.Be.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Be.getRemoteKeysForTarget(e).has(t)}}function gg(){return new yd(uh.comparator)}function mg(){return new yd(uh.comparator)}const yg={asc:"ASCENDING",desc:"DESCENDING"},vg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bg={and:"AND",or:"OR"};class wg{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function _g(e,t){return e.useProto3Json||Lh(t)?t:{value:t}}function xg(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function kg(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Sg(e,t){return xg(e,t.toTimestamp())}function Ig(e){return Uu(!!e),sh.fromTimestamp(function(e){const t=Td(e);return new rh(t.seconds,t.nanos)}(e))}function Eg(e,t){return Tg(e,t).canonicalString()}function Tg(e,t){const n=function(e){return new ah(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Cg(e){const t=ah.fromString(e);return Uu(Xg(t)),t}function Ag(e,t){return Eg(e.databaseId,t.path)}function Pg(e,t){const n=Cg(t);if(n.get(1)!==e.databaseId.projectId)throw new qu(Bu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new qu(Bu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new uh(Mg(n))}function Dg(e,t){return Eg(e.databaseId,t)}function Ng(e){const t=Cg(e);return 4===t.length?ah.emptyPath():Mg(t)}function Og(e){return new ah(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Mg(e){return Uu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Rg(e,t,n){return{name:Ag(e,t),fields:n.value.mapValue.fields}}function Lg(e,t,n){const i=Pg(e,t.name),r=Ig(t.updateTime),s=t.createTime?Ig(t.createTime):sh.min(),o=new nf({mapValue:{fields:t.fields}}),a=sf.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Fg(e,t){let n;if(t instanceof Up)n={update:Rg(e,t.key,t.value)};else if(t instanceof Hp)n={delete:Ag(e,t.key)};else if(t instanceof jp)n={update:Rg(e,t.key,t.data),updateMask:Yg(t.fieldMask)};else{if(!(t instanceof Kp))return zu();n={verify:Ag(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof xp)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof kp)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ip)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Tp)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw zu()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Sg(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:zu()}(e,t.precondition)),n}function Vg(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Np.updateTime(Ig(e.updateTime)):void 0!==e.exists?Np.exists(e.exists):Np.none()}(t.currentDocument):Np.none(),i=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)Uu("REQUEST_TIME"===t.setToServerValue),n=new xp;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new kp(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Ip(e)}else"increment"in t?n=new Tp(e,t.increment):zu();const i=ch.fromServerFormat(t.fieldPath);return new Pp(i,n)}(e,t))):[];if(t.update){t.update.name;const r=Pg(e,t.update.name),s=new nf({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new kd(t.map((e=>ch.fromServerFormat(e))))}(t.updateMask);return new jp(r,s,e,n,i)}return new Up(r,s,n,i)}if(t.delete){const i=Pg(e,t.delete);return new Hp(i,n)}if(t.verify){const i=Pg(e,t.verify);return new Kp(i,n)}return zu()}function zg(e,t){return{documents:[Dg(e,t.path)]}}function Ug(e,t){const n={structuredQuery:{}},i=t.path;let r;null!==t.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Dg(e,r);const s=function(e){if(0!==e.length)return Qg(ff.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:Kg(e.field),direction:qg(e.dir)}}(e)))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=_g(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:r}}function jg(e){let t=Ng(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){Uu(1===i);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Bg(e);return t instanceof ff&&mf(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map((e=>function(e){return new cf(Gg(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Lh(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new of(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new of(n,t)}(n.endAt)),zf(t,r,o,s,a,"F",l,c)}function Bg(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gg(e.unaryFilter.field);return df.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Gg(e.unaryFilter.field);return df.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Gg(e.unaryFilter.field);return df.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=Gg(e.unaryFilter.field);return df.create(r,"!=",{nullValue:"NULL_VALUE"});default:return zu()}}(e):void 0!==e.fieldFilter?function(e){return df.create(Gg(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return zu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ff.create(e.compositeFilter.filters.map((e=>Bg(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return zu()}}(e.compositeFilter.op))}(e):zu()}function qg(e){return yg[e]}function Wg(e){return vg[e]}function Hg(e){return bg[e]}function Kg(e){return{fieldPath:e.canonicalString()}}function Gg(e){return ch.fromServerFormat(e.fieldPath)}function Qg(e){return e instanceof df?function(e){if("=="===e.op){if(Qd(e.value))return{unaryFilter:{field:Kg(e.field),op:"IS_NAN"}};if(Gd(e.value))return{unaryFilter:{field:Kg(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Qd(e.value))return{unaryFilter:{field:Kg(e.field),op:"IS_NOT_NAN"}};if(Gd(e.value))return{unaryFilter:{field:Kg(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Kg(e.field),op:Wg(e.op),value:e.value}}}(e):e instanceof ff?function(e){const t=e.getFilters().map((e=>Qg(e)));return 1===t.length?t[0]:{compositeFilter:{op:Hg(e.op),filters:t}}}(e):zu()}function Yg(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function Xg(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class $g{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:sh.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:sh.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Id.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new $g(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $g(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $g(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $g(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Jg{constructor(e){this.ct=e}}function Zg(e,t){const n=t.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:em(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())i.document=function(e,t){return{name:Ag(e,t.key),fields:t.data.value.mapValue.fields,updateTime:xg(e,t.version.toTimestamp()),createTime:xg(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:tm(t.version)};else{if(!t.isUnknownDocument())return zu();i.unknownDocument={path:n.path.toArray(),version:tm(t.version)}}return i}function em(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function tm(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function nm(e){const t=new rh(e.seconds,e.nanoseconds);return sh.fromTimestamp(t)}function im(e,t){const n=(t.baseMutations||[]).map((t=>Vg(e.ct,t)));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const i=t.mutations.map((t=>Vg(e.ct,t))),r=rh.fromMillis(t.localWriteTimeMs);return new Gp(t.batchId,r,n,i)}function rm(e){const t=nm(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?nm(e.lastLimboFreeSnapshotVersion):sh.min();let i;return i=function(e){return void 0!==e.documents}(e.query)?function(e){return Uu(1===e.documents.length),Wf(Uf(Ng(e.documents[0])))}(e.query):function(e){return Wf(jg(e))}(e.query),new $g(i,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Id.fromBase64String(e.resumeToken))}function sm(e,t){const n=tm(t.snapshotVersion),i=tm(t.lastLimboFreeSnapshotVersion);let r;r=Mf(t.target)?zg(e.ct,t.target):Ug(e.ct,t.target).ut;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Nf(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function om(e){const t=jg({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gf(t,t.limit,"L"):t}function am(e,t){return new Yp(t.largestBatchId,Vg(e.ct,t.overlayMutation))}function lm(e,t){const n=t.path.lastSegment();return[e,zh(t.path.popLast()),n]}function cm(e,t,n,i){return{indexId:e,uid:t,sequenceNumber:n,readTime:tm(i.readTime),documentKey:zh(i.documentKey.path),largestBatchId:i.largestBatchId}}class um{getBundleMetadata(e,t){return hm(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:nm(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return hm(e).put(function(e){return{bundleId:e.id,createTime:tm(Ig(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return dm(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:om(e.bundledQuery),readTime:nm(e.readTime)}}(e)}))}saveNamedQuery(e,t){return dm(e).put(function(e){return{name:e.name,readTime:tm(Ig(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function hm(e){return fd(e,"bundles")}function dm(e){return fd(e,"namedQueries")}class fm{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new fm(e,n)}getOverlay(e,t){return pm(e).get(lm(this.userId,t)).next((e=>e?am(this.serializer,e):null))}getOverlays(e,t){const n=ap();return kh.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const i=[];return n.forEach(((n,r)=>{const s=new Yp(t,r);i.push(this.ht(e,s))})),kh.waitFor(i)}removeOverlaysForBatchId(e,t,n){const i=new Set;t.forEach((e=>i.add(zh(e.getCollectionPath()))));const r=[];return i.forEach((t=>{const i=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);r.push(pm(e).H("collectionPathOverlayIndex",i))})),kh.waitFor(r)}getOverlaysForCollection(e,t,n){const i=ap(),r=zh(t),s=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return pm(e).W("collectionPathOverlayIndex",s).next((e=>{for(const t of e){const e=am(this.serializer,t);i.set(e.getKey(),e)}return i}))}getOverlaysForCollectionGroup(e,t,n,i){const r=ap();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return pm(e).Y({index:"collectionGroupOverlayIndex",range:o},((e,t,n)=>{const o=am(this.serializer,t);r.size()<i||o.largestBatchId===s?(r.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>r))}ht(e,t){return pm(e).put(function(e,t,n){const[i,r,s]=lm(t,n.mutation.key);return{userId:t,collectionPath:r,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Fg(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function pm(e){return fd(e,"documentOverlays")}class gm{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(Cd(e.integerValue));else if("doubleValue"in e){const n=Cd(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),Fh(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At("".concat(n.seconds||"")),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(Ad(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?$d(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):zu()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const i of Object.keys(n))this.Rt(i,t),this.It(n[i],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const i of n)this.It(i,t)}gt(e,t){this.Et(t,37),uh.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function mm(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function ym(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const i=mm(255&e[n]);if(t+=i,8!==i)break}return t}(e);return Math.ceil(t/8)}gm.bt=new gm;class vm{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Lt(e){const t=this.Bt(e),n=ym(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=255&t[i]}qt(e){const t=this.Bt(e),n=ym(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let i=t.length-n;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Bt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let i=1;i<t.length;++i)t[i]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class bm{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Lt(e)}Tt(){this.Gt.Qt()}}class wm{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class _m{constructor(){this.Gt=new vm,this.zt=new bm(this.Gt),this.jt=new wm(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}class xm{constructor(e,t,n,i){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=i}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new xm(this.indexId,this.documentKey,this.arrayValue,n)}}function km(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Sm(e.arrayValue,t.arrayValue),0!==n?n:(n=Sm(e.directionalValue,t.directionalValue),0!==n?n:uh.comparator(e.documentKey,t.documentKey)))}function Sm(e,t){for(let n=0;n<e.length&&n<t.length;++n){const i=e[n]-t[n];if(0!==i)return i}return e.length-t.length}class Im{constructor(e){this.Yt=new wd(((e,t)=>ch.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(Uu(e.collectionGroup===this.collectionId),this.en)return!1;const t=dh(e);if(void 0!==t&&!this.nn(t))return!1;const n=fh(e);let i=new Set,r=0,s=0;for(;r<n.length&&this.nn(n[r]);++r)i=i.add(n[r].fieldPath.canonicalString());if(r===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!i.has(e.field.canonicalString())){const t=n[r];if(!this.rn(e,t)||!this.sn(this.Zt[s++],t))return!1}++r}for(;r<n.length;++r){const e=n[r];if(s>=this.Zt.length||!this.sn(this.Zt[s++],e))return!1}return!0}on(){if(this.en)return null;let e=new wd(ch.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ph(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ph(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ph(n.field,"asc"===n.dir?0:1)));return new hh(hh.UNKNOWN_ID,this.collectionId,t,gh.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Em(e){var t,n;if(Uu(e instanceof df||e instanceof ff),e instanceof df){if(e instanceof Tf){const i=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>df.create(e.field,"==",t))))||[];return ff.create(i,"or")}return e}const i=e.filters.map((e=>Em(e)));return ff.create(i,e.op)}function Tm(e){if(0===e.getFilters().length)return[];const t=Dm(Em(e));return Uu(Pm(t)),Cm(t)||Am(t)?[t]:t.getFilters()}function Cm(e){return e instanceof df}function Am(e){return e instanceof ff&&mf(e)}function Pm(e){return Cm(e)||Am(e)||function(e){if(e instanceof ff&&gf(e)){for(const t of e.getFilters())if(!Cm(t)&&!Am(t))return!1;return!0}return!1}(e)}function Dm(e){if(Uu(e instanceof df||e instanceof ff),e instanceof df)return e;if(1===e.filters.length)return Dm(e.filters[0]);const t=e.filters.map((e=>Dm(e)));let n=ff.create(t,e.op);return n=Mm(n),Pm(n)?n:(Uu(n instanceof ff),Uu(pf(n)),Uu(n.filters.length>1),n.filters.reduce(((e,t)=>Nm(e,t))))}function Nm(e,t){let n;return Uu(e instanceof df||e instanceof ff),Uu(t instanceof df||t instanceof ff),n=e instanceof df?t instanceof df?function(e,t){return ff.create([e,t],"and")}(e,t):Om(e,t):t instanceof df?Om(t,e):function(e,t){if(Uu(e.filters.length>0&&t.filters.length>0),pf(e)&&pf(t))return wf(e,t.getFilters());const n=gf(e)?e:t,i=gf(e)?t:e,r=n.filters.map((e=>Nm(e,i)));return ff.create(r,"or")}(e,t),Mm(n)}function Om(e,t){if(pf(t))return wf(t,e.getFilters());{const n=t.filters.map((t=>Nm(e,t)));return ff.create(n,"or")}}function Mm(e){if(Uu(e instanceof df||e instanceof ff),e instanceof df)return e;const t=e.getFilters();if(1===t.length)return Mm(t[0]);if(yf(e))return e;const n=t.map((e=>Mm(e))),i=[];return n.forEach((t=>{t instanceof df?i.push(t):t instanceof ff&&(t.op===e.op?i.push(...t.filters):i.push(t))})),1===i.length?i[0]:ff.create(i,e.op)}class Rm{constructor(){this._n=new Lm}addToCollectionParentIndex(e,t){return this._n.add(t),kh.resolve()}getCollectionParents(e,t){return kh.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return kh.resolve()}deleteFieldIndex(e,t){return kh.resolve()}deleteAllFieldIndexes(e){return kh.resolve()}createTargetIndexes(e,t){return kh.resolve()}getDocumentsMatchingTarget(e,t){return kh.resolve(null)}getIndexType(e,t){return kh.resolve(0)}getFieldIndexes(e,t){return kh.resolve([])}getNextCollectionGroupToUpdate(e){return kh.resolve(null)}getMinOffset(e,t){return kh.resolve(vh.min())}getMinOffsetFromCollectionGroup(e,t){return kh.resolve(vh.min())}updateCollectionGroup(e,t,n){return kh.resolve()}updateIndexEntries(e,t){return kh.resolve()}}class Lm{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new wd(ah.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new wd(ah.comparator)).toArray()}}const Fm=new Uint8Array(0);class Vm{constructor(e,t){this.databaseId=t,this.an=new Lm,this.un=new tp((e=>Nf(e)),((e,t)=>Of(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const r={collectionId:n,parent:zh(i)};return zm(e).put(r)}return kh.resolve()}getCollectionParents(e,t){const n=[],i=IDBKeyRange.bound([t,""],[ih(t),""],!1,!0);return zm(e).W(i).next((e=>{for(const i of e){if(i.collectionId!==t)break;n.push(Bh(i.parent))}return n}))}addFieldIndex(e,t){const n=jm(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete i.indexId;const r=n.add(i);if(t.indexState){const n=Bm(e);return r.next((e=>{n.put(cm(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return r.next()}deleteFieldIndex(e,t){const n=jm(e),i=Bm(e),r=Um(e);return n.delete(t.indexId).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=jm(e),n=Um(e),i=Bm(e);return t.H().next((()=>n.H())).next((()=>i.H()))}createTargetIndexes(e,t){return kh.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new Im(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=Um(e);let i=!0;const r=new Map;return kh.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{i&&(i=!!e),r.set(t,e)})))).next((()=>{if(i){let e=dp();const i=[];return kh.forEach(r,((r,s)=>{Ru("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((e=>"".concat(e.fieldPath,":").concat(e.kind))).join(","))}(r)," to execute ").concat(Nf(t)));const o=function(e,t){const n=dh(t);if(void 0===n)return null;for(const i of Rf(e,n.fieldPath))switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}return null}(s,r),a=function(e,t){const n=new Map;for(const i of fh(t))for(const t of Rf(e,i.fieldPath))switch(t.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,r),l=function(e,t){const n=[];let i=!0;for(const r of fh(t)){const t=0===r.kind?Lf(e,r.fieldPath,e.startAt):Ff(e,r.fieldPath,e.startAt);n.push(t.value),i&&(i=t.inclusive)}return new of(n,i)}(s,r),c=function(e,t){const n=[];let i=!0;for(const r of fh(t)){const t=0===r.kind?Ff(e,r.fieldPath,e.endAt):Lf(e,r.fieldPath,e.endAt);n.push(t.value),i&&(i=t.inclusive)}return new of(n,i)}(s,r),u=this.hn(r,s,l),h=this.hn(r,s,c),d=this.Pn(r,s,a),f=this.In(r.indexId,o,u,l.inclusive,h,c.inclusive,d);return kh.forEach(f,(r=>n.j(r,t.limit).next((t=>{t.forEach((t=>{const n=uh.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),i.push(n))}))}))))})).next((()=>i))}return kh.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:Tm(ff.create(e.filters,"and")).map((t=>Df(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,i,r,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,r.length),l=a/(null!=t?t.length:1),c=[];for(let u=0;u<a;++u){const a=t?this.Tn(t[u/l]):Fm,h=this.En(e,a,n[u%l],i),d=this.dn(e,a,r[u%l],s),f=o.map((t=>this.En(e,a,t,!0)));c.push(...this.createRange(h,d,f))}return c}En(e,t,n,i){const r=new xm(e,uh.empty(),t,n);return i?r:r.Jt()}dn(e,t,n,i){const r=new xm(e,uh.empty(),t,n);return i?r.Jt():r}ln(e,t){const n=new Im(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next((e=>{let t=null;for(const i of e)n.tn(i)&&(!t||i.fields.length>t.fields.length)&&(t=i);return t}))}getIndexType(e,t){let n=2;const i=this.cn(t);return kh.forEach(i,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new wd(ch.comparator),n=!1;for(const i of e.filters)for(const e of i.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const i of e.orderBy)i.field.isKeyField()||(t=t.add(i.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&i.length>1&&2===n?1:n))}An(e,t){const n=new _m;for(const i of fh(e)){const e=t.data.field(i.fieldPath);if(null==e)return null;const r=n.Ht(i.kind);gm.bt.Pt(e,r)}return n.Wt()}Tn(e){const t=new _m;return gm.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new _m;return gm.bt.Pt(Wd(this.databaseId,t),n.Ht(function(e){const t=fh(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let i=[];i.push(new _m);let r=0;for(const s of fh(e)){const e=n[r++];for(const n of i)if(this.Vn(t,s.fieldPath)&&Kd(e))i=this.mn(i,s,e);else{const t=n.Ht(s.kind);gm.bt.Pt(e,t)}}return this.fn(i)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const i=[...e],r=[];for(const s of n.arrayValue.values||[])for(const e of i){const n=new _m;n.seed(e.Wt()),gm.bt.Pt(s,n.Ht(t.kind)),r.push(n)}return r}Vn(e,t){return!!e.filters.find((e=>e instanceof df&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=jm(e),i=Bm(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return kh.forEach(e,(e=>i.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new gh(t.sequenceNumber,new vh(nm(t.readTime),new uh(Bh(t.documentKey)),t.largestBatchId)):gh.empty(),i=e.fields.map((e=>{let[t,n]=e;return new ph(ch.fromServerFormat(t),n)}));return new hh(e.indexId,e.collectionGroup,i,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:th(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const i=jm(e),r=Bm(e);return this.gn(e).next((e=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>kh.forEach(t,(t=>r.put(cm(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return kh.forEach(t,((t,i)=>{const r=n.get(t.collectionGroup);return(r?kh.resolve(r):this.getFieldIndexes(e,t.collectionGroup)).next((r=>(n.set(t.collectionGroup,r),kh.forEach(r,(n=>this.pn(e,t,n).next((t=>{const r=this.yn(i,n);return t.isEqual(r)?kh.resolve():this.wn(e,i,n,t,r)})))))))}))}Sn(e,t,n,i){return Um(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,i){return Um(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const i=Um(e);let r=new wd(km);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,i)=>{r=r.add(new xm(n.indexId,t,i.arrayValue,i.directionalValue))})).next((()=>r))}yn(e,t){let n=new wd(km);const i=this.An(t,e);if(null==i)return n;const r=dh(t);if(null!=r){const s=e.data.field(r.fieldPath);if(Kd(s))for(const r of s.arrayValue.values||[])n=n.add(new xm(t.indexId,e.key,this.Tn(r),i))}else n=n.add(new xm(t.indexId,e.key,Fm,i));return n}wn(e,t,n,i,r){Ru("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,i,r){const s=e.getIterator(),o=t.getIterator();let a=xd(s),l=xd(o);for(;a||l;){let e=!1,t=!1;if(a&&l){const i=n(a,l);i<0?t=!0:i>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(i(l),l=xd(o)):t?(r(a),a=xd(s)):(a=xd(s),l=xd(o))}}(i,r,km,(i=>{s.push(this.Sn(e,t,n,i))}),(i=>{s.push(this.bn(e,t,n,i))})),kh.waitFor(s)}gn(e){let t=1;return Bm(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,i)=>{i.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>km(e,t))).filter(((e,t,n)=>!t||0!==km(e,n[t-1])));const i=[];i.push(e);for(const s of n){const n=km(s,e),r=km(s,t);if(0===n)i[0]=e.Jt();else if(n>0&&r<0)i.push(s),i.push(s.Jt());else if(r>0)break}i.push(t);const r=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];const e=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Fm,[]],t=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Fm,[]];r.push(IDBKeyRange.bound(e,t))}return r}Dn(e,t){return km(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(qm)}getMinOffset(e,t){return kh.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||zu())))).next(qm)}}function zm(e){return fd(e,"collectionParents")}function Um(e){return fd(e,"indexEntries")}function jm(e){return fd(e,"indexConfiguration")}function Bm(e){return fd(e,"indexState")}function qm(e){Uu(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let i=1;i<e.length;i++){const r=e[i].indexState.offset;bh(r,t)<0&&(t=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new vh(t.readTime,t.documentKey,n)}const Wm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Hm{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Hm(e,Hm.DEFAULT_COLLECTION_PERCENTILE,Hm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Km(e,t,n){const i=e.store("mutations"),r=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=i.Y({range:o},((e,t,n)=>(a++,n.delete())));s.push(l.next((()=>{Uu(1===a)})));const c=[];for(const u of n.mutations){const e=Hh(t,u.key.path,n.batchId);s.push(r.delete(e)),c.push(u.key)}return kh.waitFor(s).next((()=>c))}function Gm(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw zu();t=e.noDocument}return JSON.stringify(t).length}Hm.DEFAULT_COLLECTION_PERCENTILE=10,Hm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hm.DEFAULT=new Hm(41943040,Hm.DEFAULT_COLLECTION_PERCENTILE,Hm.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hm.DISABLED=new Hm(-1,0,0);class Qm{constructor(e,t,n,i){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=i,this.Cn={}}static lt(e,t,n,i){Uu(""!==e.uid);const r=e.isAuthenticated()?e.uid:"";return new Qm(r,t,n,i)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xm(e).Y({index:"userMutationsIndex",range:n},((e,n,i)=>{t=!1,i.done()})).next((()=>t))}addMutationBatch(e,t,n,i){const r=$m(e),s=Xm(e);return s.add({}).next((o=>{Uu("number"==typeof o);const a=new Gp(o,t,n,i),l=function(e,t,n){const i=n.baseMutations.map((t=>Fg(e.ct,t))),r=n.mutations.map((t=>Fg(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:r}}(this.serializer,this.userId,a),c=[];let u=new wd(((e,t)=>th(e.canonicalString(),t.canonicalString())));for(const e of i){const t=Hh(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(r.put(t,Kh))}return u.forEach((t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),kh.waitFor(c).next((()=>a))}))}lookupMutationBatch(e,t){return Xm(e).get(t).next((e=>e?(Uu(e.userId===this.userId),im(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?kh.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=IDBKeyRange.lowerBound([this.userId,n]);let r=null;return Xm(e).Y({index:"userMutationsIndex",range:i},((e,t,i)=>{t.userId===this.userId&&(Uu(t.batchId>=n),r=im(this.serializer,t)),i.done()})).next((()=>r))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Xm(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,i)=>{n=t.batchId,i.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xm(e).W("userMutationsIndex",t).next((e=>e.map((e=>im(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Wh(this.userId,t.path),i=IDBKeyRange.lowerBound(n),r=[];return $m(e).Y({range:i},((n,i,s)=>{const[o,a,l]=n,c=Bh(a);if(o===this.userId&&t.path.isEqual(c))return Xm(e).get(l).next((e=>{if(!e)throw zu();Uu(e.userId===this.userId),r.push(im(this.serializer,e))}));s.done()})).next((()=>r))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wd(th);const i=[];return t.forEach((t=>{const r=Wh(this.userId,t.path),s=IDBKeyRange.lowerBound(r),o=$m(e).Y({range:s},((e,i,r)=>{const[s,o,a]=e,l=Bh(o);s===this.userId&&t.path.isEqual(l)?n=n.add(a):r.done()}));i.push(o)})),kh.waitFor(i).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1,r=Wh(this.userId,n),s=IDBKeyRange.lowerBound(r);let o=new wd(th);return $m(e).Y({range:s},((e,t,r)=>{const[s,a,l]=e,c=Bh(a);s===this.userId&&n.isPrefixOf(c)?c.length===i&&(o=o.add(l)):r.done()})).next((()=>this.Fn(e,o)))}Fn(e,t){const n=[],i=[];return t.forEach((t=>{i.push(Xm(e).get(t).next((e=>{if(null===e)throw zu();Uu(e.userId===this.userId),n.push(im(this.serializer,e))})))})),kh.waitFor(i).next((()=>n))}removeMutationBatch(e,t){return Km(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),kh.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return kh.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),i=[];return $m(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=Bh(e[1]);i.push(t)}else n.done()})).next((()=>{Uu(0===i.length)}))}))}containsKey(e,t){return Ym(e,this.userId,t)}xn(e){return Jm(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Ym(e,t,n){const i=Wh(t,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return $m(e).Y({range:s,J:!0},((e,n,i)=>{const[s,a,l]=e;s===t&&a===r&&(o=!0),i.done()})).next((()=>o))}function Xm(e){return fd(e,"mutations")}function $m(e){return fd(e,"documentMutations")}function Jm(e){return fd(e,"mutationQueues")}class Zm{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new Zm(0)}static Ln(){return new Zm(-1)}}class ey{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Bn(e).next((t=>{const n=new Zm(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Bn(e).next((e=>sh.fromTimestamp(new rh(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Bn(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Bn(e).next((i=>(i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.kn(e,i))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Bn(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>ty(e).delete(t.targetId))).next((()=>this.Bn(e))).next((t=>(Uu(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let i=0;const r=[];return ty(e).Y(((s,o)=>{const a=rm(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(i++,r.push(this.removeTargetData(e,a)))})).next((()=>kh.waitFor(r))).next((()=>i))}forEachTarget(e,t){return ty(e).Y(((e,n)=>{const i=rm(n);t(i)}))}Bn(e){return ny(e).get("targetGlobalKey").next((e=>(Uu(null!==e),e)))}kn(e,t){return ny(e).put("targetGlobalKey",t)}qn(e,t){return ty(e).put(sm(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Bn(e).next((e=>e.targetCount))}getTargetData(e,t){const n=Nf(t),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let r=null;return ty(e).Y({range:i,index:"queryTargetsIndex"},((e,n,i)=>{const s=rm(n);Of(t,s.target)&&(r=s,i.done())})).next((()=>r))}addMatchingKeys(e,t,n){const i=[],r=iy(e);return t.forEach((t=>{const s=zh(t.path);i.push(r.put({targetId:n,path:s})),i.push(this.referenceDelegate.addReference(e,n,t))})),kh.waitFor(i)}removeMatchingKeys(e,t,n){const i=iy(e);return kh.forEach(t,(t=>{const r=zh(t.path);return kh.waitFor([i.delete([n,r]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=iy(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),i=iy(e);let r=dp();return i.Y({range:n,J:!0},((e,t,n)=>{const i=Bh(e[1]),s=new uh(i);r=r.add(s)})).next((()=>r))}containsKey(e,t){const n=zh(t.path),i=IDBKeyRange.bound([n],[ih(n)],!1,!0);let r=0;return iy(e).Y({index:"documentTargetsIndex",J:!0,range:i},((e,t,n)=>{let[i,s]=e;0!==i&&(r++,n.done())})).next((()=>r>0))}_t(e,t){return ty(e).get(t).next((e=>e?rm(e):null))}}function ty(e){return fd(e,"targets")}function ny(e){return fd(e,"targetGlobal")}function iy(e){return fd(e,"targetDocuments")}function ry(e,t){let[n,i]=e,[r,s]=t;const o=th(n,r);return 0===o?th(i,s):o}class sy{constructor(e){this.Kn=e,this.buffer=new wd(ry),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ry(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oy{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){Ru("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ch(e)?Ru("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await xh(e)}await this.zn(3e5)}))}}class ay{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return kh.resolve(Rh._e);const n=new sy(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ru("LruGarbageCollector","Garbage collection skipped; disabled"),kh.resolve(Wm)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ru("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Wm):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,i,r,s,o,a,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(Ru("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),i=this.params.maximumSequenceNumbersToCollect):i=t,s=Date.now(),this.nthSequenceNumber(e,i)))).next((i=>(n=i,o=Date.now(),this.removeTargets(e,n,t)))).next((t=>(r=t,a=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),Mu()<=U.DEBUG&&Ru("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(i," in ")+(o-s)+"ms\n"+"\tRemoved ".concat(r," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),kh.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:e}))))}}function ly(e,t){return new ay(e,t)}class cy{constructor(e,t){this.db=e,this.garbageCollector=ly(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return uy(e,n)}removeReference(e,t,n){return uy(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return uy(e,t)}er(e,t){return function(e,t){let n=!1;return Jm(e).Z((i=>Ym(e,i,t).next((e=>(e&&(n=!0),kh.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this.Xn(e,((s,o)=>{if(o<=t){const t=this.er(e,s).next((t=>{if(!t)return r++,n.getEntry(e,s).next((()=>(n.removeEntry(s,sh.min()),iy(e).delete(function(e){return[0,zh(e.path)]}(s)))))}));i.push(t)}})).next((()=>kh.waitFor(i))).next((()=>n.apply(e))).next((()=>r))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return uy(e,t)}Xn(e,t){const n=iy(e);let i,r=Rh._e;return n.Y({index:"documentTargetsIndex"},((e,n)=>{let[s,o]=e,{path:a,sequenceNumber:l}=n;0===s?(r!==Rh._e&&t(new uh(Bh(i)),r),r=l,i=a):r=Rh._e})).next((()=>{r!==Rh._e&&t(new uh(Bh(i)),r)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function uy(e,t){return iy(e).put(function(e,t){return{targetId:0,path:zh(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class hy{constructor(){this.changes=new tp((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,sf.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?kh.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dy{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return my(e).put(n)}removeEntry(e,t,n){return my(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],em(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=sf.newInvalidDocument(t);return my(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(yy(t))},((e,i)=>{n=this.nr(t,i)})).next((()=>n))}rr(e,t){let n={size:0,document:sf.newInvalidDocument(t)};return my(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(yy(t))},((e,i)=>{n={document:this.nr(t,i),size:Gm(i)}})).next((()=>n))}getEntries(e,t){let n=ip();return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i)})).next((()=>n))}sr(e,t){let n=ip(),i=new yd(uh.comparator);return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r),i=i.insert(e,Gm(t))})).next((()=>({documents:n,_r:i})))}ir(e,t,n){if(t.isEmpty())return kh.resolve();let i=new wd(by);t.forEach((e=>i=i.add(e)));const r=IDBKeyRange.bound(yy(i.first()),yy(i.last())),s=i.getIterator();let o=s.getNext();return my(e).Y({index:"documentKeyIndex",range:r},((e,t,i)=>{const r=uh.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&by(o,r)<0;)n(o,null),o=s.getNext();o&&o.isEqual(r)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?i.U(yy(o)):i.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(e,t,n,i,r){const s=t.path,o=[s.popLast().toArray(),s.lastSegment(),em(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return my(e).W(IDBKeyRange.bound(o,a,!0)).next((e=>{null==r||r.incrementDocumentReadCount(e.length);let n=ip();for(const r of e){const e=this.nr(uh.fromSegments(r.prefixPath.concat(r.collectionGroup,r.documentId)),r);e.isFoundDocument()&&($f(t,e)||i.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,i){let r=ip();const s=vy(t,n),o=vy(t,vh.max());return my(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((e,t,n)=>{const s=this.nr(uh.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);r=r.insert(s.key,s),r.size===i&&n.done()})).next((()=>r))}newChangeBuffer(e){return new py(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return gy(e).get("remoteDocumentGlobalKey").next((e=>(Uu(!!e),e)))}tr(e,t){return gy(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Lg(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=uh.fromSegments(t.noDocument.path),i=nm(t.noDocument.readTime);n=sf.newNoDocument(e,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return zu();{const e=uh.fromSegments(t.unknownDocument.path),i=nm(t.unknownDocument.version);n=sf.newUnknownDocument(e,i)}}return t.readTime&&n.setReadTime(function(e){const t=new rh(e[0],e[1]);return sh.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(sh.min()))return e}return sf.newInvalidDocument(e)}}function fy(e){return new dy(e)}class py extends hy{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new tp((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,i=new wd(((e,t)=>th(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((r,s)=>{const o=this.ur.get(r);if(t.push(this.ar.removeEntry(e,r,o.readTime)),s.isValidDocument()){const a=Zg(this.ar.serializer,s);i=i.add(r.path.popLast());const l=Gm(a);n+=l-o.size,t.push(this.ar.addEntry(e,r,a))}else if(n-=o.size,this.trackRemovals){const n=Zg(this.ar.serializer,s.convertToNoDocument(sh.min()));t.push(this.ar.addEntry(e,r,n))}})),i.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),kh.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((e=>{let{documents:t,_r:n}=e;return n.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t}))}}function gy(e){return fd(e,"remoteDocumentGlobal")}function my(e){return fd(e,"remoteDocumentsV14")}function yy(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function vy(e,t){const n=t.documentKey.path.toArray();return[e,em(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function by(e,t){const n=e.path.toArray(),i=t.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=th(n[s],i[s]),r)return r;return r=th(n.length,i.length),r||(r=th(n[n.length-2],i[i.length-2]),r||th(n[n.length-1],i[i.length-1]))}class wy{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class _y{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((i=>(n=i,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&Fp(n.mutation,e,kd.empty(),rh.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,dp()).next((()=>t))))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dp();const i=ap();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,n).next((e=>{let t=sp();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=ap();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,dp())))}populateOverlays(e,t,n){const i=[];return n.forEach((e=>{t.has(e)||i.push(e)})),this.documentOverlayCache.getOverlays(e,i).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,i){let r=ip();const s=cp(),o=cp();return t.forEach(((e,t)=>{const o=n.get(t.key);i.has(t.key)&&(void 0===o||o.mutation instanceof jp)?r=r.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),Fp(o.mutation,t,o.mutation.getFieldMask(),rh.now())):s.set(t.key,kd.empty())})),this.recalculateAndSaveOverlays(e,r).next((e=>(e.forEach(((e,t)=>s.set(e,t))),t.forEach(((e,t)=>{var n;return o.set(e,new wy(t,null!==(n=s.get(e))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(e,t){const n=cp();let i=new yd(((e,t)=>e-t)),r=dp();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const r of e)r.keys().forEach((e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||kd.empty();o=r.applyToLocalView(s,o),n.set(e,o);const a=(i.get(r.batchId)||dp()).add(e);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=lp();l.forEach((e=>{if(!r.has(e)){const i=Rp(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}})),s.push(this.documentOverlayCache.saveOverlays(e,a,c))}return kh.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return uh.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bf(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):kh.resolve(ap());let o=-1,a=r;return s.next((t=>kh.forEach(t,((t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(t)?kh.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{a=a.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,r))).next((()=>this.computeViews(e,a,t,dp()))).next((e=>({batchId:o,changes:op(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new uh(t)).next((e=>{let t=sp();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=sp();return this.indexManager.getCollectionParents(e,r).next((o=>kh.forEach(o,(o=>{const a=function(e,t){return new Vf(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(r));return this.getDocumentsMatchingCollectionQuery(e,a,n,i).next((e=>{e.forEach(((e,t)=>{s=s.insert(e,t)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i)))).next((e=>{r.forEach(((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,sf.newInvalidDocument(i)))}));let n=sp();return e.forEach(((e,i)=>{const s=r.get(e);void 0!==s&&Fp(s.mutation,i,kd.empty(),rh.now()),$f(t,i)&&(n=n.insert(e,i))})),n}))}}class xy{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return kh.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ig(e.createTime)}}(t)),kh.resolve()}getNamedQuery(e,t){return kh.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:om(e.bundledQuery),readTime:Ig(e.readTime)}}(t)),kh.resolve()}}class ky{constructor(){this.overlays=new yd(uh.comparator),this.hr=new Map}getOverlay(e,t){return kh.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ap();return kh.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,i)=>{this.ht(e,t,i)})),kh.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),kh.resolve()}getOverlaysForCollection(e,t,n){const i=ap(),r=t.length+1,s=new uh(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return kh.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new yd(((e,t)=>e-t));const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=ap(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=ap(),a=r.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach(((e,t)=>o.set(e,t))),!(o.size()>=i)););return kh.resolve(o)}ht(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Yp(t,n));let r=this.hr.get(t);void 0===r&&(r=dp(),this.hr.set(t,r)),this.hr.set(t,r.add(n.key))}}class Sy{constructor(){this.Pr=new wd(Iy.Ir),this.Tr=new wd(Iy.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new Iy(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new Iy(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new uh(new ah([])),n=new Iy(t,e),i=new Iy(t,e+1),r=[];return this.Tr.forEachInRange([n,i],(e=>{this.Ar(e),r.push(e.key)})),r}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new uh(new ah([])),n=new Iy(t,e),i=new Iy(t,e+1);let r=dp();return this.Tr.forEachInRange([n,i],(e=>{r=r.add(e.key)})),r}containsKey(e){const t=new Iy(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Iy{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return uh.comparator(e.key,t.key)||th(e.pr,t.pr)}static Er(e,t){return th(e.pr,t.pr)||uh.comparator(e.key,t.key)}}class Ey{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new wd(Iy.Ir)}checkEmpty(e){return kh.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Gp(r,t,n,i);this.mutationQueue.push(s);for(const o of i)this.wr=this.wr.add(new Iy(o.key,r)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return kh.resolve(s)}lookupMutationBatch(e,t){return kh.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.br(n),r=i<0?0:i;return kh.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return kh.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return kh.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Iy(t,0),i=new Iy(t,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(e=>{const t=this.Sr(e.pr);r.push(t)})),kh.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wd(th);return t.forEach((e=>{const t=new Iy(e,0),i=new Iy(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,i],(e=>{n=n.add(e.pr)}))})),kh.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;uh.isDocumentKey(r)||(r=r.child(""));const s=new Iy(new uh(r),0);let o=new wd(th);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(o=o.add(e.pr)),!0)}),s),kh.resolve(this.Dr(o))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){Uu(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return kh.forEach(t.mutations,(i=>{const r=new Iy(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new Iy(t,0),i=this.wr.firstAfterOrEqual(n);return kh.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,kh.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ty{constructor(e){this.vr=e,this.docs=new yd(uh.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return kh.resolve(n?n.document.mutableCopy():sf.newInvalidDocument(t))}getEntries(e,t){let n=ip();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():sf.newInvalidDocument(e))})),kh.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=ip();const s=t.path,o=new uh(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||bh(yh(o),n)<=0||(i.has(o.key)||$f(t,o))&&(r=r.insert(o.key,o.mutableCopy()))}return kh.resolve(r)}getAllFromCollectionGroup(e,t,n,i){zu()}Fr(e,t){return kh.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new Cy(this)}getSize(e){return kh.resolve(this.size)}}class Cy extends hy{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?t.push(this.ar.addEntry(e,i)):this.ar.removeEntry(n)})),kh.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}class Ay{constructor(e){this.persistence=e,this.Mr=new tp((e=>Nf(e)),Of),this.lastRemoteSnapshotVersion=sh.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Sy,this.targetCount=0,this.Lr=Zm.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),kh.resolve()}getLastRemoteSnapshotVersion(e){return kh.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return kh.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),kh.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),kh.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Lr=new Zm(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,kh.resolve()}updateTargetData(e,t){return this.qn(t),kh.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,kh.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(e,o.targetId)),i++)})),kh.waitFor(r).next((()=>i))}getTargetCount(e){return kh.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return kh.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),kh.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach((t=>{r.push(i.markPotentiallyOrphaned(e,t))})),kh.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),kh.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return kh.resolve(n)}containsKey(e,t){return kh.resolve(this.Nr.containsKey(t))}}class Py{constructor(e,t){this.Br={},this.overlays={},this.kr=new Rh(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Ay(this),this.indexManager=new Rm,this.remoteDocumentCache=function(e){return new Ty(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new Jg(t),this.$r=new xy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ky,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Br[e.toKey()];return n||(n=new Ey(t,this.referenceDelegate),this.Br[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){Ru("MemoryPersistence","Starting transaction:",e);const i=new Dy(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((e=>this.referenceDelegate.Wr(i).next((()=>e)))).toPromise().then((e=>(i.raiseOnCommittedEvent(),e)))}Gr(e,t){return kh.or(Object.values(this.Br).map((n=>()=>n.containsKey(e,t))))}}class Dy extends _h{constructor(e){super(),this.currentSequenceNumber=e}}class Ny{constructor(e){this.persistence=e,this.zr=new Sy,this.jr=null}static Hr(e){return new Ny(e)}get Jr(){if(this.jr)return this.jr;throw zu()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),kh.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),kh.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),kh.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return kh.forEach(this.Jr,(n=>{const i=uh.fromPath(n);return this.Yr(e,i).next((e=>{e||t.removeEntry(i,sh.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return kh.or([()=>kh.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}class Oy{constructor(e){this.serializer=e}N(e,t,n,i){const r=new Sh("createOrUpgrade",t);n<1&&i>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qh,{unique:!0}),e.createObjectStore("documentMutations")}(e),My(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=kh.resolve();return n<3&&i>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),My(e)),s=s.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:sh.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(r)))),n<4&&i>=4&&(0!==n&&(s=s.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",qh,{unique:!0});const i=t.store("mutations"),r=n.map((e=>i.put(e)));return kh.waitFor(r)}))}(e,r)))),s=s.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&i>=5&&(s=s.next((()=>this.Xr(r)))),n<6&&i>=6&&(s=s.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(r))))),n<7&&i>=7&&(s=s.next((()=>this.ti(r)))),n<8&&i>=8&&(s=s.next((()=>this.ni(e,r)))),n<9&&i>=9&&(s=s.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&i>=10&&(s=s.next((()=>this.ri(r)))),n<11&&i>=11&&(s=s.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&i>=12&&(s=s.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:rd});t.createIndex("collectionPathOverlayIndex",sd,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",od,{unique:!1})}(e)}))),n<13&&i>=13&&(s=s.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:Gh});t.createIndex("documentKeyIndex",Qh),t.createIndex("collectionGroupIndex",Yh)}(e))).next((()=>this.ii(e,r))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(s=s.next((()=>this.si(e,r)))),n<15&&i>=15&&(s=s.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ed}).createIndex("sequenceNumberIndex",td,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:nd}).createIndex("documentKeyIndex",id,{unique:!1})}(e)))),s}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=Gm(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>kh.forEach(t,(t=>{const i=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",i).next((n=>kh.forEach(n,(n=>{Uu(n.userId===t.userId);const i=im(this.serializer,n);return Km(e,t.userId,i).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const i=[];return n.Y(((n,r)=>{const s=new ah(n),o=function(e){return[0,zh(e)]}(s);i.push(t.get(o).next((n=>n?kh.resolve():(n=>t.put({targetId:0,path:zh(n),sequenceNumber:e.highestListenSequenceNumber}))(s))))})).next((()=>kh.waitFor(i)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:Zh});const n=t.store("collectionParents"),i=new Lm,r=e=>{if(i.add(e)){const t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:zh(i)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new ah(e);return r(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},((e,t)=>{let[n,i,s]=e;const o=Bh(i);return r(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const i=rm(n),r=sm(this.serializer,i);return t.put(r)}))}ii(e,t){const n=t.store("remoteDocuments"),i=[];return n.Y(((e,n)=>{const r=t.store("remoteDocumentsV14"),s=function(e){return e.document?new uh(ah.fromString(e.document.name).popFirst(5)):e.noDocument?uh.fromSegments(e.noDocument.path):e.unknownDocument?uh.fromSegments(e.unknownDocument.path):zu()}(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(r.put(o))})).next((()=>kh.waitFor(i)))}si(e,t){const n=t.store("mutations"),i=fy(this.serializer),r=new Py(Ny.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let i=null!==(t=n.get(e.userId))&&void 0!==t?t:dp();im(this.serializer,e).keys().forEach((e=>i=i.add(e))),n.set(e.userId,i)})),kh.forEach(n,((e,n)=>{const s=new Du(n),o=fm.lt(this.serializer,s),a=r.getIndexManager(s),l=Qm.lt(s,this.serializer,a,r.referenceDelegate);return new _y(i,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new dd(t,Rh._e),e).next()}))}))}}function My(e){e.createObjectStore("targetDocuments",{keyPath:$h}).createIndex("documentTargetsIndex",Jh,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Xh,{unique:!0}),e.createObjectStore("targetGlobal")}const Ry="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ly{constructor(e,t,n,i,r,s,o,a,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=r,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!Ly.D())throw new qu(Bu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new cy(this,i),this.Ti=t+"main",this.serializer=new Jg(a),this.Ei=new Ih(this.Ti,this.ui,new Oy(this.serializer)),this.Qr=new ey(this.referenceDelegate,this.serializer),this.remoteDocumentCache=fy(this.serializer),this.$r=new um,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&Lu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new qu(Bu.FAILED_PRECONDITION,Ry);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new Rh(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.B((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>Vy(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(Ch(e))return Ru("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ru("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return Fy(e).get("owner").next((e=>kh.resolve(this.Si(e))))}bi(e){return Vy(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=fd(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),i=e.filter((e=>-1===n.indexOf(e)));return kh.forEach(i,(e=>t.delete(e.clientId))).next((()=>i))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?kh.resolve(!0):Fy(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new qu(Bu.FAILED_PRECONDITION,Ry);return!1}}return!(!this.networkEnabled||!this.inForeground)||Vy(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,i=this.networkEnabled===e.networkEnabled;if(t||n&&i)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&Ru("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new dd(e,Rh._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Li()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Bi(){return this.runTransaction("getActiveClients","readonly",(e=>Vy(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return Qm.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Vm(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return fm.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){Ru("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",r=function(e){return 15===e?hd:14===e?ud:13===e?cd:12===e?ld:11===e?ad:void zu()}(this.ui);let s;return this.Ei.runTransaction(e,i,r,(i=>(s=new dd(i,this.kr?this.kr.next():Rh._e),"readwrite-primary"===t?this.gi(s).next((e=>!!e||this.pi(s))).next((t=>{if(!t)throw Lu("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new qu(Bu.FAILED_PRECONDITION,wh);return n(s)})).next((e=>this.wi(s).next((()=>e)))):this.ki(s).next((()=>n(s)))))).then((e=>(s.raiseOnCommittedEvent(),e)))}ki(e){return Fy(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new qu(Bu.FAILED_PRECONDITION,Ry)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Fy(e).put("owner",t)}static D(){return Ih.D()}yi(e){const t=Fy(e);return t.get("owner").next((e=>this.Si(e)?(Ru("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):kh.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(Lu("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;w()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return Ru("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Lu("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){Lu("Failed to set zombie client id.",e)}}Li(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Fy(e){return fd(e,"owner")}function Vy(e){return fd(e,"clientMetadata")}function zy(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Uy{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=i}static Ki(e,t){let n=dp(),i=dp();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Uy(e,t.fromCache,n,i)}}class jy{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class By{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=w()?8:Ih.v(p())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.ji(e,t).next((e=>{r.result=e})).next((()=>{if(!r.result)return this.Hi(e,t,i,n).next((e=>{r.result=e}))})).next((()=>{if(r.result)return;const n=new jy;return this.Ji(e,t,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(e,t,n,i.size)}))})).next((()=>r.result))}Yi(e,t,n,i){return n.documentReadCount<this.Wi?(Mu()<=U.DEBUG&&Ru("QueryEngine","SDK will not create cache indexes for query:",Xf(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),kh.resolve()):(Mu()<=U.DEBUG&&Ru("QueryEngine","Query:",Xf(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Mu()<=U.DEBUG&&Ru("QueryEngine","The SDK decides to create cache indexes for query:",Xf(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Wf(t))):kh.resolve())}ji(e,t){if(jf(t))return kh.resolve(null);let n=Wf(t);return this.indexManager.getIndexType(e,n).next((i=>0===i?null:(null!==t.limit&&1===i&&(t=Gf(t,null,"F"),n=Wf(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((i=>{const r=dp(...i);return this.zi.getDocuments(e,r).next((i=>this.indexManager.getMinOffset(e,n).next((n=>{const s=this.Zi(t,i);return this.Xi(t,s,r,n.readTime)?this.ji(e,Gf(t,null,"F")):this.es(e,s,t,n)}))))})))))}Hi(e,t,n,i){return jf(t)||i.isEqual(sh.min())?kh.resolve(null):this.zi.getDocuments(e,n).next((r=>{const s=this.Zi(t,r);return this.Xi(t,s,n,i)?kh.resolve(null):(Mu()<=U.DEBUG&&Ru("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Xf(t)),this.es(e,s,t,mh(i,-1)).next((e=>e)))}))}Zi(e,t){let n=new wd(Zf(e));return t.forEach(((t,i)=>{$f(e,i)&&(n=n.add(i))})),n}Xi(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(e,t,n){return Mu()<=U.DEBUG&&Ru("QueryEngine","Using full collection scan to execute query:",Xf(t)),this.zi.getDocumentsMatchingQuery(e,t,vh.min(),n)}es(e,t,n,i){return this.zi.getDocumentsMatchingQuery(e,n,i).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}class qy{constructor(e,t,n,i){this.persistence=e,this.ts=t,this.serializer=i,this.ns=new yd(th),this.rs=new tp((e=>Nf(e)),Of),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new _y(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function Wy(e,t,n,i){return new qy(e,t,n,i)}async function Hy(e,t){const n=ju(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next((r=>(i=r,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const r=[],s=[];let o=dp();for(const e of i){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next((e=>({us:e,removedBatchIds:r,addedBatchIds:s})))}))}))}function Ky(e){const t=ju(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function Gy(e,t,n){let i=dp(),r=dp();return n.forEach((e=>i=i.add(e))),t.getEntries(e,i).next((e=>{let i=ip();return n.forEach(((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(sh.min())?(t.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),i=i.insert(n,s)):Ru("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:i,ls:r}}))}function Qy(e,t){const n=ju(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function Yy(e,t){const n=ju(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let i;return n.Qr.getTargetData(e,t).next((r=>r?(i=r,kh.resolve(i)):n.Qr.allocateTargetId(e).next((r=>(i=new $g(t,r,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,i).next((()=>i)))))))})).then((e=>{const i=n.ns.get(e.targetId);return(null===i||e.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function Xy(e,t,n){const i=ju(e),r=i.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(e=>i.persistence.referenceDelegate.removeTarget(e,r)))}catch(e){if(!Ch(e))throw e;Ru("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}i.ns=i.ns.remove(t),i.rs.delete(r.target)}function $y(e,t,n){const i=ju(e);let r=sh.min(),s=dp();return i.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const i=ju(e),r=i.rs.get(n);return void 0!==r?kh.resolve(i.ns.get(r)):i.Qr.getTargetData(t,n)}(i,e,Wf(t)).next((t=>{if(t)return r=t.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{s=e}))})).next((()=>i.ts.getDocumentsMatchingQuery(e,t,n?r:sh.min(),n?s:dp()))).next((e=>(ev(i,Jf(t),e),{documents:e,hs:s})))))}function Jy(e,t){const n=ju(e),i=ju(n.Qr),r=n.ns.get(t);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",(e=>i._t(e,t).next((e=>e?e.target:null))))}function Zy(e,t){const n=ju(e),i=n.ss.get(t)||sh.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,mh(i,-1),Number.MAX_SAFE_INTEGER))).then((e=>(ev(n,t,e),e)))}function ev(e,t,n){let i=e.ss.get(t)||sh.min();n.forEach(((e,t)=>{t.readTime.compareTo(i)>0&&(i=t.readTime)})),e.ss.set(t,i)}async function tv(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dp();const i=await Yy(e,Wf(om(t.bundledQuery))),r=ju(e);return r.persistence.runTransaction("Save named query","readwrite",(e=>{const s=Ig(t.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.$r.saveNamedQuery(e,t);const o=i.withResumeToken(Id.EMPTY_BYTE_STRING,s);return r.ns=r.ns.insert(o.targetId,o),r.Qr.updateTargetData(e,o).next((()=>r.Qr.removeMatchingKeysForTargetId(e,i.targetId))).next((()=>r.Qr.addMatchingKeys(e,n,i.targetId))).next((()=>r.$r.saveNamedQuery(e,t)))}))}function nv(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function iv(e,t,n){let i="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(i+="_".concat(t.uid)),i}function rv(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class sv{constructor(e,t,n,i){this.user=e,this.batchId=t,this.state=n,this.error=i}static Es(e,t,n){const i=JSON.parse(n);let r,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new qu(i.error.code,i.error.message))),s?new sv(e,t,i.state,r):(Lu("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ov{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let i,r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code,r&&(i=new qu(n.error.code,n.error.message))),r?new ov(e,n.state,i):(Lu("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class av{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let i="object"==typeof n&&n.activeTargetIds instanceof Array,r=pp();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=Vh(n.activeTargetIds[s]),r=r.add(n.activeTargetIds[s]);return i?new av(e,r):(Lu("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class lv{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new lv(t.clientId,t.onlineState):(Lu("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class cv{constructor(){this.activeTargetIds=pp()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class uv{constructor(e,t,n,i,r){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new yd(th),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.ws=nv(this.persistenceKey,this.Vs),this.Ss=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new cv),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Fs=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Bi();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(nv(this.persistenceKey,n));if(e){const t=av.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,i)=>{i.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Ls(e,"pending")}updateMutationState(e,t,n){this.Ls(e,t,n),this.Bs(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(rv(this.persistenceKey,e));if(n){const i=ov.Es(e,n);i&&(t=i.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(rv(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Bs(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ru("SharedClientState","READ",e,t),t}setItem(e,t){Ru("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ru("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(Ru("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void Lu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=Rh._e;if(null!=e)try{const n=JSON.parse(e);Uu("number"==typeof n),t=n}catch(e){Lu("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Rh._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Ls(e,t,n){const i=new sv(this.currentUser,e,t,n),r=iv(this.persistenceKey,this.currentUser,e);this.setItem(r,i.ds())}Bs(e){const t=iv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const i=rv(this.persistenceKey,e),r=new ov(e,t,n);this.setItem(i,r.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return av.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),i=Number(n[1]),r=void 0!==n[2]?n[2]:null;return sv.Es(new Du(r),i,t)}js(e,t){const n=this.Cs.exec(e),i=Number(n[1]);return ov.Es(i,t)}xs(e){return lv.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Ru("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),i=this.Ns(this.ps),r=this.Ns(n),s=[],o=[];return r.forEach((e=>{i.has(e)||s.push(e)})),i.forEach((e=>{r.has(e)||o.push(e)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=pp();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class hv{constructor(){this.no=new cv,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new cv,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class dv{io(e){}shutdown(){}}class fv{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ru("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Ru("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let pv=null;function gv(){return null===pv?pv=268435456+Math.round(2147483648*Math.random()):pv++,"0x"+pv.toString(16)}const mv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yv{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}const vv="WebChannelConnection";class bv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po="projects/".concat(n,"/databases/").concat(i),this.yo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}get wo(){return!1}So(e,t,n,i,r){const s=gv(),o=this.bo(e,t.toUriEncodedString());Ru("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(e,o,a,n).then((t=>(Ru("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t)),(t=>{throw Fu("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",o,"request:",n),t}))}vo(e,t,n,i,r,s){return this.So(e,t,n,i,r)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=mv[e];return"".concat(this.fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,i){const r=gv();return new Promise(((s,o)=>{const a=new Tu;a.setWithCredentials(!0),a.listenOnce(ku.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case xu.NO_ERROR:const t=a.getResponseJson();Ru(vv,"XHR for RPC '".concat(e,"' ").concat(r," received:"),JSON.stringify(t)),s(t);break;case xu.TIMEOUT:Ru(vv,"RPC '".concat(e,"' ").concat(r," timed out")),o(new qu(Bu.DEADLINE_EXCEEDED,"Request time out"));break;case xu.HTTP_ERROR:const n=a.getStatus();if(Ru(vv,"RPC '".concat(e,"' ").concat(r," failed with status:"),n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Bu).indexOf(t)>=0?t:Bu.UNKNOWN}(t.status);o(new qu(e,t.message))}else o(new qu(Bu.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new qu(Bu.UNAVAILABLE,"Connection failed."));break;default:zu()}}finally{Ru(vv,"RPC '".concat(e,"' ").concat(r," completed."))}}));const l=JSON.stringify(i);Ru(vv,"RPC '".concat(e,"' ").concat(r," sending request:"),i),a.send(t,"POST",l,n,15)}))}Fo(e,t,n){const i=gv(),r=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=wu(),o=_u(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Ru(vv,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(c),a);const u=s.createWebChannel(c,a);let h=!1,d=!1;const f=new yv({lo:t=>{d?Ru(vv,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(h||(Ru(vv,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),u.open(),h=!0),Ru(vv,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),u.send(t))},ho:()=>u.close()}),p=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return p(u,Eu.EventType.OPEN,(()=>{d||Ru(vv,"RPC '".concat(e,"' stream ").concat(i," transport opened."))})),p(u,Eu.EventType.CLOSE,(()=>{d||(d=!0,Ru(vv,"RPC '".concat(e,"' stream ").concat(i," transport closed")),f.Vo())})),p(u,Eu.EventType.ERROR,(t=>{d||(d=!0,Fu(vv,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),t),f.Vo(new qu(Bu.UNAVAILABLE,"The operation could not be completed")))})),p(u,Eu.EventType.MESSAGE,(t=>{var n;if(!d){const r=t.data[0];Uu(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ru(vv,"RPC '".concat(e,"' stream ").concat(i," received error:"),o);const t=o.status;let n=function(e){const t=$p[e];if(void 0!==t)return eg(t)}(t),r=o.message;void 0===n&&(n=Bu.INTERNAL,r="Unknown error status: "+t+" with message "+o.message),d=!0,f.Vo(new qu(n,r)),u.close()}else Ru(vv,"RPC '".concat(e,"' stream ").concat(i," received:"),r),f.mo(r)}})),p(o,Su.STAT_EVENT,(t=>{t.stat===Iu.PROXY?Ru(vv,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===Iu.NOPROXY&&Ru(vv,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))})),setTimeout((()=>{f.Ro()}),0),f}}function wv(){return"undefined"!=typeof window?window:null}function _v(){return"undefined"!=typeof document?document:null}function xv(e){return new wg(e,!0)}class kv{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.oi=e,this.timerId=t,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Lo=null,this.Bo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Bo),i=Math.max(0,t-n);i>0&&Ru("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Lo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Bo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}cancel(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}Qo(){return(Math.random()-.5)*this.No}}class Sv{constructor(e,t,n,i,r,s,o,a){this.oi=e,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new kv(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===Bu.RESOURCE_EXHAUSTED?(Lu(t.toString()),Lu("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===Bu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((e=>{let[n,i]=e;this.Wo===t&&this.o_(n,i)}),(t=>{e((()=>{const e=new qu(Bu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return Ru("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(Ru("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Iv extends Sv{constructor(e,t,n,i,r,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const i=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:zu()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(Uu(void 0===t||"string"==typeof t),Id.fromBase64String(t||"")):(Uu(void 0===t||t instanceof Uint8Array),Id.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?Bu.UNKNOWN:eg(e.code);return new qu(t,e.message||"")}(o);n=new dg(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const r=Pg(e,i.document.name),s=Ig(i.document.updateTime),o=i.document.createTime?Ig(i.document.createTime):sh.min(),a=new nf({mapValue:{fields:i.document.fields}}),l=sf.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new ug(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const r=Pg(e,i.document),s=i.readTime?Ig(i.readTime):sh.min(),o=sf.newNoDocument(r,s),a=i.removedTargetIds||[];n=new ug([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const r=Pg(e,i.document),s=i.removedTargetIds||[];n=new ug([],s,r,null)}else{if(!("filter"in t))return zu();{t.filter;const e=t.filter;e.targetId;const{count:i=0,unchangedNames:r}=e,s=new Xp(i,r),o=e.targetId;n=new hg(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return sh.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?sh.min():t.readTime?Ig(t.readTime):sh.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=Og(this.serializer),t.addTarget=function(e,t){let n;const i=t.target;if(n=Mf(i)?{documents:zg(e,i)}:{query:Ug(e,i).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=kg(e,t.resumeToken);const i=_g(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(sh.min())>0){n.readTime=xg(e,t.snapshotVersion.toTimestamp());const i=_g(e,t.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=Og(this.serializer),t.removeTarget=e,this.t_(t)}}class Ev extends Sv{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(Uu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(Uu(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?Ig(e.updateTime):Ig(t);return n.isEqual(sh.min())&&(n=Ig(t)),new Dp(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=Ig(e.commitTime);return this.listener.T_(n,t)}return Uu(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=Og(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>Fg(this.serializer,e)))};this.t_(t)}}class Tv extends class{}{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new qu(Bu.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((r=>{let[s,o]=r;return this.connection.So(e,Tg(t,n),i,s,o)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Bu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new qu(Bu.UNKNOWN,e.toString())}))}vo(e,t,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((s=>{let[o,a]=s;return this.connection.vo(e,Tg(t,n),i,o,a,r)})).catch((e=>{throw"FirebaseError"===e.name?(e.code===Bu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new qu(Bu.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Cv{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?(Lu(t),this.g_=!1):Ru("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}class Av{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((e=>{n.enqueueAndForget((async()=>{Vv(this)&&(Ru("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=ju(e);t.v_.add(4),await Dv(t),t.x_.set("Unknown"),t.v_.delete(4),await Pv(t)}(this))}))})),this.x_=new Cv(n,i)}}async function Pv(e){if(Vv(e))for(const t of e.F_)await t(!0)}async function Dv(e){for(const t of e.F_)await t(!1)}function Nv(e,t){const n=ju(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),Fv(n)?Lv(n):nb(n).Jo()&&Mv(n,t))}function Ov(e,t){const n=ju(e),i=nb(n);n.C_.delete(t),i.Jo()&&Rv(n,t),0===n.C_.size&&(i.Jo()?i.Xo():Vv(n)&&n.x_.set("Unknown"))}function Mv(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(sh.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}nb(e).c_(t)}function Rv(e,t){e.O_.Oe(t),nb(e).l_(t)}function Lv(e){e.O_=new pg({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),nb(e).start(),e.x_.p_()}function Fv(e){return Vv(e)&&!nb(e).Ho()&&e.C_.size>0}function Vv(e){return 0===ju(e).v_.size}function zv(e){e.O_=void 0}async function Uv(e){e.C_.forEach(((t,n)=>{Mv(e,t)}))}async function jv(e,t){zv(e),Fv(e)?(e.x_.S_(t),Lv(e)):e.x_.set("Unknown")}async function Bv(e,t,n){if(e.x_.set("Online"),t instanceof dg&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const i of t.targetIds)e.C_.has(i)&&(await e.remoteSyncer.rejectListen(i,n),e.C_.delete(i),e.O_.removeTarget(i))}(e,t)}catch(n){Ru("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await qv(e,n)}else if(t instanceof ug?e.O_.$e(t):t instanceof hg?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(sh.min()))try{const t=await Ky(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=e.C_.get(i);r&&e.C_.set(i,r.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const i=e.C_.get(t);if(!i)return;e.C_.set(t,i.withResumeToken(Id.EMPTY_BYTE_STRING,i.snapshotVersion)),Rv(e,t);const r=new $g(i.target,t,n,i.sequenceNumber);Mv(e,r)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ru("RemoteStore","Failed to raise snapshot:",t),await qv(e,t)}}async function qv(e,t,n){if(!Ch(t))throw t;e.v_.add(1),await Dv(e),e.x_.set("Offline"),n||(n=()=>Ky(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{Ru("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await Pv(e)}))}function Wv(e,t){return t().catch((n=>qv(e,n,t)))}async function Hv(e){const t=ju(e),n=ib(t);let i=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;Kv(t);)try{const e=await Qy(t.localStore,i);if(null===e){0===t.D_.length&&n.Xo();break}i=e.batchId,Gv(t,e)}catch(e){await qv(t,e)}Qv(t)&&Yv(t)}function Kv(e){return Vv(e)&&e.D_.length<10}function Gv(e,t){e.D_.push(t);const n=ib(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function Qv(e){return Vv(e)&&!ib(e).Ho()&&e.D_.length>0}function Yv(e){ib(e).start()}async function Xv(e){ib(e).d_()}async function $v(e){const t=ib(e);for(const n of e.D_)t.I_(n.mutations)}async function Jv(e,t,n){const i=e.D_.shift(),r=Qp.from(i,t,n);await Wv(e,(()=>e.remoteSyncer.applySuccessfulWrite(r))),await Hv(e)}async function Zv(e,t){t&&ib(e).P_&&await async function(e,t){if(function(e){return Zp(e)&&e!==Bu.ABORTED}(t.code)){const n=e.D_.shift();ib(e).Zo(),await Wv(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await Hv(e)}}(e,t),Qv(e)&&Yv(e)}async function eb(e,t){const n=ju(e);n.asyncQueue.verifyOperationInProgress(),Ru("RemoteStore","RemoteStore received new credentials");const i=Vv(n);n.v_.add(3),await Dv(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await Pv(n)}async function tb(e,t){const n=ju(e);t?(n.v_.delete(2),await Pv(n)):t||(n.v_.add(2),await Dv(n),n.x_.set("Unknown"))}function nb(e){return e.N_||(e.N_=function(e,t,n){const i=ju(e);return i.R_(),new Iv(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Po:Uv.bind(null,e),To:jv.bind(null,e),u_:Bv.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),Fv(e)?Lv(e):e.x_.set("Unknown")):(await e.N_.stop(),zv(e))}))),e.N_}function ib(e){return e.L_||(e.L_=function(e,t,n){const i=ju(e);return i.R_(),new Ev(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Po:Xv.bind(null,e),To:Zv.bind(null,e),E_:$v.bind(null,e),T_:Jv.bind(null,e)}),e.F_.push((async t=>{t?(e.L_.Zo(),await Hv(e)):(await e.L_.stop(),e.D_.length>0&&(Ru("RemoteStore","Stopping write stream with ".concat(e.D_.length," pending writes")),e.D_=[]))}))),e.L_}class rb{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Wu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,o=new rb(e,t,s,i,r);return o.start(n),o}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qu(Bu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sb(e,t){if(Lu("AsyncQueue","".concat(t,": ").concat(e)),Ch(e))return new qu(Bu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class ob{constructor(e){this.comparator=e?(t,n)=>e(t,n)||uh.comparator(t.key,n.key):(e,t)=>uh.comparator(e.key,t.key),this.keyedMap=sp(),this.sortedSet=new yd(this.comparator)}static emptySet(e){return new ob(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof ob))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(!e.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new ob;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class ab{constructor(){this.B_=new yd(uh.comparator)}track(e){const t=e.doc.key,n=this.B_.get(t);n?0!==e.type&&3===n.type?this.B_=this.B_.insert(t,e):3===e.type&&1!==n.type?this.B_=this.B_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.B_=this.B_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.B_=this.B_.remove(t):1===e.type&&2===n.type?this.B_=this.B_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.B_=this.B_.insert(t,{type:2,doc:e.doc}):zu():this.B_=this.B_.insert(t,e)}k_(){const e=[];return this.B_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class lb{constructor(e,t,n,i,r,s,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,i,r){const s=[];return t.forEach((e=>{s.push({type:0,doc:e})})),new lb(e,t,ob.emptySet(t),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==n[i].type||!t[i].doc.isEqual(n[i].doc))return!1;return!0}}class cb{constructor(){this.q_=void 0,this.Q_=[]}K_(){return this.Q_.some((e=>e.U_()))}}class ub{constructor(){this.queries=new tp((e=>Yf(e)),Qf),this.onlineState="Unknown",this.W_=new Set}}async function hb(e,t){const n=ju(e);let i=3;const r=t.query;let s=n.queries.get(r);s?!s.K_()&&t.U_()&&(i=2):(s=new cb,i=t.U_()?0:1);try{switch(i){case 0:s.q_=await n.onListen(r,!0);break;case 1:s.q_=await n.onListen(r,!1);break;case 2:await n.onFirstRemoteStoreListen(r)}}catch(e){const n=sb(e,"Initialization of query '".concat(Xf(t.query),"' failed"));return void t.onError(n)}n.queries.set(r,s),s.Q_.push(t),t.G_(n.onlineState),s.q_&&t.z_(s.q_)&&gb(n)}async function db(e,t){const n=ju(e),i=t.query;let r=3;const s=n.queries.get(i);if(s){const e=s.Q_.indexOf(t);e>=0&&(s.Q_.splice(e,1),0===s.Q_.length?r=t.U_()?0:1:!s.K_()&&t.U_()&&(r=2))}switch(r){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function fb(e,t){const n=ju(e);let i=!1;for(const r of t){const e=r.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.z_(r)&&(i=!0);t.q_=r}}i&&gb(n)}function pb(e,t,n){const i=ju(e),r=i.queries.get(t);if(r)for(const s of r.Q_)s.onError(n);i.queries.delete(t)}function gb(e){e.W_.forEach((e=>{e.next()}))}var mb,yb;(yb=mb||(mb={})).j_="default",yb.Cache="cache";class vb{constructor(e,t,n){this.query=e,this.H_=t,this.J_=!1,this.Y_=null,this.onlineState="Unknown",this.options=n||{}}z_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new lb(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.J_?this.Z_(e)&&(this.H_.next(e),t=!0):this.X_(e,this.onlineState)&&(this.ea(e),t=!0),this.Y_=e,t}onError(e){this.H_.error(e)}G_(e){this.onlineState=e;let t=!1;return this.Y_&&!this.J_&&this.X_(this.Y_,e)&&(this.ea(this.Y_),t=!0),t}X_(e,t){if(!e.fromCache)return!0;if(!this.U_())return!0;const n="Offline"!==t;return(!this.options.ta||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Z_(e){if(e.docChanges.length>0)return!0;const t=this.Y_&&this.Y_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ea(e){e=lb.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.J_=!0,this.H_.next(e)}U_(){return this.options.source!==mb.Cache}}class bb{constructor(e,t){this.na=e,this.byteLength=t}ra(){return"metadata"in this.na}}class wb{constructor(e){this.serializer=e}Ps(e){return Pg(this.serializer,e)}Is(e){return e.metadata.exists?Lg(this.serializer,e.document,!1):sf.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Ig(e)}}class _b{constructor(e,t,n){this.ia=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xb(e)}sa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.na.namedQuery)this.queries.push(e.na.namedQuery);else if(e.na.documentMetadata){this.documents.push({metadata:e.na.documentMetadata}),e.na.documentMetadata.exists||++t;const n=ah.fromString(e.na.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.na.document&&(this.documents[this.documents.length-1].document=e.na.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}oa(e){const t=new Map,n=new wb(this.serializer);for(const i of e)if(i.metadata.queries){const e=n.Ps(i.metadata.name);for(const n of i.metadata.queries){const i=(t.get(n)||dp()).add(e);t.set(n,i)}}return t}async complete(){const e=await async function(e,t,n,i){const r=ju(e);let s=dp(),o=ip();for(const c of n){const e=t.Ps(c.metadata.name);c.document&&(s=s.add(e));const n=t.Is(c);n.setReadTime(t.Ts(c.metadata.readTime)),o=o.insert(e,n)}const a=r.os.newChangeBuffer({trackRemovals:!0}),l=await Yy(r,function(e){return Wf(Uf(ah.fromString("__bundle__/docs/".concat(e))))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",(e=>Gy(e,a,o).next((t=>(a.apply(e),t))).next((t=>r.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>r.Qr.addMatchingKeys(e,s,l.targetId))).next((()=>r.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new wb(this.serializer),this.documents,this.ia.id),t=this.oa(this.documents);for(const n of this.queries)await tv(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,_a:this.collectionGroups,aa:e}}}function xb(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class kb{constructor(e){this.key=e}}class Sb{constructor(e){this.key=e}}class Ib{constructor(e,t){this.query=e,this.ua=t,this.ca=null,this.hasCachedResults=!1,this.current=!1,this.la=dp(),this.mutatedKeys=dp(),this.ha=Zf(e),this.Pa=new ob(this.ha)}get Ia(){return this.ua}Ta(e,t){const n=t?t.Ea:new ab,i=t?t.Pa:this.Pa;let r=t?t.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((e,t)=>{const c=i.get(e),u=$f(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.da(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.ha(u,a)>0||l&&this.ha(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(s=s.add(u),r=d?r.add(e):r.delete(e)):(s=s.delete(e),r=r.delete(e)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),r=r.delete(e.key),n.track({type:1,doc:e})}return{Pa:s,Ea:n,Xi:o,mutatedKeys:r}}da(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,i){const r=this.Pa;this.Pa=e.Pa,this.mutatedKeys=e.mutatedKeys;const s=e.Ea.k_();s.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zu()}};return n(e)-n(t)}(e.type,t.type)||this.ha(e.doc,t.doc))),this.Aa(n),i=null!=i&&i;const o=t&&!i?this.Ra():[],a=0===this.la.size&&this.current&&!i?1:0,l=a!==this.ca;return this.ca=a,0!==s.length||l?{snapshot:new lb(this.query,e.Pa,r,s,e.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),Va:o}:{Va:o}}G_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Pa:this.Pa,Ea:new ab,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{Va:[]}}ma(e){return!this.ua.has(e)&&!!this.Pa.has(e)&&!this.Pa.get(e).hasLocalMutations}Aa(e){e&&(e.addedDocuments.forEach((e=>this.ua=this.ua.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.ua=this.ua.delete(e))),this.current=e.current)}Ra(){if(!this.current)return[];const e=this.la;this.la=dp(),this.Pa.forEach((e=>{this.ma(e.key)&&(this.la=this.la.add(e.key))}));const t=[];return e.forEach((e=>{this.la.has(e)||t.push(new Sb(e))})),this.la.forEach((n=>{e.has(n)||t.push(new kb(n))})),t}fa(e){this.ua=e.hs,this.la=dp();const t=this.Ta(e.documents);return this.applyChanges(t,!0)}ga(){return lb.fromInitialDocuments(this.query,this.Pa,this.mutatedKeys,0===this.ca,this.hasCachedResults)}}class Eb{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Tb{constructor(e){this.key=e,this.pa=!1}}class Cb{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.ya={},this.wa=new tp((e=>Yf(e)),Qf),this.Sa=new Map,this.ba=new Set,this.Da=new yd(uh.comparator),this.Ca=new Map,this.va=new Sy,this.Fa={},this.Ma=new Map,this.xa=Zm.Ln(),this.onlineState="Unknown",this.Oa=void 0}get isPrimaryClient(){return!0===this.Oa}}async function Ab(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=rw(e);let r;const s=i.wa.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ga()):r=await Db(i,t,n,!0),r}async function Pb(e,t){const n=rw(e);await Db(n,t,!0,!1)}async function Db(e,t,n,i){const r=await Yy(e.localStore,Wf(t)),s=r.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return i&&(a=await Nb(e,t,s,"current"===o,r.resumeToken)),e.isPrimaryClient&&n&&Nv(e.remoteStore,r),a}async function Nb(e,t,n,i,r){e.Na=(t,n,i)=>async function(e,t,n,i){let r=t.view.Ta(n);r.Xi&&(r=await $y(e.localStore,t.query,!1).then((e=>{let{documents:n}=e;return t.view.Ta(n,r)})));const s=i&&i.targetChanges.get(t.targetId),o=i&&null!=i.targetMismatches.get(t.targetId),a=t.view.applyChanges(r,e.isPrimaryClient,s,o);return Wb(e,t.targetId,a.Va),a.snapshot}(e,t,n,i);const s=await $y(e.localStore,t,!0),o=new Ib(t,s.hs),a=o.Ta(s.documents),l=cg.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==e.onlineState,r),c=o.applyChanges(a,e.isPrimaryClient,l);Wb(e,n,c.Va);const u=new Eb(t,n,o);return e.wa.set(t,u),e.Sa.has(n)?e.Sa.get(n).push(t):e.Sa.set(n,[t]),c.snapshot}async function Ob(e,t,n){const i=ju(e),r=i.wa.get(t),s=i.Sa.get(r.targetId);if(s.length>1)return i.Sa.set(r.targetId,s.filter((e=>!Qf(e,t)))),void i.wa.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Xy(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),n&&Ov(i.remoteStore,r.targetId),Bb(i,r.targetId)})).catch(xh)):(Bb(i,r.targetId),await Xy(i.localStore,r.targetId,!0))}async function Mb(e,t){const n=ju(e),i=n.wa.get(t),r=n.Sa.get(i.targetId);n.isPrimaryClient&&1===r.length&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Ov(n.remoteStore,i.targetId))}async function Rb(e,t){const n=ju(e);try{const e=await function(e,t){const n=ju(e),i=t.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const o=[];t.targetChanges.forEach(((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(e,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(e,s.addedDocuments,a))));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(Id.EMPTY_BYTE_STRING,sh.min()).withLastLimboFreeSnapshotVersion(sh.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&o.push(n.Qr.updateTargetData(e,c))}));let a=ip(),l=dp();if(t.documentUpdates.forEach((i=>{t.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,i))})),o.push(Gy(e,s,t.documentUpdates).next((e=>{a=e.cs,l=e.ls}))),!i.isEqual(sh.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,i)));o.push(t)}return kh.waitFor(o).next((()=>s.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,a,l))).next((()=>a))})).then((e=>(n.ns=r,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const i=n.Ca.get(t);i&&(Uu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?i.pa=!0:e.modifiedDocuments.size>0?Uu(i.pa):e.removedDocuments.size>0&&(Uu(i.pa),i.pa=!1))})),await Gb(n,e,t)}catch(e){await xh(e)}}function Lb(e,t,n){const i=ju(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.wa.forEach(((n,i)=>{const r=i.view.G_(t);r.snapshot&&e.push(r.snapshot)})),function(e,t){const n=ju(e);n.onlineState=t;let i=!1;n.queries.forEach(((e,n)=>{for(const r of n.Q_)r.G_(t)&&(i=!0)})),i&&gb(n)}(i.eventManager,t),e.length&&i.ya.u_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Fb(e,t,n){const i=ju(e);i.sharedClientState.updateQueryState(t,"rejected",n);const r=i.Ca.get(t),s=r&&r.key;if(s){let e=new yd(uh.comparator);e=e.insert(s,sf.newNoDocument(s,sh.min()));const n=dp().add(s),r=new lg(sh.min(),new Map,new yd(th),e,n);await Rb(i,r),i.Da=i.Da.remove(s),i.Ca.delete(t),Kb(i)}else await Xy(i.localStore,t,!1).then((()=>Bb(i,t,n))).catch(xh)}async function Vb(e,t){const n=ju(e),i=t.batch.batchId;try{const e=await function(e,t){const n=ju(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const i=t.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let o=kh.resolve();return s.forEach((e=>{o=o.next((()=>i.getEntry(t,e))).next((t=>{const s=n.docVersions.get(e);Uu(null!==s),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))}))})),o.next((()=>e.mutationQueue.removeMutationBatch(t,r)))}(n,e,t,r).next((()=>r.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=dp();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(n.localStore,t);jb(n,i,null),Ub(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Gb(n,e)}catch(e){await xh(e)}}async function zb(e,t,n){const i=ju(e);try{const e=await function(e,t){const n=ju(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(Uu(null!==t),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i))).next((()=>n.localDocuments.getDocuments(e,i)))}))}(i.localStore,t);jb(i,t,n),Ub(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Gb(i,e)}catch(n){await xh(n)}}function Ub(e,t){(e.Ma.get(t)||[]).forEach((e=>{e.resolve()})),e.Ma.delete(t)}function jb(e,t,n){const i=ju(e);let r=i.Fa[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.Fa[i.currentUser.toKey()]=r}}function Bb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const i of e.Sa.get(t))e.wa.delete(i),n&&e.ya.La(i,n);e.Sa.delete(t),e.isPrimaryClient&&e.va.Vr(t).forEach((t=>{e.va.containsKey(t)||qb(e,t)}))}function qb(e,t){e.ba.delete(t.path.canonicalString());const n=e.Da.get(t);null!==n&&(Ov(e.remoteStore,n),e.Da=e.Da.remove(t),e.Ca.delete(n),Kb(e))}function Wb(e,t,n){for(const i of n)i instanceof kb?(e.va.addReference(i.key,t),Hb(e,i)):i instanceof Sb?(Ru("SyncEngine","Document no longer in limbo: "+i.key),e.va.removeReference(i.key,t),e.va.containsKey(i.key)||qb(e,i.key)):zu()}function Hb(e,t){const n=t.key,i=n.path.canonicalString();e.Da.get(n)||e.ba.has(i)||(Ru("SyncEngine","New document in limbo: "+n),e.ba.add(i),Kb(e))}function Kb(e){for(;e.ba.size>0&&e.Da.size<e.maxConcurrentLimboResolutions;){const t=e.ba.values().next().value;e.ba.delete(t);const n=new uh(ah.fromString(t)),i=e.xa.next();e.Ca.set(i,new Tb(n)),e.Da=e.Da.insert(n,i),Nv(e.remoteStore,new $g(Wf(Uf(n.path)),i,"TargetPurposeLimboResolution",Rh._e))}}async function Gb(e,t,n){const i=ju(e),r=[],s=[],o=[];i.wa.isEmpty()||(i.wa.forEach(((e,a)=>{o.push(i.Na(a,t,n).then((e=>{if((e||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){r.push(e);const t=Uy.Ki(a.targetId,e);s.push(t)}})))})),await Promise.all(o),i.ya.u_(r),await async function(e,t){const n=ju(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>kh.forEach(t,(t=>kh.forEach(t.qi,(i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i))).next((()=>kh.forEach(t.Qi,(i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))))))}catch(e){if(!Ch(e))throw e;Ru("LocalStore","Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.ns.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(e,r)}}}(i.localStore,s))}async function Qb(e,t){const n=ju(e);if(!n.currentUser.isEqual(t)){Ru("SyncEngine","User change. New user:",t.toKey());const e=await Hy(n.localStore,t);n.currentUser=t,function(e,t){e.Ma.forEach((e=>{e.forEach((e=>{e.reject(new qu(Bu.CANCELLED,t))}))})),e.Ma.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Gb(n,e.us)}}function Yb(e,t){const n=ju(e),i=n.Ca.get(t);if(i&&i.pa)return dp().add(i.key);{let e=dp();const i=n.Sa.get(t);if(!i)return e;for(const t of i){const i=n.wa.get(t);e=e.unionWith(i.view.Ia)}return e}}async function Xb(e,t){const n=ju(e),i=await $y(n.localStore,t.query,!0),r=t.view.fa(i);return n.isPrimaryClient&&Wb(n,t.targetId,r.Va),r}async function $b(e,t){const n=ju(e);return Zy(n.localStore,t).then((e=>Gb(n,e)))}async function Jb(e,t,n,i){const r=ju(e),s=await function(e,t){const n=ju(e),i=ju(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>i.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):kh.resolve(null)))))}(r.localStore,t);null!==s?("pending"===n?await Hv(r.remoteStore):"acknowledged"===n||"rejected"===n?(jb(r,t,i||null),Ub(r,t),function(e,t){ju(ju(e).mutationQueue).Mn(t)}(r.localStore,t)):zu(),await Gb(r,s)):Ru("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Zb(e,t,n){const i=ju(e),r=[],s=[];for(const o of t){let e;const t=i.Sa.get(o);if(t&&0!==t.length){e=await Yy(i.localStore,Wf(t[0]));for(const e of t){const t=i.wa.get(e),n=await Xb(i,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Jy(i.localStore,o);e=await Yy(i.localStore,t),await Nb(i,ew(t),o,!1,e.resumeToken)}r.push(e)}return i.ya.u_(s),r}function ew(e){return zf(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function tw(e){return function(e){return ju(ju(e).persistence).Bi()}(ju(e).localStore)}async function nw(e,t,n,i){const r=ju(e);if(r.Oa)return void Ru("SyncEngine","Ignoring unexpected query state notification.");const s=r.Sa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Zy(r.localStore,Jf(s[0])),i=lg.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Id.EMPTY_BYTE_STRING);await Gb(r,e,i);break}case"rejected":await Xy(r.localStore,t,!0),Bb(r,t,i);break;default:zu()}}async function iw(e,t,n){const i=rw(e);if(i.Oa){for(const e of t){if(i.Sa.has(e)&&i.sharedClientState.isActiveQueryTarget(e)){Ru("SyncEngine","Adding an already active target "+e);continue}const t=await Jy(i.localStore,e),n=await Yy(i.localStore,t);await Nb(i,ew(t),n.targetId,!1,n.resumeToken),Nv(i.remoteStore,n)}for(const e of n)i.Sa.has(e)&&await Xy(i.localStore,e,!1).then((()=>{Ov(i.remoteStore,e),Bb(i,e)})).catch(xh)}}function rw(e){const t=ju(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Rb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Yb.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Fb.bind(null,t),t.ya.u_=fb.bind(null,t.eventManager),t.ya.La=pb.bind(null,t.eventManager),t}function sw(e){const t=ju(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Vb.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=zb.bind(null,t),t}class ow{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=xv(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Wy(this.persistence,new By,e.initialUser,this.serializer)}createPersistence(e){return new Py(Ny.Hr,this.serializer)}createSharedClientState(e){return new hv}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class aw extends ow{constructor(e,t,n){super(),this.ka=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.ka.initialize(this,e),await sw(this.ka.syncEngine),await Hv(this.ka.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return Wy(this.persistence,new By,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new oy(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new Mh(t,this.persistence);return new Oh(e.asyncQueue,n)}createPersistence(e){const t=zy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Hm.withCacheSize(this.cacheSizeBytes):Hm.DEFAULT;return new Ly(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,wv(),_v(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new hv}}class lw extends aw{constructor(e,t){super(e,t,!1),this.ka=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.ka.syncEngine;this.sharedClientState instanceof uv&&(this.sharedClientState.syncEngine={Zs:Jb.bind(null,t),Xs:nw.bind(null,t),eo:iw.bind(null,t),Bi:tw.bind(null,t),Ys:$b.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=ju(e);if(rw(n),sw(n),!0===t&&!0!==n.Oa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Zb(n,e.toArray());n.Oa=!0,await tb(n.remoteStore,!0);for(const i of t)Nv(n.remoteStore,i)}else if(!1===t&&!1!==n.Oa){const e=[];let t=Promise.resolve();n.Sa.forEach(((i,r)=>{n.sharedClientState.isLocalQueryTarget(r)?e.push(r):t=t.then((()=>(Bb(n,r),Xy(n.localStore,r,!0)))),Ov(n.remoteStore,r)})),await t,await Zb(n,e),function(e){const t=ju(e);t.Ca.forEach(((e,n)=>{Ov(t.remoteStore,n)})),t.va.mr(),t.Ca=new Map,t.Da=new yd(uh.comparator)}(n),n.Oa=!1,await tb(n.remoteStore,!1)}}(this.ka.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=wv();if(!uv.D(t))throw new qu(Bu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=zy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new uv(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class cw{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Lb(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Qb.bind(null,this.syncEngine),await tb(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new ub}createDatastore(e){const t=xv(e.databaseInfo.databaseId),n=function(e){return new bv(e)}(e.databaseInfo);return function(e,t,n,i){return new Tv(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new Av(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,(e=>Lb(this.syncEngine,e,0)),fv.D()?new fv:new dv)}createSyncEngine(e,t){return function(e,t,n,i,r,s,o){const a=new Cb(e,t,n,i,r,s);return o&&(a.Oa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=ju(e);Ru("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await Dv(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}function uw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const i={value:e.slice(n,n+t),done:!1};return n+=t,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}class hw{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.qa(this.observer.next,e)}error(e){this.observer.error?this.qa(this.observer.error,e):Lu("Uncaught Error in snapshot listener:",e.toString())}Qa(){this.muted=!0}qa(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}class dw{constructor(e,t){this.Ka=e,this.serializer=t,this.metadata=new Wu,this.buffer=new Uint8Array,this.$a=new TextDecoder("utf-8"),this.Ua().then((e=>{e&&e.ra()?this.metadata.resolve(e.na.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.na))))}),(e=>this.metadata.reject(e)))}close(){return this.Ka.cancel()}async getMetadata(){return this.metadata.promise}async Ba(){return await this.getMetadata(),this.Ua()}async Ua(){const e=await this.Wa();if(null===e)return null;const t=this.$a.decode(e),n=Number(t);isNaN(n)&&this.Ga("length string (".concat(t,") is not valid number"));const i=await this.za(n);return new bb(JSON.parse(i),e.length+n)}ja(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Wa(){for(;this.ja()<0&&!await this.Ha(););if(0===this.buffer.length)return null;const e=this.ja();e<0&&this.Ga("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async za(e){for(;this.buffer.length<e;)await this.Ha()&&this.Ga("Reached the end of bundle when more is expected.");const t=this.$a.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Ga(e){throw this.Ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ha(){const e=await this.Ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class fw{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new qu(Bu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=ju(e),i={documents:t.map((e=>Ag(n.serializer,e)))},r=await n.vo("BatchGetDocuments",n.serializer.databaseId,ah.emptyPath(),i,t.length),s=new Map;r.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){Uu(!!t.found),t.found.name,t.found.updateTime;const n=Pg(e,t.found.name),i=Ig(t.found.updateTime),r=t.found.createTime?Ig(t.found.createTime):sh.min(),s=new nf({mapValue:{fields:t.found.fields}});return sf.newFoundDocument(n,i,r,s)}(e,t):"missing"in t?function(e,t){Uu(!!t.missing),Uu(!!t.readTime);const n=Pg(e,t.missing),i=Ig(t.readTime);return sf.newNoDocument(n,i)}(e,t):zu()}(n.serializer,e);s.set(t.key.toString(),t)}));const o=[];return t.forEach((e=>{const t=s.get(e.toString());Uu(!!t),o.push(t)})),o}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=uh.fromPath(t);this.mutations.push(new Kp(n,this.precondition(n)))})),await async function(e,t){const n=ju(e),i={writes:t.map((e=>Fg(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,ah.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw zu();t=sh.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new qu(Bu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(sh.min())?Np.exists(!1):Np.updateTime(t):Np.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(sh.min()))throw new qu(Bu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Np.updateTime(t)}return Np.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class pw{constructor(e,t,n,i,r){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=i,this.deferred=r,this.Ja=n.maxAttempts,this.jo=new kv(this.asyncQueue,"transaction_retry")}Ya(){this.Ja-=1,this.Za()}Za(){this.jo.qo((async()=>{const e=new fw(this.datastore),t=this.Xa(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.eu(e)}))))})).catch((e=>{this.eu(e)}))}))}Xa(e){try{const t=this.updateFunction(e);return!Lh(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}eu(e){this.Ja>0&&this.tu(e)?(this.Ja-=1,this.asyncQueue.enqueueAndForget((()=>(this.Za(),Promise.resolve())))):this.deferred.reject(e)}tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Zp(t)}return!1}}class gw{constructor(e,t,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=Du.UNAUTHENTICATED,this.clientId=eh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{Ru("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(Ru("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new qu(Bu.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Wu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=sb(t,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function mw(e,t){e.asyncQueue.verifyOperationInProgress(),Ru("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener((async e=>{i.isEqual(e)||(await Hy(t.localStore,e),i=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function yw(e,t){e.asyncQueue.verifyOperationInProgress();const n=await bw(e);Ru("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>eb(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>eb(t.remoteStore,n))),e._onlineComponents=t}function vw(e){return"FirebaseError"===e.name?e.code===Bu.FAILED_PRECONDITION||e.code===Bu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function bw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ru("FirestoreClient","Using user provided OfflineComponentProvider");try{await mw(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!vw(n))throw n;Fu("Error using user provided cache. Falling back to memory cache: "+n),await mw(e,new ow)}}else Ru("FirestoreClient","Using default OfflineComponentProvider"),await mw(e,new ow);return e._offlineComponents}async function ww(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ru("FirestoreClient","Using user provided OnlineComponentProvider"),await yw(e,e._uninitializedComponentsProvider._online)):(Ru("FirestoreClient","Using default OnlineComponentProvider"),await yw(e,new cw))),e._onlineComponents}function _w(e){return bw(e).then((e=>e.persistence))}function xw(e){return bw(e).then((e=>e.localStore))}function kw(e){return ww(e).then((e=>e.remoteStore))}function Sw(e){return ww(e).then((e=>e.syncEngine))}function Iw(e){return ww(e).then((e=>e.datastore))}async function Ew(e){const t=await ww(e),n=t.eventManager;return n.onListen=Ab.bind(null,t.syncEngine),n.onUnlisten=Ob.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Pb.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Mb.bind(null,t.syncEngine),n}function Tw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Wu;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new hw({next:s=>{t.enqueueAndForget((()=>db(e,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new qu(Bu.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new qu(Bu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:e=>r.reject(e)}),o=new vb(Uf(n.path),s,{includeMetadataChanges:!0,ta:!0});return hb(e,o)}(await Ew(e),e.asyncQueue,t,n,i))),i.promise}function Cw(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=new Wu;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,i,r){const s=new hw({next:n=>{t.enqueueAndForget((()=>db(e,o))),n.fromCache&&"server"===i.source?r.reject(new qu(Bu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:e=>r.reject(e)}),o=new vb(n,s,{includeMetadataChanges:!0,ta:!0});return hb(e,o)}(await Ew(e),e.asyncQueue,t,n,i))),i.promise}function Aw(e,t,n,i){const r=function(e,t){let n;return n="string"==typeof e?ng().encode(e):e,function(e,t){return new dw(e,t)}(function(e,t){if(e instanceof Uint8Array)return uw(e,t);if(e instanceof ArrayBuffer)return uw(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,xv(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const i=ju(e);(async function(e,t,n){try{const i=await t.getMetadata();if(await function(e,t){const n=ju(e),i=Ig(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(i)>=0))}(e.localStore,i))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),Promise.resolve(new Set);n._updateProgress(xb(i));const r=new _b(i,e.localStore,t.serializer);let s=await t.Ba();for(;s;){const e=await r.sa(s);e&&n._updateProgress(e),s=await t.Ba()}const o=await r.complete();return await Gb(e,o.aa,void 0),await function(e,t){const n=ju(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,i),n._completeWith(o.progress),Promise.resolve(o._a)}catch(e){return Fu("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(i,t,n).then((e=>{i.sharedClientState.notifyBundleLoaded(e)}))}(await Sw(e),r,i)}))}function Pw(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Dw=new Map;function Nw(e,t,n){if(!n)throw new qu(Bu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Ow(e,t,n,i){if(!0===t&&!0===i)throw new qu(Bu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Mw(e){if(!uh.isDocumentKey(e))throw new qu(Bu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Rw(e){if(uh.isDocumentKey(e))throw new qu(Bu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Lw(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":zu()}function Fw(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new qu(Bu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lw(e);throw new qu(Bu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Vw(e,t){if(t<=0)throw new qu(Bu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class zw{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new qu(Bu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new qu(Bu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ow("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Pw(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new qu(Bu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new qu(Bu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new qu(Bu.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Uw{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zw({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new qu(Bu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new qu(Bu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zw(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Ku;switch(e.type){case"firstParty":return new Xu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new qu(Bu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Dw.get(e);t&&(Ru("ComponentProvider","Removing Datastore"),Dw.delete(e),t.terminate())}(this),Promise.resolve()}}function jw(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;const s=(e=Fw(e,Uw))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==o&&Fu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=Du.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new qu(Bu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Du(s)}e._authCredentials=new Gu(new Hu(t,n))}}class Bw{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Bw(this.firestore,e,this._query)}}class qw{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ww(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qw(this.firestore,e,this._key)}}class Ww extends Bw{constructor(e,t,n){super(e,t,Uf(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qw(this.firestore,null,new uh(e))}withConverter(e){return new Ww(this.firestore,e,this._path)}}function Hw(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=M(e),Nw("collection","path",t),e instanceof Uw){const n=ah.fromString(t,...i);return Rw(n),new Ww(e,null,n)}{if(!(e instanceof qw||e instanceof Ww))throw new qu(Bu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ah.fromString(t,...i));return Rw(n),new Ww(e.firestore,null,n)}}function Kw(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=M(e),1===arguments.length&&(t=eh.newId()),Nw("doc","path",t),e instanceof Uw){const n=ah.fromString(t,...i);return Mw(n),new qw(e,null,new uh(n))}{if(!(e instanceof qw||e instanceof Ww))throw new qu(Bu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ah.fromString(t,...i));return Mw(n),new qw(e.firestore,e instanceof Ww?e.converter:null,new uh(n))}}function Gw(e,t){return e=M(e),t=M(t),(e instanceof qw||e instanceof Ww)&&(t instanceof qw||t instanceof Ww)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Qw(e,t){return e=M(e),t=M(t),e instanceof Bw&&t instanceof Bw&&e.firestore===t.firestore&&Qf(e._query,t._query)&&e.converter===t.converter}class Yw{constructor(){this.nu=Promise.resolve(),this.ru=[],this.iu=!1,this.su=[],this.ou=null,this._u=!1,this.au=!1,this.uu=[],this.jo=new kv(this,"async_queue_retry"),this.cu=()=>{const e=_v();e&&Ru("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=_v();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.cu)}get isShuttingDown(){return this.iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.lu(),this.hu(e)}enterRestrictedMode(e){if(!this.iu){this.iu=!0,this.au=e||!1;const t=_v();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.cu)}}enqueue(e){if(this.lu(),this.iu)return new Promise((()=>{}));const t=new Wu;return this.hu((()=>this.iu&&this.au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.ru.push(e),this.Pu())))}async Pu(){if(0!==this.ru.length){try{await this.ru[0](),this.ru.shift(),this.jo.reset()}catch(e){if(!Ch(e))throw e;Ru("AsyncQueue","Operation failed with retryable error: "+e)}this.ru.length>0&&this.jo.qo((()=>this.Pu()))}}hu(e){const t=this.nu.then((()=>(this._u=!0,e().catch((e=>{this.ou=e,this._u=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Lu("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this._u=!1,e))))));return this.nu=t,t}enqueueAfterDelay(e,t,n){this.lu(),this.uu.indexOf(e)>-1&&(t=0);const i=rb.createAndSchedule(this,e,t,n,(e=>this.Iu(e)));return this.su.push(i),i}lu(){this.ou&&zu()}verifyOperationInProgress(){}async Tu(){let e;do{e=this.nu,await e}while(e!==this.nu)}Eu(e){for(const t of this.su)if(t.timerId===e)return!0;return!1}du(e){return this.Tu().then((()=>{this.su.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.su)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tu()}))}Au(e){this.uu.push(e)}Iu(e){const t=this.su.indexOf(e);this.su.splice(t,1)}}function Xw(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const i of t)if(i in n&&"function"==typeof n[i])return!0;return!1}(e,["next","error","complete"])}class $w{constructor(){this._progressObserver={},this._taskCompletionResolver=new Wu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Jw extends Uw{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new Yw,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||e_(this),this._firestoreClient.terminate()}}function Zw(e){return e._firestoreClient||e_(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function e_(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new Od(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Pw(i.experimentalLongPollingOptions),i.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._firestoreClient=new gw(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function t_(e,t,n){const i=new Wu;return e.asyncQueue.enqueue((async()=>{try{await mw(e,n),await yw(e,t),i.resolve()}catch(e){const n=e;if(!vw(n))throw n;Fu("Error enabling indexeddb cache. Falling back to memory cache: "+n),i.reject(n)}})).then((()=>i.promise))}function n_(e){return function(e){const t=new Wu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=ju(e);Vv(n.remoteStore)||Ru("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=ju(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const i=n.Ma.get(e)||[];i.push(t),n.Ma.set(e,i)}catch(e){const n=sb(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Sw(e),t))),t.promise}(Zw(e=Fw(e,Jw)))}function i_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await _w(e),n=await kw(e);return t.setNetworkEnabled(!0),function(e){const t=ju(e);return t.v_.delete(0),Pv(t)}(n)}))}(Zw(e=Fw(e,Jw)))}function r_(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await _w(e),n=await kw(e);return t.setNetworkEnabled(!1),async function(e){const t=ju(e);t.v_.add(0),await Dv(t),t.x_.set("Offline")}(n)}))}(Zw(e=Fw(e,Jw)))}function s_(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=ju(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await xw(e),t)))}(Zw(e=Fw(e,Jw)),t).then((t=>t?new Bw(e,null,t.query):null))}function o_(e){if(e._initialized||e._terminated)throw new qu(Bu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class a_{constructor(e){this._byteString=e}static fromBase64String(e){try{return new a_(Id.fromBase64String(e))}catch(e){throw new qu(Bu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new a_(Id.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class l_{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new qu(Bu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ch(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class c_{constructor(e){this._methodName=e}}class u_{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new qu(Bu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new qu(Bu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return th(this._lat,e._lat)||th(this._long,e._long)}}const h_=/^__.*__$/;class d_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new jp(e,this.data,this.fieldMask,t,this.fieldTransforms):new Up(e,this.data,t,this.fieldTransforms)}}class f_{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new jp(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function p_(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zu()}}class g_{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Ru(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}mu(e){return new g_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.mu({path:n,gu:!1});return i.pu(e),i}yu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.mu({path:n,gu:!1});return i.Ru(),i}wu(e){return this.mu({path:void 0,gu:!0})}Su(e){return R_(e,this.settings.methodName,this.settings.bu||!1,this.path,this.settings.Du)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Ru(){if(this.path)for(let e=0;e<this.path.length;e++)this.pu(this.path.get(e))}pu(e){if(0===e.length)throw this.Su("Document fields must not be empty");if(p_(this.Vu)&&h_.test(e))throw this.Su('Document fields cannot begin and end with "__"')}}class m_{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||xv(e)}Cu(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new g_({Vu:e,methodName:t,Du:n,path:ch.emptyPath(),gu:!1,bu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function y_(e){const t=e._freezeSettings(),n=xv(e._databaseId);return new m_(e._databaseId,!!t.ignoreUndefinedProperties,n)}function v_(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cu(s.merge||s.mergeFields?2:0,t,n,r);D_("Data must be an object, but it was:",o,i);const a=A_(i,o);let l,c;if(s.merge)l=new kd(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=N_(t,i,n);if(!o.contains(r))throw new qu(Bu.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));L_(e,r)||e.push(r)}l=new kd(e),c=o.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,c=o.fieldTransforms;return new d_(new nf(a),l,c)}class b_ extends c_{_toFieldTransform(e){if(2!==e.Vu)throw 1===e.Vu?e.Su("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Su("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof b_}}function w_(e,t,n){return new g_({Vu:3,Du:t.settings.Du,methodName:e._methodName,gu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class __ extends c_{_toFieldTransform(e){return new Pp(e.path,new xp)}isEqual(e){return e instanceof __}}class x_ extends c_{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=w_(this,e,!0),n=this.vu.map((e=>C_(e,t))),i=new kp(n);return new Pp(e.path,i)}isEqual(e){return e instanceof x_&&E(this.vu,e.vu)}}class k_ extends c_{constructor(e,t){super(e),this.vu=t}_toFieldTransform(e){const t=w_(this,e,!0),n=this.vu.map((e=>C_(e,t))),i=new Ip(n);return new Pp(e.path,i)}isEqual(e){return e instanceof k_&&E(this.vu,e.vu)}}class S_ extends c_{constructor(e,t){super(e),this.Fu=t}_toFieldTransform(e){const t=new Tp(e.serializer,yp(e.serializer,this.Fu));return new Pp(e.path,t)}isEqual(e){return e instanceof S_&&this.Fu===e.Fu}}function I_(e,t,n,i){const r=e.Cu(1,t,n);D_("Data must be an object, but it was:",r,i);const s=[],o=nf.empty();gd(i,((e,i)=>{const a=M_(t,e,n);i=M(i);const l=r.yu(a);if(i instanceof b_)s.push(a);else{const e=C_(i,l);null!=e&&(s.push(a),o.set(a,e))}}));const a=new kd(s);return new f_(o,a,r.fieldTransforms)}function E_(e,t,n,i,r,s){const o=e.Cu(1,t,n),a=[N_(t,i,n)],l=[r];if(s.length%2!=0)throw new qu(Bu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let d=0;d<s.length;d+=2)a.push(N_(t,s[d])),l.push(s[d+1]);const c=[],u=nf.empty();for(let d=a.length-1;d>=0;--d)if(!L_(c,a[d])){const e=a[d];let t=l[d];t=M(t);const n=o.yu(e);if(t instanceof b_)c.push(e);else{const i=C_(t,n);null!=i&&(c.push(e),u.set(e,i))}}const h=new kd(c);return new f_(u,h,o.fieldTransforms)}function T_(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return C_(n,e.Cu(i?4:3,t))}function C_(e,t){if(P_(e=M(e)))return D_("Unsupported field value:",t,e),A_(e,t);if(e instanceof c_)return function(e,t){if(!p_(t.Vu))throw t.Su("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Su("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.gu&&4!==t.Vu)throw t.Su("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=C_(r,t.wu(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=M(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return yp(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=rh.fromDate(e);return{timestampValue:xg(t.serializer,n)}}if(e instanceof rh){const n=new rh(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:xg(t.serializer,n)}}if(e instanceof u_)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof a_)return{bytesValue:kg(t.serializer,e._byteString)};if(e instanceof qw){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.Su("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Eg(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Su("Unsupported field value: ".concat(Lw(e)))}(e,t)}function A_(e,t){const n={};return md(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gd(e,((e,i)=>{const r=C_(i,t.fu(e));null!=r&&(n[e]=r)})),{mapValue:{fields:n}}}function P_(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof rh||e instanceof u_||e instanceof a_||e instanceof qw||e instanceof c_)}function D_(e,t,n){if(!P_(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const i=Lw(n);throw"an object"===i?t.Su(e+" a custom object"):t.Su(e+" "+i)}}function N_(e,t,n){if((t=M(t))instanceof l_)return t._internalPath;if("string"==typeof t)return M_(e,t);throw R_("Field path arguments must be of type string or ",e,!1,void 0,n)}const O_=new RegExp("[~\\*/\\[\\]]");function M_(e,t,n){if(t.search(O_)>=0)throw R_("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new l_(...t.split("."))._internalPath}catch(So){throw R_("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function R_(e,t,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=" in field ".concat(i)),o&&(l+=" in document ".concat(r)),l+=")"),new qu(Bu.INVALID_ARGUMENT,a+e+l)}function L_(e,t){return e.some((e=>e.isEqual(t)))}class F_{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new qw(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new V_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(z_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class V_ extends F_{data(){return super.data()}}function z_(e,t){return"string"==typeof t?M_(e,t):t instanceof l_?t._internalPath:t._delegate._internalPath}function U_(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new qu(Bu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class j_{}class B_ extends j_{}function q_(e,t){let n=[];for(var i=arguments.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=arguments[s];t instanceof j_&&n.push(t),n=n.concat(r),function(e){const t=e.filter((e=>e instanceof H_)).length,n=e.filter((e=>e instanceof W_)).length;if(t>1||t>0&&n>0)throw new qu(Bu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class W_ extends B_{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new W_(e,t,n)}_apply(e){const t=this._parse(e);return Z_(e._query,t),new Bw(e.firestore,e.converter,Kf(e._query,t))}_parse(e){const t=y_(e.firestore),n=function(e,t,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new qu(Bu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){J_(o,s);const t=[];for(const n of o)t.push($_(i,e,n));a={arrayValue:{values:t}}}else a=$_(i,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||J_(o,s),a=T_(n,t,o,"in"===s||"not-in"===s);return df.create(r,s,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class H_ extends j_{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new H_(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:ff.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const i=t.getFlattenedFilters();for(const r of i)Z_(n,r),n=Kf(n,r)}(e._query,t),new Bw(e.firestore,e.converter,Kf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class K_ extends B_{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new K_(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new qu(Bu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new qu(Bu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cf(t,n)}(e._query,this._field,this._direction);return new Bw(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Vf(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class G_ extends B_{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new G_(e,t,n)}_apply(e){return new Bw(e.firestore,e.converter,Gf(e._query,this._limit,this._limitType))}}class Q_ extends B_{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Q_(e,t,n)}_apply(e){const t=X_(e,this.type,this._docOrFields,this._inclusive);return new Bw(e.firestore,e.converter,function(e,t){return new Vf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class Y_ extends B_{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Y_(e,t,n)}_apply(e){const t=X_(e,this.type,this._docOrFields,this._inclusive);return new Bw(e.firestore,e.converter,function(e,t){return new Vf(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function X_(e,t,n,i){if(n[0]=M(n[0]),n[0]instanceof F_)return function(e,t,n,i,r){if(!i)throw new qu(Bu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const o of qf(e))if(o.field.isKeyField())s.push(Wd(t,i.key));else{const e=i.data.field(o.field);if(Pd(e))throw new qu(Bu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new qu(Bu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new of(s,r)}(e._query,e.firestore._databaseId,t,n[0]._document,i);{const r=y_(e.firestore);return function(e,t,n,i,r,s){const o=e.explicitOrderBy;if(r.length>o.length)throw new qu(Bu.INVALID_ARGUMENT,"Too many arguments provided to ".concat(i,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let l=0;l<r.length;l++){const s=r[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new qu(Bu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(i,"(), but got a ").concat(typeof s));if(!Bf(e)&&-1!==s.indexOf("/"))throw new qu(Bu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(i,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(ah.fromString(s));if(!uh.isDocumentKey(n))throw new qu(Bu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(i,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const r=new uh(n);a.push(Wd(t,r))}else{const e=T_(n,i,s);a.push(e)}}return new of(a,s)}(e._query,e.firestore._databaseId,r,t,n,i)}}function $_(e,t,n){if("string"==typeof(n=M(n))){if(""===n)throw new qu(Bu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bf(t)&&-1!==n.indexOf("/"))throw new qu(Bu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const i=t.path.child(ah.fromString(n));if(!uh.isDocumentKey(i))throw new qu(Bu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(i,"' is not because it has an odd number of segments (").concat(i.length,")."));return Wd(e,new uh(i))}if(n instanceof qw)return Wd(e,n._key);throw new qu(Bu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Lw(n),"."))}function J_(e,t){if(!Array.isArray(e)||0===e.length)throw new qu(Bu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Z_(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new qu(Bu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new qu(Bu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ex{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Fd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Cd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ad(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw zu()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return gd(e,((e,i)=>{n[e]=this.convertValue(i,t)})),n}convertGeoPoint(e){return new u_(Cd(e.latitude),Cd(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Dd(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Nd(e));default:return null}}convertTimestamp(e){const t=Td(e);return new rh(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ah.fromString(e);Uu(Xg(n));const i=new Md(n.get(1),n.get(3)),r=new uh(n.popFirst(5));return i.isEqual(t)||Lu("Document ".concat(r," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),r}}function tx(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class nx extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new a_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qw(this.firestore,null,t)}}class ix{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rx extends F_{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new sx(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(z_("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class sx extends rx{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ox{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new ix(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new sx(this._firestore,this._userDataWriter,n.key,n,new ix(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new qu(Bu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const i=new sx(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ix(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const i=new sx(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ix(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:ax(t.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function ax(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zu()}}function lx(e,t){return e instanceof rx&&t instanceof rx?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof ox&&t instanceof ox&&e._firestore===t._firestore&&Qw(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}class cx extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new a_(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new qw(this.firestore,null,t)}}function ux(e){e=Fw(e,qw);const t=Fw(e.firestore,Jw),n=Zw(t),i=new cx(t);return function(e,t){const n=new Wu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const i=await function(e,t){const n=ju(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new qu(Bu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const i=sb(e,"Failed to get document '".concat(t," from cache"));n.reject(i)}}(await xw(e),t,n))),n.promise}(n,e._key).then((n=>new rx(t,i,e._key,n,new ix(null!==n&&n.hasLocalMutations,!0),e.converter)))}function hx(e){e=Fw(e,Bw);const t=Fw(e.firestore,Jw),n=Zw(t),i=new cx(t);return function(e,t){const n=new Wu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const i=await $y(e,t,!0),r=new Ib(t,i.hs),s=r.Ta(i.documents),o=r.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const i=sb(e,"Failed to execute query '".concat(t," against cache"));n.reject(i)}}(await xw(e),t,n))),n.promise}(n,e._query).then((n=>new ox(t,i,e,n)))}function dx(e,t,n){e=Fw(e,qw);const i=Fw(e.firestore,Jw),r=tx(e.converter,t,n);return mx(i,[v_(y_(i),"setDoc",e._key,r,null!==e.converter,n).toMutation(e._key,Np.none())])}function fx(e,t,n){e=Fw(e,qw);const i=Fw(e.firestore,Jw),r=y_(i);let s;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return s="string"==typeof(t=M(t))||t instanceof l_?E_(r,"updateDoc",e._key,t,n,a):I_(r,"updateDoc",e._key,t),mx(i,[s.toMutation(e._key,Np.exists(!0))])}function px(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r,s,o;e=M(e);let a={includeMetadataChanges:!1,source:"default"},l=0;"object"!=typeof n[l]||Xw(n[l])||(a=n[l],l++);const c={includeMetadataChanges:a.includeMetadataChanges,source:a.source};if(Xw(n[l])){const e=n[l];n[l]=null===(r=e.next)||void 0===r?void 0:r.bind(e),n[l+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[l+2]=null===(o=e.complete)||void 0===o?void 0:o.bind(e)}let u,h,d;if(e instanceof qw)h=Fw(e.firestore,Jw),d=Uf(e._key.path),u={next:t=>{n[l]&&n[l](yx(h,e,t))},error:n[l+1],complete:n[l+2]};else{const t=Fw(e,Bw);h=Fw(t.firestore,Jw),d=t._query;const i=new cx(h);u={next:e=>{n[l]&&n[l](new ox(h,i,t,e))},error:n[l+1],complete:n[l+2]},U_(e._query)}return function(e,t,n,i){const r=new hw(i),s=new vb(t,r,n);return e.asyncQueue.enqueueAndForget((async()=>hb(await Ew(e),s))),()=>{r.Qa(),e.asyncQueue.enqueueAndForget((async()=>db(await Ew(e),s)))}}(Zw(h),d,c,u)}function gx(e,t){return function(e,t){const n=new hw(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){ju(e).W_.add(t),t.next()}(await Ew(e),n))),()=>{n.Qa(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){ju(e).W_.delete(t)}(await Ew(e),n)))}}(Zw(e=Fw(e,Jw)),Xw(t)?t:{next:t})}function mx(e,t){return function(e,t){const n=new Wu;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const i=sw(e);try{const e=await function(e,t){const n=ju(e),i=rh.now(),r=t.reduce(((e,t)=>e.add(t.key)),dp());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let a=ip(),l=dp();return n.os.getEntries(e,r).next((e=>{a=e,a.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,a))).next((r=>{s=r;const o=[];for(const e of t){const t=Vp(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new jp(e.key,t,rf(t.value.mapValue),Np.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,o,t)})).next((t=>{o=t;const i=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:op(s)})))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Fa[e.currentUser.toKey()];i||(i=new yd(th)),i=i.insert(t,n),e.Fa[e.currentUser.toKey()]=i}(i,e.batchId,n),await Gb(i,e.changes),await Hv(i.remoteStore)}catch(e){const t=sb(e,"Failed to persist write");n.reject(t)}}(await Sw(e),t,n))),n.promise}(Zw(e),t)}function yx(e,t,n){const i=n.docs.get(t._key),r=new cx(e);return new rx(e,r,t._key,i,new ix(n.hasPendingWrites,n.fromCache),t.converter)}const vx={maxAttempts:5};class bx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=y_(e)}set(e,t,n){this._verifyNotCommitted();const i=wx(e,this._firestore),r=tx(i.converter,t,n),s=v_(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,Np.none())),this}update(e,t,n){this._verifyNotCommitted();const i=wx(e,this._firestore);let r;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return r="string"==typeof(t=M(t))||t instanceof l_?E_(this._dataReader,"WriteBatch.update",i._key,t,n,o):I_(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Np.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=wx(e,this._firestore);return this._mutations=this._mutations.concat(new Hp(t._key,Np.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new qu(Bu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function wx(e,t){if((e=M(e)).firestore!==t)throw new qu(Bu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class _x extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=y_(e)}get(e){const t=wx(e,this._firestore),n=new nx(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return zu();const i=e[0];if(i.isFoundDocument())return new F_(this._firestore,n,i.key,i,t.converter);if(i.isNoDocument())return new F_(this._firestore,n,t._key,null,t.converter);throw zu()}))}set(e,t,n){const i=wx(e,this._firestore),r=tx(i.converter,t,n),s=v_(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,s),this}update(e,t,n){const i=wx(e,this._firestore);let r;for(var s=arguments.length,o=new Array(s>3?s-3:0),a=3;a<s;a++)o[a-3]=arguments[a];return r="string"==typeof(t=M(t))||t instanceof l_?E_(this._dataReader,"Transaction.update",i._key,t,n,o):I_(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}delete(e){const t=wx(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=wx(e,this._firestore),n=new cx(this._firestore);return super.get(e).then((e=>new rx(this._firestore,n,t._key,e._document,new ix(!1,!1),t.converter)))}}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Nu=e}(Ae),we(new R("firestore",((e,n)=>{let{instanceIdentifier:i,options:r}=n;const s=e.getProvider("app").getImmediate(),o=new Jw(new Qu(e.getProvider("auth-internal")),new Ju(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new qu(Bu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Md(e.options.projectId,t)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),Re(Pu,"4.5.1",e),Re(Pu,"4.5.1","esm2017")}();function xx(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new qu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function kx(){if("undefined"===typeof Uint8Array)throw new qu("unimplemented","Uint8Arrays are not available in this environment.")}function Sx(){if("undefined"==typeof atob)throw new qu("unimplemented","Blobs are unavailable in Firestore in this environment.")}class Ix{constructor(e){this._delegate=e}static fromBase64String(e){return Sx(),new Ix(a_.fromBase64String(e))}static fromUint8Array(e){return kx(),new Ix(a_.fromUint8Array(e))}toBase64(){return Sx(),this._delegate.toBase64()}toUint8Array(){return kx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ex(e){return function(e,t){if("object"!==typeof e||null===e)return!1;const n=e;for(const i of t)if(i in n&&"function"===typeof n[i])return!0;return!1}(e,["next","error","complete"])}class Tx{enableIndexedDbPersistence(e,t){return function(e,t){o_(e=Fw(e,Jw));const n=Zw(e);if(n._uninitializedComponentsProvider)throw new qu(Bu.FAILED_PRECONDITION,"SDK cache is already specified.");Fu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=e._freezeSettings(),r=new cw;return t_(n,r,new aw(r,i.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){o_(e=Fw(e,Jw));const t=Zw(e);if(t._uninitializedComponentsProvider)throw new qu(Bu.FAILED_PRECONDITION,"SDK cache is already specified.");Fu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),i=new cw;return t_(t,i,new lw(i,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new qu(Bu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Wu;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!Ih.D())return Promise.resolve();const t=e+"main";await Ih.delete(t)}(zy(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class Cx{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof Md||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Fu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};jw(this._delegate,e,t,n)}enableNetwork(){return i_(this._delegate)}disableNetwork(){return r_(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Ow("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return n_(this._delegate)}onSnapshotsInSync(e){return gx(this._delegate,e)}get app(){if(!this._appCompat)throw new qu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Bx(this,Hw(this._delegate,e))}catch(t){throw Mx(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ox(this,Kw(this._delegate,e))}catch(t){throw Mx(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zx(this,function(e,t){if(e=Fw(e,Uw),Nw("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new qu(Bu.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Bw(e,null,function(e){return new Vf(ah.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw Mx(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t,n){e=Fw(e,Jw);const i=Object.assign(Object.assign({},vx),n);return function(e){if(e.maxAttempts<1)throw new qu(Bu.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(e,t,n){const i=new Wu;return e.asyncQueue.enqueueAndForget((async()=>{const r=await Iw(e);new pw(e.asyncQueue,r,n,t,i).Ya()})),i.promise}(Zw(e),(n=>t(new _x(e,n))),i)}(this._delegate,(t=>e(new Px(this,t))))}batch(){return Zw(this._delegate),new Dx(new bx(this._delegate,(e=>mx(this._delegate,e))))}loadBundle(e){return function(e,t){const n=Zw(e=Fw(e,Jw)),i=new $w;return Aw(n,e._databaseId,t,i),i}(this._delegate,e)}namedQuery(e){return s_(this._delegate,e).then((e=>e?new zx(this,e):null))}}class Ax extends ex{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ix(new a_(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ox.forKey(t,this.firestore,null)}}class Px{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Ax(e)}get(e){const t=qx(e);return this._delegate.get(t).then((e=>new Fx(this._firestore,new rx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const i=qx(e);return n?(xx("Transaction.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),s=3;s<i;s++)r[s-3]=arguments[s];const o=qx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...r),this}delete(e){const t=qx(e);return this._delegate.delete(t),this}}class Dx{constructor(e){this._delegate=e}set(e,t,n){const i=qx(e);return n?(xx("WriteBatch.set",n),this._delegate.set(i,t,n)):this._delegate.set(i,t),this}update(e,t,n){for(var i=arguments.length,r=new Array(i>3?i-3:0),s=3;s<i;s++)r[s-3]=arguments[s];const o=qx(e);return 2===arguments.length?this._delegate.update(o,t):this._delegate.update(o,t,n,...r),this}delete(e){const t=qx(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Nx{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new sx(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Vx(this._firestore,n),null!==t&&void 0!==t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=Nx.INSTANCES;let i=n.get(e);i||(i=new WeakMap,n.set(e,i));let r=i.get(t);return r||(r=new Nx(e,new Ax(e),t),i.set(t,r)),r}}Nx.INSTANCES=new WeakMap;class Ox{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ax(e)}static forPath(e,t,n){if(e.length%2!==0)throw new qu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Ox(t,new qw(t._delegate,n,new uh(e)))}static forKey(e,t,n){return new Ox(t,new qw(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new Bx(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Bx(this.firestore,Hw(this._delegate,e))}catch(t){throw Mx(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=M(e))instanceof qw&&Gw(this._delegate,e)}set(e,t){t=xx("DocumentReference.set",t);try{return t?dx(this._delegate,e,t):dx(this._delegate,e)}catch(n){throw Mx(n,"setDoc()","DocumentReference.set()")}}update(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];try{return 1===arguments.length?fx(this._delegate,e):fx(this._delegate,e,t,...i)}catch(s){throw Mx(s,"updateDoc()","DocumentReference.update()")}}delete(){return mx(Fw((e=this._delegate).firestore,Jw),[new Hp(e._key,Np.none())]);var e}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=Rx(t),r=Lx(t,(e=>new Fx(this.firestore,new rx(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return px(this._delegate,i,r)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?ux(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Fw(e,qw);const t=Fw(e.firestore,Jw);return Tw(Zw(t),e._key,{source:"server"}).then((n=>yx(t,e,n)))}(this._delegate):function(e){e=Fw(e,qw);const t=Fw(e.firestore,Jw);return Tw(Zw(t),e._key).then((n=>yx(t,e,n)))}(this._delegate),t.then((e=>new Fx(this.firestore,new rx(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new Ox(this.firestore,e?this._delegate.withConverter(Nx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Mx(e,t,n){return e.message=e.message.replace(t,n),e}function Rx(e){for(const t of e)if("object"===typeof t&&!Ex(t))return t;return{}}function Lx(e,t){var n,i;let r;return r=Ex(e[0])?e[0]:Ex(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{r.next&&r.next(t(e))},error:null===(n=r.error)||void 0===n?void 0:n.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Fx{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ox(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return lx(this._delegate,e._delegate)}}class Vx extends Fx{data(e){const t=this._delegate.data(e);return this._delegate._converter||void 0!==t||zu(),t}}class zx{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Ax(e)}where(e,t,n){try{return new zx(this.firestore,q_(this._delegate,function(e,t,n){const i=t,r=z_("where",e);return W_._create(r,i,n)}(e,t,n)))}catch(i){throw Mx(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new zx(this.firestore,q_(this._delegate,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=z_("orderBy",e);return K_._create(n,t)}(e,t)))}catch(n){throw Mx(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zx(this.firestore,q_(this._delegate,(Vw("limit",t=e),G_._create("limit",t,"F"))))}catch(t){throw Mx(t,"limit()","Query.limit()")}var t}limitToLast(e){try{return new zx(this.firestore,q_(this._delegate,(Vw("limitToLast",t=e),G_._create("limitToLast",t,"L"))))}catch(t){throw Mx(t,"limitToLast()","Query.limitToLast()")}var t}startAt(){try{return new zx(this.firestore,q_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Q_._create("startAt",t,!0)}(...arguments)))}catch(e){throw Mx(e,"startAt()","Query.startAt()")}}startAfter(){try{return new zx(this.firestore,q_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Q_._create("startAfter",t,!1)}(...arguments)))}catch(e){throw Mx(e,"startAfter()","Query.startAfter()")}}endBefore(){try{return new zx(this.firestore,q_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Y_._create("endBefore",t,!1)}(...arguments)))}catch(e){throw Mx(e,"endBefore()","Query.endBefore()")}}endAt(){try{return new zx(this.firestore,q_(this._delegate,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Y_._create("endAt",t,!0)}(...arguments)))}catch(e){throw Mx(e,"endAt()","Query.endAt()")}}isEqual(e){return Qw(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null===e||void 0===e?void 0:e.source)?hx(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=Fw(e,Bw);const t=Fw(e.firestore,Jw),n=Zw(t),i=new cx(t);return Cw(n,e._query,{source:"server"}).then((n=>new ox(t,i,e,n)))}(this._delegate):function(e){e=Fw(e,Bw);const t=Fw(e.firestore,Jw),n=Zw(t),i=new cx(t);return U_(e._query),Cw(n,e._query).then((n=>new ox(t,i,e,n)))}(this._delegate),t.then((e=>new jx(this.firestore,new ox(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const i=Rx(t),r=Lx(t,(e=>new jx(this.firestore,new ox(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return px(this._delegate,i,r)}withConverter(e){return new zx(this.firestore,e?this._delegate.withConverter(Nx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Ux{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Vx(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class jx{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new zx(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new Vx(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new Ux(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new Vx(this._firestore,n))}))}isEqual(e){return lx(this._delegate,e._delegate)}}class Bx extends zx{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ox(this.firestore,e):null}doc(e){try{return new Ox(this.firestore,void 0===e?Kw(this._delegate):Kw(this._delegate,e))}catch(t){throw Mx(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=Fw(e.firestore,Jw),i=Kw(e),r=tx(e.converter,t);return mx(n,[v_(y_(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,Np.exists(!1))]).then((()=>i))}(this._delegate,e).then((e=>new Ox(this.firestore,e)))}isEqual(e){return Gw(this._delegate,e._delegate)}withConverter(e){return new Bx(this.firestore,e?this._delegate.withConverter(Nx.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function qx(e){return Fw(e,qw)}class Wx{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._delegate=new l_(...t)}static documentId(){return new Wx(ch.keyField().canonicalString())}isEqual(e){return(e=M(e))instanceof l_&&this._delegate._internalPath.isEqual(e._internalPath)}}class Hx{constructor(e){this._delegate=e}static serverTimestamp(){const e=new __("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new Hx(e)}static delete(){const e=new b_("deleteField");return e._methodName="FieldValue.delete",new Hx(e)}static arrayUnion(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new x_("arrayUnion",t)}(...arguments);return e._methodName="FieldValue.arrayUnion",new Hx(e)}static arrayRemove(){const e=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new k_("arrayRemove",t)}(...arguments);return e._methodName="FieldValue.arrayRemove",new Hx(e)}static increment(e){const t=new S_("increment",e);return t._methodName="FieldValue.increment",new Hx(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Kx={Firestore:Cx,GeoPoint:u_,Timestamp:rh,Blob:Ix,Transaction:Px,WriteBatch:Dx,DocumentReference:Ox,DocumentSnapshot:Fx,Query:zx,QueryDocumentSnapshot:Vx,QuerySnapshot:jx,CollectionReference:Bx,FieldPath:Wx,FieldValue:Hx,setLogLevel:function(e){var t;t=e,Ou.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function Gx(e){return Gx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gx(e)}function Qx(e){var t=function(e,t){if("object"!=Gx(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=Gx(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Gx(t)?t:t+""}function Yx(e,t,n){return(t=Qx(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xx(e){return e+.5|0}!function(e){!function(e,t){e.INTERNAL.registerComponent(new R("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),i=e.getProvider("firestore").getImmediate();return t(n,i)}),"PUBLIC").setServiceProps(Object.assign({},Kx)))}(e,((e,t)=>new Cx(e,t,new Tx))),e.registerVersion("@firebase/firestore-compat","0.3.28")}(et);const $x=(e,t,n)=>Math.max(Math.min(e,n),t);function Jx(e){return $x(Xx(2.55*e),0,255)}function Zx(e){return $x(Xx(255*e),0,255)}function ek(e){return $x(Xx(e/2.55)/100,0,1)}function tk(e){return $x(Xx(100*e),0,100)}const nk={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ik=[..."0123456789ABCDEF"],rk=e=>ik[15&e],sk=e=>ik[(240&e)>>4]+ik[15&e],ok=e=>(240&e)>>4===(15&e);function ak(e){var t=(e=>ok(e.r)&&ok(e.g)&&ok(e.b)&&ok(e.a))(e)?rk:sk;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const lk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ck(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function uk(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function hk(e,t,n){const i=ck(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function dk(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),o=(r+s)/2;let a,l,c;return r!==s&&(c=r-s,l=o>.5?c/(2-r-s):c/(r+s),a=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),a=60*a+.5),[0|a,l||0,o]}function fk(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(Zx)}function pk(e,t,n){return fk(ck,e,t,n)}function gk(e){return(e%360+360)%360}function mk(e){const t=lk.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?Jx(+t[5]):Zx(+t[5]));const r=gk(+t[2]),s=+t[3]/100,o=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return fk(hk,e,t,n)}(r,s,o):"hsv"===t[1]?function(e,t,n){return fk(uk,e,t,n)}(r,s,o):pk(r,s,o),{r:n[0],g:n[1],b:n[2],a:i}}const yk={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},vk={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let bk;function wk(e){bk||(bk=function(){const e={},t=Object.keys(vk),n=Object.keys(yk);let i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,yk[s]);s=parseInt(vk[o],16),e[a]=[s>>16&255,s>>8&255,255&s]}return e}(),bk.transparent=[0,0,0,0]);const t=bk[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const _k=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const xk=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,kk=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function Sk(e,t,n){if(e){let i=dk(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=pk(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function Ik(e,t){return e?Object.assign(t||{},e):e}function Ek(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Zx(e[3]))):(t=Ik(e,{r:0,g:0,b:0,a:1})).a=Zx(t.a),t}function Tk(e){return"r"===e.charAt(0)?function(e){const t=_k.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?Jx(e):$x(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?Jx(n):$x(n,0,255)),i=255&(t[4]?Jx(i):$x(i,0,255)),r=255&(t[6]?Jx(r):$x(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):mk(e)}class Ck{constructor(e){if(e instanceof Ck)return e;const t=typeof e;let n;"object"===t?n=Ek(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*nk[e[1]],g:255&17*nk[e[2]],b:255&17*nk[e[3]],a:5===n?17*nk[e[4]]:255}:7!==n&&9!==n||(t={r:nk[e[1]]<<4|nk[e[2]],g:nk[e[3]]<<4|nk[e[4]],b:nk[e[5]]<<4|nk[e[6]],a:9===n?nk[e[7]]<<4|nk[e[8]]:255})),t}(e)||wk(e)||Tk(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Ik(this._rgb);return e&&(e.a=ek(e.a)),e}set rgb(e){this._rgb=Ek(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(ek(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?ak(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=dk(e),n=t[0],i=tk(t[1]),r=tk(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(ek(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,o=2*s-1,a=n.a-i.a,l=((o*a===-1?o:(o+a)/(1+o*a))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=kk(ek(e.r)),r=kk(ek(e.g)),s=kk(ek(e.b));return{r:Zx(xk(i+n*(kk(ek(t.r))-i))),g:Zx(xk(r+n*(kk(ek(t.g))-r))),b:Zx(xk(s+n*(kk(ek(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new Ck(this.rgb)}alpha(e){return this._rgb.a=Zx(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Xx(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Sk(this._rgb,2,e),this}darken(e){return Sk(this._rgb,2,-e),this}saturate(e){return Sk(this._rgb,1,e),this}desaturate(e){return Sk(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=dk(e);n[0]=gk(n[0]+t),n=pk(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function Ak(){}const Pk=(()=>{let e=0;return()=>e++})();function Dk(e){return null===e||"undefined"===typeof e}function Nk(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function Ok(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function Mk(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function Rk(e,t){return Mk(e)?e:t}function Lk(e,t){return"undefined"===typeof e?t:e}const Fk=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Vk(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function zk(e,t,n,i){let r,s,o;if(Nk(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(Ok(e))for(o=Object.keys(e),s=o.length,r=0;r<s;r++)t.call(n,e[o[r]],o[r])}function Uk(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function jk(e){if(Nk(e))return e.map(jk);if(Ok(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=jk(e[n[r]]);return t}return e}function Bk(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function qk(e,t,n,i){if(!Bk(e))return;const r=t[e],s=n[e];Ok(r)&&Ok(s)?Wk(r,s,i):t[e]=jk(s)}function Wk(e,t,n){const i=Nk(t)?t:[t],r=i.length;if(!Ok(e))return e;const s=(n=n||{}).merger||qk;let o;for(let a=0;a<r;++a){if(o=i[a],!Ok(o))continue;const t=Object.keys(o);for(let i=0,r=t.length;i<r;++i)s(t[i],e,o,n)}return e}function Hk(e,t){return Wk(e,t,{merger:Kk})}function Kk(e,t,n){if(!Bk(e))return;const i=t[e],r=n[e];Ok(i)&&Ok(r)?Hk(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=jk(r))}const Gk={"":e=>e,x:e=>e.x,y:e=>e.y};function Qk(e,t){const n=Gk[t]||(Gk[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function Yk(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Xk=e=>"undefined"!==typeof e,$k=e=>"function"===typeof e,Jk=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Zk=Math.PI,eS=2*Zk,tS=eS+Zk,nS=Number.POSITIVE_INFINITY,iS=Zk/180,rS=Zk/2,sS=Zk/4,oS=2*Zk/3,aS=Math.log10,lS=Math.sign;function cS(e,t,n){return Math.abs(e-t)<n}function uS(e){const t=Math.round(e);e=cS(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(aS(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function hS(e){return!isNaN(parseFloat(e))&&isFinite(e)}function dS(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function fS(e){return e*(Zk/180)}function pS(e){return e*(180/Zk)}function gS(e){if(!Mk(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function mS(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*Zk&&(s+=eS),{angle:s,distance:r}}function yS(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function vS(e,t){return(e-t+tS)%eS-Zk}function bS(e){return(e%eS+eS)%eS}function wS(e,t,n,i){const r=bS(e),s=bS(t),o=bS(n),a=bS(s-r),l=bS(o-r),c=bS(r-s),u=bS(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function _S(e,t,n){return Math.max(t,Math.min(n,e))}function xS(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function kS(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const SS=(e,t,n,i)=>kS(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),IS=(e,t,n)=>kS(e,n,(i=>e[i][t]>=n));const ES=["push","pop","shift","splice","unshift"];function TS(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(ES.forEach((t=>{delete e[t]})),delete e._chartjs)}function CS(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const AS="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function PS(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];n=s,i||(i=!0,AS.call(window,(()=>{i=!1,e.apply(t,n)})))}}const DS=e=>"start"===e?"left":"end"===e?"right":"center",NS=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function OS(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:o,_parsed:a}=e,l=o.axis,{min:c,max:u,minDefined:h,maxDefined:d}=o.getUserBounds();h&&(r=_S(Math.min(SS(a,l,c).lo,n?i:SS(t,l,o.getPixelForValue(c)).lo),0,i-1)),s=d?_S(Math.max(SS(a,o.axis,u,!0).hi+1,n?0:SS(t,l,o.getPixelForValue(u),!0).hi+1),r,i)-r:i-r}return{start:r,count:s}}function MS(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const RS=e=>0===e||1===e,LS=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*eS/n),FS=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*eS/n)+1,VS={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*rS),easeOutSine:e=>Math.sin(e*rS),easeInOutSine:e=>-.5*(Math.cos(Zk*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>RS(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>RS(e)?e:LS(e,.075,.3),easeOutElastic:e=>RS(e)?e:FS(e,.075,.3),easeInOutElastic(e){const t=.1125;return RS(e)?e:e<.5?.5*LS(2*e,t,.45):.5+.5*FS(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-VS.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*VS.easeInBounce(2*e):.5*VS.easeOutBounce(2*e-1)+.5};function zS(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function US(e){return zS(e)?e:new Ck(e)}function jS(e){return zS(e)?e:new Ck(e).saturate(.5).darken(.1).hexString()}const BS=["x","y","borderWidth","radius","tension"],qS=["color","borderColor","backgroundColor"];const WS=new Map;function HS(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=WS.get(n);return i||(i=new Intl.NumberFormat(e,t),WS.set(n,i)),i}(t,n).format(e)}const KS={values:e=>Nk(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const o=aS(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),HS(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(aS(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?KS.numeric.call(this,e,t,n):""}};var GS={formatters:KS};const QS=Object.create(null),YS=Object.create(null);function XS(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function $S(e,t,n){return"string"===typeof t?Wk(XS(e,t),n):Wk(XS(e,""),t)}class JS{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>jS(t.backgroundColor),this.hoverBorderColor=(e,t)=>jS(t.borderColor),this.hoverColor=(e,t)=>jS(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return $S(this,e,t)}get(e){return XS(this,e)}describe(e,t){return $S(YS,e,t)}override(e,t){return $S(QS,e,t)}route(e,t,n,i){const r=XS(this,e),s=XS(this,n),o="_"+t;Object.defineProperties(r,{[o]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[o],t=s[i];return Ok(e)?Object.assign({},t,e):Lk(e,t)},set(e){this[o]=e}}})}apply(e){e.forEach((e=>e(this)))}}var ZS=new JS({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:qS},numbers:{type:"number",properties:BS}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:GS.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function eI(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function tI(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let o=0;const a=n.length;let l,c,u,h,d;for(l=0;l<a;l++)if(h=n[l],void 0===h||null===h||Nk(h)){if(Nk(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||Nk(d)||(o=eI(e,r,s,o,d))}else o=eI(e,r,s,o,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return o}function nI(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function iI(e,t){(t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore()}function rI(e,t,n,i){sI(e,t,n,i,null)}function sI(e,t,n,i,r){let s,o,a,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*iS;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,g,0,0,eS):e.arc(n,i,g,0,eS),e.closePath();break;case"triangle":u=r?r/2:g,e.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=oS,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=oS,e.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,o=Math.cos(m+sS)*l,h=Math.cos(m+sS)*(r?r/2-c:l),a=Math.sin(m+sS)*l,d=Math.sin(m+sS)*(r?r/2-c:l),e.arc(n-h,i-a,c,m-Zk,m-rS),e.arc(n+d,i-o,c,m-rS,m),e.arc(n+h,i+a,c,m,m+rS),e.arc(n-d,i+o,c,m+rS,m+Zk),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}m+=sS;case"rectRot":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+d,i-o),e.lineTo(n+h,i+a),e.lineTo(n-d,i+o),e.closePath();break;case"crossRot":m+=sS;case"cross":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"star":h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o),m+=sS,h=Math.cos(m)*(r?r/2:g),o=Math.cos(m)*g,a=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),e.moveTo(n-h,i-a),e.lineTo(n+h,i+a),e.moveTo(n+d,i-o),e.lineTo(n-d,i+o);break;case"line":o=r?r/2:Math.cos(m)*g,a=Math.sin(m)*g,e.moveTo(n-o,i-a),e.lineTo(n+o,i+a);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function oI(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function aI(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function lI(e){e.restore()}function cI(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function uI(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function hI(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(o,u),e.lineTo(a,u),e.stroke()}}function dI(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function fI(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=Nk(t)?t:[t],a=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),Dk(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&dI(e,s.backdrop),a&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),Dk(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),hI(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function pI(e,t){const{x:n,y:i,w:r,h:s,radius:o}=t;e.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*Zk,Zk,!0),e.lineTo(n,i+s-o.bottomLeft),e.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,Zk,rS,!0),e.lineTo(n+r-o.bottomRight,i+s),e.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,rS,0,!0),e.lineTo(n+r,i+o.topRight),e.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-rS,!0),e.lineTo(n+o.topLeft,i)}const gI=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,mI=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function yI(e,t){const n=(""+e).match(gI);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const vI=e=>+e||0;function bI(e,t){const n={},i=Ok(t),r=i?Object.keys(t):t,s=Ok(e)?i?n=>Lk(e[n],e[t[n]]):t=>e[t]:()=>e;for(const o of r)n[o]=vI(s(o));return n}function wI(e){return bI(e,{top:"y",right:"x",bottom:"y",left:"x"})}function _I(e){return bI(e,["topLeft","topRight","bottomLeft","bottomRight"])}function xI(e){const t=wI(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function kI(e,t){e=e||{},t=t||ZS.font;let n=Lk(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=Lk(e.style,t.style);i&&!(""+i).match(mI)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Lk(e.family,t.family),lineHeight:yI(Lk(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:Lk(e.weight,t.weight),string:""};return r.string=function(e){return!e||Dk(e.size)||Dk(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function SI(e,t,n,i){let r,s,o,a=!0;for(r=0,s=e.length;r<s;++r)if(o=e[r],void 0!==o&&(void 0!==t&&"function"===typeof o&&(o=o(t),a=!1),void 0!==n&&Nk(o)&&(o=o[n%o.length],a=!1),void 0!==o))return i&&!a&&(i.cacheable=!1),o}function II(e,t){return Object.assign(Object.create(e),t)}function EI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=FI("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>EI([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>DI(n,i,(()=>function(e,t,n,i){let r;for(const s of t)if(r=FI(AI(s,e),n),"undefined"!==typeof r)return PI(e,r)?RI(n,i,e,r):r}(i,t,e,n))),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>VI(e).includes(t),ownKeys:e=>VI(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function TI(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:CI(e,i),setContext:t=>TI(e,t,n,i),override:r=>TI(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>DI(e,t,(()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=e;let a=i[t];$k(a)&&o.isScriptable(t)&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(e))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+e);a.add(e);let l=t(s,o||i);a.delete(e),PI(e,l)&&(l=RI(r._scopes,r,e,l));return l}(t,a,e,n));Nk(a)&&a.length&&(a=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(Ok(t[0])){const n=t,i=r._scopes.filter((e=>e!==n));t=[];for(const l of n){const n=RI(i,r,e,l);t.push(TI(n,s,o&&o[e],a))}}return t}(t,a,e,o.isIndexable));PI(t,a)&&(a=TI(a,r,s&&s[t],o));return a}(e,t,n))),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function CI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:$k(n)?n:()=>n,isIndexable:$k(i)?i:()=>i}}const AI=(e,t)=>e?e+Yk(t):t,PI=(e,t)=>Ok(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function DI(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t))return e[t];const i=n();return e[t]=i,i}function NI(e,t,n){return $k(e)?e(t,n):e}const OI=(e,t)=>!0===e?t:"string"===typeof e?Qk(t,e):void 0;function MI(e,t,n,i,r){for(const s of t){const t=OI(n,s);if(t){e.add(t);const s=NI(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function RI(e,t,n,i){const r=t._rootScopes,s=NI(t._fallback,n,i),o=[...e,...r],a=new Set;a.add(i);let l=LI(a,o,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=LI(a,o,s,l,i),null!==l))&&EI(Array.from(a),[""],r,s,(()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(Nk(r)&&Ok(n))return n;return r||{}}(t,n,i))))}function LI(e,t,n,i,r){for(;n;)n=MI(e,t,n,i,r);return n}function FI(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function VI(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter((e=>!e.startsWith("_"))))t.add(e);return Array.from(t)}(e._scopes)),t}function zI(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={r:r.parse(Qk(u,s),c)};return o}const UI=Number.EPSILON||1e-14,jI=(e,t)=>t<e.length&&!e[t].skip&&e[t],BI=e=>"x"===e?"y":"x";function qI(e,t,n,i){const r=e.skip?t:e,s=t,o=n.skip?t:n,a=yS(s,r),l=yS(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+d*(o.x-r.x),y:s.y+d*(o.y-r.y)}}}function WI(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=BI(t),i=e.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=jI(e,0);for(o=0;o<i;++o)if(a=l,l=c,c=jI(e,o+1),l){if(c){const e=c[t]-l[t];r[o]=0!==e?(c[n]-l[n])/e:0}s[o]=a?c?lS(r[o-1])!==lS(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}!function(e,t,n){const i=e.length;let r,s,o,a,l,c=jI(e,0);for(let u=0;u<i-1;++u)l=c,c=jI(e,u+1),l&&c&&(cS(t[u],0,UI)?n[u]=n[u+1]=0:(r=n[u]/t[u],s=n[u+1]/t[u],a=Math.pow(r,2)+Math.pow(s,2),a<=9||(o=3/Math.sqrt(a),n[u]=r*o*t[u],n[u+1]=s*o*t[u])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=BI(n),r=e.length;let s,o,a,l=jI(e,0);for(let c=0;c<r;++c){if(o=a,a=l,l=jI(e,c+1),!a)continue;const r=a[n],u=a[i];o&&(s=(r-o[n])/3,a["cp1".concat(n)]=r-s,a["cp1".concat(i)]=u-s*t[c]),l&&(s=(l[n]-r)/3,a["cp2".concat(n)]=r+s,a["cp2".concat(i)]=u+s*t[c])}}(e,s,t)}function HI(e,t,n){return Math.max(Math.min(e,n),t)}function KI(e,t,n,i,r){let s,o,a,l;if(t.spanGaps&&(e=e.filter((e=>!e.skip))),"monotone"===t.cubicInterpolationMode)WI(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,o=e.length;s<o;++s)a=e[s],l=qI(n,a,e[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,n=a}t.capBezierPoints&&function(e,t){let n,i,r,s,o,a=oI(e[0],t);for(n=0,i=e.length;n<i;++n)o=s,s=a,a=n<i-1&&oI(e[n+1],t),s&&(r=e[n],o&&(r.cp1x=HI(r.cp1x,t.left,t.right),r.cp1y=HI(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=HI(r.cp2x,t.left,t.right),r.cp2y=HI(r.cp2y,t.top,t.bottom)))}(e,n)}function GI(){return"undefined"!==typeof window&&"undefined"!==typeof document}function QI(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function YI(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const XI=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const $I=["top","right","bottom","left"];function JI(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=$I[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const ZI=(e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot);function eE(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=XI(n),s="border-box"===r.boxSizing,o=JI(r,"padding"),a=JI(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let o,a,l=!1;if(ZI(r,s,e.target))o=r,a=s;else{const e=t.getBoundingClientRect();o=i.clientX-e.left,a=i.clientY-e.top,l=!0}return{x:o,y:a,box:l}}(e,n),h=o.left+(u&&a.left),d=o.top+(u&&a.top);let{width:f,height:p}=t;return s&&(f-=o.width+a.width,p-=o.height+a.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const tE=e=>Math.round(10*e)/10;function nE(e,t,n,i){const r=XI(e),s=JI(r,"margin"),o=YI(r.maxWidth,e,"clientWidth")||nS,a=YI(r.maxHeight,e,"clientHeight")||nS,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=QI(e);if(s){const e=s.getBoundingClientRect(),o=XI(s),a=JI(o,"border","width"),l=JI(o,"padding");t=e.width-l.width-a.width,n=e.height-l.height-a.height,i=YI(o.maxWidth,s,"clientWidth"),r=YI(o.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||nS,maxHeight:r||nS}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=JI(r,"border","width"),t=JI(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=tE(Math.min(c,o,l.maxWidth)),u=tE(Math.min(u,a,l.maxHeight)),c&&!u&&(u=tE(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=tE(Math.floor(u*i))),{width:c,height:u}}function iE(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const o=e.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height="".concat(e.height,"px"),o.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||o.height!==r||o.width!==s)&&(e.currentDevicePixelRatio=i,o.height=r,o.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const rE=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};GI()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(t){}return e}();function sE(e,t){const n=function(e,t){return XI(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function oE(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function aE(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function lE(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},o=oE(e,r,n),a=oE(r,s,n),l=oE(s,t,n),c=oE(o,a,n),u=oE(a,l,n);return oE(c,u,n)}function cE(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function uE(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function hE(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function dE(e){return"angle"===e?{between:wS,compare:vS,normalize:bS}:{between:xS,compare:(e,t)=>e-t,normalize:e=>e}}function fE(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function pE(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,o=t.length,{compare:a,between:l,normalize:c}=dE(i),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=dE(i),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&o(a(t[h%l][i]),r,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let g,m,y,v=!1,b=null;const w=()=>v||l(r,y,g)&&0!==a(r,y),_=()=>!v||0===a(s,g)||l(s,y,g);for(let x=u,k=u;x<=h;++x)m=t[x%o],m.skip||(g=c(m[i]),g!==y&&(v=l(g,r,s),null===b&&w()&&(b=0===a(g,r)?x:k),null!==b&&_()&&(p.push(fE({start:b,end:x,loop:d,count:o,style:f})),b=null),k=x,y=g));return null!==b&&p.push(fE({start:b,end:h,loop:d,count:o,style:f})),p}function gE(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=pE(i[r],e.points,t);s.length&&n.push(...s)}return n}function mE(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=yE(e.options),{_datasetIndex:o,options:{spanGaps:a}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,i,r){const s=a?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,h=t%l)}}for(const p of t){h=a?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=yE(i.setContext(II(r,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:o}))),vE(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,i):t}function yE(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function vE(e,t){if(!t)return!1;const n=[],i=function(e,t){return zS(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}class bE{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach((i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)})))}_refresh(){this._request||(this._running=!0,this._request=AS.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,o=r.length-1,a=!1;for(;o>=0;--o)s=r[o],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),a=!0):(r[o]=r[r.length-1],r.pop());a&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length})),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce(((e,t)=>Math.max(e,t._duration)),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var wE=new bE;const _E="transparent",xE={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=US(e||_E),r=i.valid&&US(t||_E);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class kE{constructor(e,t,n,i){const r=t[n];i=SI([e.to,i,r,e.from]);const s=SI([e.from,r,i]);this._active=!0,this._fn=e.fn||xE[e.type||typeof s],this._easing=VS[e.easing]||VS.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=SI([e.to,t,i,e.from]),this._from=SI([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,o=this._to;let a;if(this._active=r!==o&&(s||t<n),!this._active)return this._target[i]=o,void this._notify(!0);t<0?this._target[i]=r:(a=t/n%2,a=s&&a>1?2-a:a,a=this._easing(Math.min(1,Math.max(0,a))),this._target[i]=this._fn(r,o,a))}wait(){const e=this._promises||(this._promises=[]);return new Promise(((t,n)=>{e.push({res:t,rej:n})}))}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class SE{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!Ok(e))return;const t=Object.keys(ZS.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach((i=>{const r=e[i];if(!Ok(r))return;const s={};for(const e of t)s[e]=r[e];(Nk(r.properties)&&r.properties||[i]).forEach((e=>{e!==i&&n.has(e)||n.set(e,s)}))}))}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then((()=>{e.options=n}),(()=>{})),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),o=Date.now();let a;for(a=s.length-1;a>=0;--a){const l=s[a];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,o);continue}u.cancel()}h&&h.duration?(r[l]=u=new kE(h,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(wE.add(this._chart,n),!0):void 0}}function IE(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function EE(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function TE(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let o,a,l,c;if(null!==t){for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(i.all)continue;break}c=e.values[l],Mk(c)&&(s||0===t||lS(t)===lS(c))&&(t+=c)}return t}}function CE(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function AE(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function PE(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function DE(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,o,i),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=AE(r,u,n),d[a]=s,d._top=PE(d,o,!0,i.type),d._bottom=PE(d,o,!1,i.type);(d._visualValues||(d._visualValues={}))[a]=s}}function NE(e,t){const n=e.scales;return Object.keys(n).filter((e=>n[e].axis===t)).shift()}function OE(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const ME=e=>"reset"===e||"none"===e,RE=(e,t)=>t?e:Object.assign({},e);class LE{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=CE(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&OE(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=Lk(n.xAxisID,NE(e,"x")),s=t.yAxisID=Lk(n.yAxisID,NE(e,"y")),o=t.rAxisID=Lk(n.rAxisID,NE(e,"r")),a=t.indexAxis,l=t.iAxisID=i(a,r,s,o),c=t.vAxisID=i(a,s,r,o);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(o),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&TS(this._data,this),e._stacked&&OE(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(Ok(t))this._data=function(e){const t=Object.keys(e),n=new Array(t.length);let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],n[i]={x:s,y:e[s]};return n}(t);else if(n!==t){if(n){TS(n,this);const e=this._cachedMeta;OE(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),ES.forEach((t=>{const n="_onData"+Yk(t),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const o=i.apply(this,r);return e._chartjs.listeners.forEach((e=>{"function"===typeof e[n]&&e[n](...r)})),o}})})))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=CE(t.vScale,t),t.stack!==n.stack&&(i=!0,OE(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&DE(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,o=r.axis;let a,l,c,u=0===e&&t===i.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=Nk(i[e])?this.parseArrayData(n,i,e,t):Ok(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[o]||h&&l[o]<h[o];for(a=0;a<t;++a)n._parsed[a+e]=l=c[a],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&DE(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,o=r.axis,a=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[o]:c||r.parse(l[f],f),[a]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,o=new Array(i);let a,l,c,u;for(a=0,l=i;a<l;++a)c=a+n,u=t[c],o[a]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return o}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=t[h],l[c]={x:r.parse(Qk(d,o),h),y:s.parse(Qk(d,a),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return TE({keys:EE(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const o=i&&n._stacks[t.axis];i&&o&&(i.values=o,s=TE(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,o=this._getOtherScale(e),a=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:EE(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(o);let h,d;function f(){d=i[h];const t=d[o.axis];return!Mk(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,a),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,a);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],Mk(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return Ok(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(Lk(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=IE(e,n),r=IE(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],o=this._drawStart||0,a=this._drawCount||i.length-o,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,o,a),c=o;c<o+a;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return II(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return II(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,o=r[s],a=this.enableOptionSharing&&Xk(n);if(o)return RE(o,a);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(ZS.elements[e]),f=l.resolveNamedOptions(h,d,(()=>this.getContext(n,i,t)),u);return f.$shared&&(f.$shared=a,r[s]=Object.freeze(RE(f,a))),f}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),o=r[s];if(o)return o;let a;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);a=i.createResolver(s,this.getContext(e,n,t))}const l=new SE(i,a&&a.animations);return a&&a._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||ME(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){ME(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!ME(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[o,a,l]of this._syncList)this[o](a,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let o;const a=e=>{for(e.length+=t,o=e.length-1;o>=s;o--)e[o]=e[o-t]};for(a(r),o=e;o<s;++o)r[o]=new this.dataElementType;this._parsing&&a(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&OE(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function FE(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=CS(i.sort(((e,t)=>e-t)))}return e._cache.$bar}(t,e.type);let i,r,s,o,a=t._length;const l=()=>{32767!==s&&-32768!==s&&(Xk(o)&&(a=Math.min(a,Math.abs(s-o)||a)),o=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),l();for(o=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),l();return a}function VE(e,t,n,i){return Nk(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function zE(e,t,n,i){const r=e.iScale,s=e.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=t[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(VE(d,h,s,c));return l}function UE(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function jE(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:o,end:a,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[BE(u,o,a,l)]=!0,r=c)),s[BE(r,o,a,l)]=!0,e.borderSkipped=s}function BE(e,t,n,i){var r,s,o;return i?(o=n,e=qE(e=(r=e)===(s=t)?o:r===o?s:r,n,t)):e=qE(e,t,n),e}function qE(e,t,n){return"start"===e?t:"end"===e?n:e}function WE(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}Yx(LE,"defaults",{}),Yx(LE,"datasetElementType",null),Yx(LE,"dataElementType",null);class HE extends LE{parsePrimitiveData(e,t,n,i){return zE(e,t,n,i)}parseArrayData(e,t,n,i){return zE(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:o="x",yAxisKey:a="y"}=this._parsing,l="x"===r.axis?o:a,c="x"===s.axis?o:a,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=t[h],f={},f[r.axis]=r.parse(Qk(p,l),h),u.push(VE(Qk(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,o=UE(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:o}}=this,a=o.getBasePixel(),l=o.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=r||Dk(t[o.axis])?{base:a,head:a}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[o.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||UE(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,e[d].active?"active":i));const m=g.options||e[d].options;jE(g,m,p,s),WE(g,m,c.ratio),this.updateElement(e[d],d,g,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter((e=>e.controller.options.grouped)),r=n.options.stacked,s=[],o=e=>{const n=e.controller.getParsed(t),i=n&&n[e.vScale.axis];if(Dk(i)||isNaN(i))return!0};for(const a of i)if((void 0===t||!o(a))&&((!1===r||-1===s.indexOf(a.stack)||void 0===r&&void 0===a.stack)&&s.push(a.stack),a.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const o=e.barThickness;return{min:o||FE(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:o?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,o=r||0,a=this.getParsed(e),l=a._custom,c=UE(l);let u,h,d=a[t.axis],f=0,p=n?this.applyStack(t,a,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&lS(d)!==lS(l.barEnd)&&(f=0),f+=d);const g=Dk(r)||c?f:r;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(e,t,n){return 0!==e?lS(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,o)*s,d===o&&(m-=h/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),f=Math.max(e,r);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(a._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(o)){const e=lS(h)*t.getLineWidthForValue(o)/2;m+=e,h-=e}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=Lk(i.maxBarThickness,1/0);let o,a;if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,l="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let o=e>0?r[e-1]:null,a=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===o&&(o=s-(null===a?t.end-t.start:a-s)),null===a&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n):function(e,t,n,i){const r=n.barThickness;let s,o;return Dk(r)?(s=t.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[e]-s/2}}(e,t,i,n),c=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0);o=l.start+l.chunk*c+l.chunk/2,a=Math.min(s,l.chunk*l.ratio)}else o=n.getPixelForValue(this.getParsed(e)[n.axis],e),a=Math.min(s,t.min*t.ratio);return{base:o-a/2,head:o+a/2,center:o,size:a}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[t.axis]&&n[r].draw(this._ctx)}}Yx(HE,"id","bar"),Yx(HE,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Yx(HE,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class KE extends LE{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=Lk(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=Lk(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+o+", "+a+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:a,includeOptions:l}=this._getSharedOptions(t,i),c=s.axis,u=o.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=r?o.getBasePixel():o.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=a||this.resolveDataElementOptions(h,t.active?"active":i),r&&(d.options.radius=0)),this.updateElement(t,h,d,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=Lk(n&&n._custom,r),i}}Yx(KE,"id","bubble"),Yx(KE,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),Yx(KE,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class GE extends LE{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,o=e=>+n[e];if(Ok(n[e])){const{key:e="value"}=this._parsing;o=t=>+Qk(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=o(r)}}_getRotation(){return fS(this.options.rotation-90)}_getCircumference(){return fS(this.options.circumference)}_getRotationExtents(){let e=eS,t=-eS;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,o=Math.max((Math.min(n.width,n.height)-s)/2,0),a=Math.min((l=this.options.cutout,c=o,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let i=1,r=1,s=0,o=0;if(t<eS){const a=e,l=a+t,c=Math.cos(a),u=Math.sin(a),h=Math.cos(l),d=Math.sin(l),f=(e,t,i)=>wS(e,a,l,!0)?1:Math.max(t,t*n,i,i*n),p=(e,t,i)=>wS(e,a,l,!0)?-1:Math.min(t,t*n,i,i*n),g=f(0,c,h),m=f(rS,u,d),y=p(Zk,c,h),v=p(Zk+rS,u,d);i=(g-y)/2,r=(m-v)/2,s=-(g+y)/2,o=-(m+v)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}(d,h,a),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),w=Fk(this.options.radius,b),_=(w-Math.max(w*a,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,i.total=this.calculateTotal(),this.outerRadius=w-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/eS)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.chartArea,a=s.options.animation,l=(o.left+o.right)/2,c=(o.top+o.bottom)/2,u=r&&a.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,i);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,r);for(g=t;g<t+n;++g){const t=this._circumference(g,r),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":i)),m+=t,this.updateElement(n,g,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?eS*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=HS(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,o,a;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,o=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)a=o.resolveDataElementOptions(i),"inner"!==a.borderAlign&&(t=Math.max(t,a.borderWidth||0,a.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(Lk(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}Yx(GE,"id","doughnut"),Yx(GE,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),Yx(GE,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),Yx(GE,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class QE extends LE{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:o,count:a}=OS(t,i,s);this._drawStart=o,this._drawCount=a,MS(t)&&(o=0,a=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(i,o,a,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),h=s.axis,d=o.axis,{spanGaps:f,segment:p}=this.options,g=hS(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||r||"none"===i,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let w=0;w<v;++w){const n=e[w],f=m?n:{};if(w<t||w>=y){f.skip=!0;continue}const v=this.getParsed(w),_=Dk(v[d]),x=f[h]=s.getPixelForValue(v[h],w),k=f[d]=r||_?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,v,a):v[d],w);f.skip=isNaN(x)||isNaN(k)||_,f.stop=w>0&&Math.abs(v[h]-b[h])>g,p&&(f.parsed=v,f.raw=l.data[w]),u&&(f.options=c||this.resolveDataElementOptions(w,n.active?"active":i)),m||this.updateElement(n,w,f,i),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Yx(QE,"id","line"),Yx(QE,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Yx(QE,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class YE extends LE{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=HS(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return zI.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach(((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))})),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,o=s.options.animation,a=this._cachedMeta.rScale,l=a.xCenter,c=a.yCenter,u=a.getIndexAngle(0)-.5*Zk;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,i,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,i,f),g=s.getDataVisibility(h)?a.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(o.animateScale&&(g=0),o.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":i)};this.updateElement(t,h,m,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach(((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++})),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?fS(this.resolveDataElementOptions(e,t).angle||n):0}}Yx(YE,"id","polarArea"),Yx(YE,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),Yx(YE,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map(((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}}))}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class XE extends GE{}Yx(XE,"id","pie"),Yx(XE,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class $E extends LE{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return zI.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let o=t;o<t+n;o++){const t=e[o],n=this.resolveDataElementOptions(o,t.active?"active":i),a=r.getPointPositionForValue(o,this.getParsed(o).r),l=s?r.xCenter:a.x,c=s?r.yCenter:a.y,u={x:l,y:c,angle:a.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,o,u,i)}}}Yx($E,"id","radar"),Yx($E,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),Yx($E,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class JE extends LE{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),o=i.getLabelForValue(s.x),a=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+o+", "+a+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=OS(t,n,i);if(this._drawStart=r,this._drawCount=s,MS(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const o=this.resolveDatasetElementOptions(e);o.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:o},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:o,_stacked:a,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=s.axis,f=o.axis,{spanGaps:p,segment:g}=this.options,m=hS(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||r||"none"===i;let v=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=y?t:{},p=Dk(n[f]),w=c[d]=s.getPixelForValue(n[d],b),_=c[f]=r||p?o.getBasePixel():o.getPixelForValue(a?this.applyStack(o,n,a):n[f],b);c.skip=isNaN(w)||isNaN(_)||p,c.stop=b>0&&Math.abs(n[d]-v[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":i)),y||this.updateElement(t,b,c,i),v=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}Yx(JE,"id","scatter"),Yx(JE,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),Yx(JE,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var ZE=Object.freeze({__proto__:null,BarController:HE,BubbleController:KE,DoughnutController:GE,LineController:QE,PieController:XE,PolarAreaController:YE,RadarController:$E,ScatterController:JE});function eT(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class tT{static override(e){Object.assign(tT.prototype,e)}constructor(e){Yx(this,"options",void 0),this.options=e||{}}init(){}formats(){return eT()}parse(){return eT()}format(){return eT()}add(){return eT()}diff(){return eT()}startOf(){return eT()}endOf(){return eT()}}var nT=tT;function iT(e,t,n,i){const{controller:r,data:s,_sorted:o}=e,a=r._cachedMeta.iScale;if(a&&t===a.axis&&"r"!==t&&o&&s.length){const e=a._reversePixels?IS:SS;if(!i)return e(s,t,n);if(r._sharedOptions){const i=s[0],r="function"===typeof i.getRange&&i.getRange(t);if(r){const i=e(s,t,n-r),o=e(s,t,n+r);return{lo:i.lo,hi:o.hi}}}}return{lo:0,hi:s.length-1}}function rT(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),o=n[t];for(let a=0,l=s.length;a<l;++a){const{index:e,data:n}=s[a],{lo:l,hi:c}=iT(s[a],t,o,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function sT(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return rT(e,n,t,(function(n,o,a){(r||oI(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:o,index:a})}),!0),s}function oT(e,t,n,i,r,s){let o=[];const a=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return rT(e,n,t,(function(n,c,u){const h=n.inRange(t.x,t.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=a(t,d);f<l?(o=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&o.push({element:n,datasetIndex:c,index:u})})),o}function aT(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?oT(e,t,n,i,r,s):function(e,t,n,i){let r=[];return rT(e,n,t,(function(e,n,s){const{startAngle:o,endAngle:a}=e.getProps(["startAngle","endAngle"],i),{angle:l}=mS(e,{x:t.x,y:t.y});wS(l,o,a)&&r.push({element:e,datasetIndex:n,index:s})})),r}(e,t,n,r):[]}function lT(e,t,n,i,r){const s=[],o="x"===n?"inXRange":"inYRange";let a=!1;return rT(e,n,t,((e,i,l)=>{e[o](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),a=a||e.inRange(t.x,t.y,r))})),i&&!a?[]:s}var cT={evaluateInteractionItems:rT,modes:{index(e,t,n,i){const r=eE(t,e),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?sT(e,r,s,i,o):aT(e,r,s,!1,i,o),l=[];return a.length?(e.getSortedVisibleDatasetMetas().forEach((e=>{const t=a[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})})),l):[]},dataset(e,t,n,i){const r=eE(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?sT(e,r,s,i,o):aT(e,r,s,!1,i,o);if(a.length>0){const t=a[0].datasetIndex,n=e.getDatasetMeta(t).data;a=[];for(let e=0;e<n.length;++e)a.push({element:n[e],datasetIndex:t,index:e})}return a},point:(e,t,n,i)=>sT(e,eE(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=eE(t,e),s=n.axis||"xy",o=n.includeInvisible||!1;return aT(e,r,s,n.intersect,i,o)},x:(e,t,n,i)=>lT(e,eE(t,e),"x",n.intersect,i),y:(e,t,n,i)=>lT(e,eE(t,e),"y",n.intersect,i)}};const uT=["left","top","right","bottom"];function hT(e,t){return e.filter((e=>e.pos===t))}function dT(e,t){return e.filter((e=>-1===uT.indexOf(e.pos)&&e.box.axis===t))}function fT(e,t){return e.sort(((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function pT(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!uT.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,o,a;for(s=0,o=e.length;s<o;++s){a=e[s];const{fullSize:o}=a.box,l=n[a.stack],c=l&&a.stackWeight/l.weight;a.horizontal?(a.width=c?c*i:o&&t.availableWidth,a.height=r):(a.width=i,a.height=c?c*r:o&&t.availableHeight)}return n}function gT(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function mT(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function yT(e,t,n,i){const{pos:r,box:s}=n,o=e.maxPadding;if(!Ok(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&mT(o,s.getPadding());const a=Math.max(0,t.outerWidth-gT(o,e,"left","right")),l=Math.max(0,t.outerHeight-gT(o,e,"top","bottom")),c=a!==e.w,u=l!==e.h;return e.w=a,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function vT(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach((e=>{i[e]=Math.max(t[e],n[e])})),i}return i(e?["left","right"]:["top","bottom"])}function bT(e,t,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=e.length,c=0;s<o;++s){a=e[s],l=a.box,l.update(a.width||t.w,a.height||t.h,vT(a.horizontal,t));const{same:o,other:h}=yT(t,n,a,i);c|=o&&r.length,u=u||h,l.fullSize||r.push(a)}return c&&bT(r,t,n,i)||u}function wT(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function _T(e,t,n,i){const r=n.padding;let{x:s,y:o}=t;for(const a of e){const e=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},c=a.stackWeight/l.weight||1;if(a.horizontal){const i=t.w*c,s=l.size||e.height;Xk(l.start)&&(o=l.start),e.fullSize?wT(e,r.left,o,n.outerWidth-r.right-r.left,s):wT(e,t.left+l.placed,o,i,s),l.start=o,l.placed+=i,o=e.bottom}else{const i=t.h*c,o=l.size||e.width;Xk(l.start)&&(s=l.start),e.fullSize?wT(e,s,r.top,o,n.outerHeight-r.bottom-r.top):wT(e,s,t.top+l.placed,o,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=o}var xT={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=xI(e.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(n-r.height,0),a=function(e){const t=function(e){const t=[];let n,i,r,s,o,a;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:o,stackWeight:a=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}(e),n=fT(t.filter((e=>e.box.fullSize)),!0),i=fT(hT(t,"left"),!0),r=fT(hT(t,"right")),s=fT(hT(t,"top"),!0),o=fT(hT(t,"bottom")),a=dT(t,"x"),l=dT(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:hT(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}(e.boxes),l=a.vertical,c=a.horizontal;zk(e.boxes,(e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()}));const u=l.reduce(((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1),0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),d=Object.assign({},r);mT(d,xI(i));const f=Object.assign({maxPadding:d,w:s,h:o,x:r.left,y:r.top},r),p=pT(l.concat(c),h);bT(a.fullSize,f,h,p),bT(l,f,h,p),bT(c,f,h,p)&&bT(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),_T(a.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,_T(a.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},zk(a.chartArea,(t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class kT{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class ST extends kT{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const IT="$chartjs",ET={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},TT=e=>null===e||""===e;const CT=!!rE&&{passive:!0};function AT(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,CT)}function PT(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function DT(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||PT(n.addedNodes,i),t=t&&!PT(n.removedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function NT(e,t,n){const i=e.canvas,r=new MutationObserver((e=>{let t=!1;for(const n of e)t=t||PT(n.removedNodes,i),t=t&&!PT(n.addedNodes,i);t&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const OT=new Map;let MT=0;function RT(){const e=window.devicePixelRatio;e!==MT&&(MT=e,OT.forEach(((t,n)=>{n.currentDevicePixelRatio!==e&&t()})))}function LT(e,t,n){const i=e.canvas,r=i&&QI(i);if(!r)return;const s=PS(((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()}),window),o=new ResizeObserver((e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)}));return o.observe(r),function(e,t){OT.size||window.addEventListener("resize",RT),OT.set(e,t)}(e,s),o}function FT(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){OT.delete(e),OT.size||window.removeEventListener("resize",RT)}(e)}function VT(e,t,n){const i=e.canvas,r=PS((t=>{null!==e.ctx&&n(function(e,t){const n=ET[e.type]||e.type,{x:i,y:r}=eE(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))}),e);return function(e,t,n){e&&e.addEventListener(t,n,CT)}(i,t,r),r}class zT extends kT{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[IT]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",TT(r)){const t=sE(e,"width");void 0!==t&&(e.width=t)}if(TT(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=sE(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[IT])return!1;const n=t[IT].initial;["height","width"].forEach((e=>{const i=n[e];Dk(i)?t.removeAttribute(e):t.setAttribute(e,i)}));const i=n.style||{};return Object.keys(i).forEach((e=>{t.style[e]=i[e]})),t.width=t.width,delete t[IT],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:DT,detach:NT,resize:LT}[t]||VT;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:FT,detach:FT,resize:FT}[t]||AT)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return nE(e,t,n,i)}isAttached(e){const t=QI(e);return!(!t||!t.isConnected)}}class UT{constructor(){Yx(this,"x",void 0),Yx(this,"y",void 0),Yx(this,"active",!1),Yx(this,"options",void 0),Yx(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return hS(this.x)&&hS(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach((e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]})),i}}function jT(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return function(e,t,n,i){let r,s=0,o=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===o&&(t.push(e[r]),s++,o=n[s*i])}(t,c,s,o/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort(((e,t)=>e-t)).pop(),t}(i);for(let o=0,a=s.length-1;o<a;o++){const e=s[o];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(o>0){let e,n;const i=o>1?Math.round((l-a)/(o-1)):null;for(BT(t,c,u,Dk(i)?0:a-i,a),e=0,n=o-1;e<n;e++)BT(t,c,u,s[e],s[e+1]);return BT(t,c,u,l,Dk(i)?t.length:l+i),c}return BT(t,c,u),c}function BT(e,t,n,i,r){const s=Lk(i,0),o=Math.min(Lk(r,e.length),e.length);let a,l,c,u=0;for(n=Math.ceil(n),r&&(a=r-i,n=a/Math.floor(a/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<o;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}Yx(UT,"defaults",{}),Yx(UT,"defaultRoutes",void 0);const qT=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,WT=(e,t)=>Math.min(t||e,e);function HT(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function KT(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,o=e._endPixel,a=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,o-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-a||c>o+a)))return c}function GT(e){return e.drawTicks?e.tickLength:0}function QT(e,t){if(!e.display)return 0;const n=kI(e.font,t),i=xI(e.padding);return(Nk(e.text)?e.text.length:1)*n.lineHeight+i.height}function YT(e,t,n){let i=DS(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class XT extends UT{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=Rk(e,Number.POSITIVE_INFINITY),t=Rk(t,Number.NEGATIVE_INFINITY),n=Rk(n,Number.POSITIVE_INFINITY),i=Rk(i,Number.NEGATIVE_INFINITY),{min:Rk(e,n),max:Rk(t,i),minDefined:Mk(e),maxDefined:Mk(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const o=this.getMatchingVisibleMetas();for(let a=0,l=o.length;a<l;++a)t=o[a].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Rk(n,Rk(i,n)),max:Rk(i,Rk(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Vk(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=Fk(t,(r-i)/2),o=(e,t)=>n&&0===e?0:e+t;return{min:o(i,-Math.abs(s)),max:o(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const a=o<this.ticks.length;this._convertTicksToLabels(a?HT(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=jT(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),a&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Vk(this.options.afterUpdate,[this])}beforeSetDimensions(){Vk(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Vk(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Vk(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Vk(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=Vk(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){Vk(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Vk(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=WT(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,o,a,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=_S(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),o=this.maxHeight-GT(e.grid)-t.padding-QT(e.title,this.chart.options.font),a=Math.sqrt(u*u+h*h),l=pS(Math.min(Math.asin(_S((c.highest.height+6)/s,-1,1)),Math.asin(_S(o/a,-1,1))-Math.asin(_S(h/a,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){Vk(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Vk(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const s=QT(i,t.options.font);if(o?(e.width=this.maxWidth,e.height=GT(r)+s):(e.height=this.maxHeight,e.width=GT(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),a=2*n.padding,l=fS(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(o){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+a)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+a)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),o?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:o}=this.options,a=0!==this.labelRotation,l="top"!==o&&"x"===this.axis;if(this.isHorizontal()){const o=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;a?l?(u=i*e.width,h=n*t.height):(u=n*e.height,h=i*t.width):"start"===r?h=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-o+s)*this.width/(this.width-o),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Vk(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)Dk(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=HT(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],o=[],a=Math.floor(t/WT(t,n));let l,c,u,h,d,f,p,g,m,y,v,b=0,w=0;for(l=0;l<t;l+=a){if(h=e[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,Dk(h)||Nk(h)){if(Nk(h))for(c=0,u=h.length;c<u;++c)v=h[c],Dk(v)||Nk(v)||(m=eI(i,p.data,p.gc,m,v),y+=g)}else m=eI(i,p.data,p.gc,m,h),y=g;s.push(m),o.push(y),b=Math.max(m,b),w=Math.max(y,w)}!function(e,t){zk(e,(e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}}))}(r,t);const _=s.indexOf(b),x=o.indexOf(w),k=e=>({width:s[e]||0,height:o[e]||0});return{first:k(0),last:k(t-1),widest:k(_),highest:k(x),widths:s,heights:o}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return _S(this._alignToPixels?nI(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return II(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=II(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=fS(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,o=r?r.widest.width+s:0,a=r?r.highest.height+s:0;return this.isHorizontal()?a*n>o*i?o/n:a/i:a*i<o*n?a/n:o/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:o}=i,a=r.offset,l=this.isHorizontal(),c=this.ticks.length+(a?1:0),u=GT(r),h=[],d=o.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(e){return nI(n,e,f)};let m,y,v,b,w,_,x,k,S,I,E,T;if("top"===s)m=g(this.bottom),_=this.bottom-u,k=m-p,I=g(e.top)+p,T=e.bottom;else if("bottom"===s)m=g(this.top),I=e.top,T=g(e.bottom)-p,_=m+p,k=this.top+u;else if("left"===s)m=g(this.right),w=this.right-u,x=m-p,S=g(e.left)+p,E=e.right;else if("right"===s)m=g(this.left),S=e.left,E=g(e.right)-p,w=m+p,x=this.left+u;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(Ok(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}I=e.top,T=e.bottom,_=m+p,k=_+u}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(Ok(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}w=m-p,x=w-u,S=e.left,E=e.right}const C=Lk(i.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/C));for(y=0;y<c;y+=A){const e=this.getContext(y),t=r.setContext(e),i=o.setContext(e),s=t.lineWidth,c=t.color,u=i.dash||[],d=i.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;v=KT(this,y,a),void 0!==v&&(b=nI(n,v,s),l?w=x=S=E=b:_=k=I=T=b,h.push({tx1:w,ty1:_,tx2:x,ty2:k,x1:S,y1:I,x2:E,y2:T,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),o=this.ticks,{align:a,crossAlign:l,padding:c,mirror:u}=r,h=GT(n.grid),d=h+c,f=u?-c:d,p=-fS(this.labelRotation),g=[];let m,y,v,b,w,_,x,k,S,I,E,T,C="middle";if("top"===i)_=this.bottom-f,x=this._getXAxisLabelAlignment();else if("bottom"===i)_=this.top+f,x=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,w=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(h);x=e.textAlign,w=e.x}else if("x"===t){if("center"===i)_=(e.top+e.bottom)/2+d;else if(Ok(i)){const e=Object.keys(i)[0],t=i[e];_=this.chart.scales[e].getPixelForValue(t)+d}x=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)w=(e.left+e.right)/2-d;else if(Ok(i)){const e=Object.keys(i)[0],t=i[e];w=this.chart.scales[e].getPixelForValue(t)}x=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===a?C="top":"end"===a&&(C="bottom"));const A=this._getLabelSizes();for(m=0,y=o.length;m<y;++m){v=o[m],b=v.label;const e=r.setContext(this.getContext(m));k=this.getPixelForTick(m)+r.labelOffset,S=this._resolveTickFontOptions(m),I=S.lineHeight,E=Nk(b)?b.length:1;const t=E/2,n=e.color,a=e.textStrokeColor,c=e.textStrokeWidth;let h,d=x;if(s?(w=k,"inner"===x&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),T="top"===i?"near"===l||0!==p?-E*I+I/2:"center"===l?-A.highest.height/2-t*I+I:-A.highest.height+I/2:"near"===l||0!==p?I/2:"center"===l?A.highest.height/2-t*I:A.highest.height-E*I,u&&(T*=-1),0===p||e.showLabelBackdrop||(w+=I/2*Math.sin(p))):(_=k,T=(1-E)*I/2),e.showLabelBackdrop){const t=xI(e.backdropPadding),n=A.heights[m],i=A.widths[m];let r=T-t.top,s=0-t.left;switch(C){case"middle":r-=n/2;break;case"bottom":r-=n}switch(x){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":m===y-1?s-=i:m>0&&(s-=i/2)}h={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:b,font:S,textOffset:T,options:{rotation:p,color:n,strokeColor:a,strokeWidth:c,textAlign:d,textBaseline:C,translation:[w,_],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-fS(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,o=this._getLabelSizes().widest.width;let a,l;return"left"===t?i?(l=this.right+r,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l+=o)):(l=this.right-s,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?a="right":"center"===n?(a="center",l-=o/2):(a="left",l-=o)):(l=this.left+s,"near"===n?a="left":"center"===n?(a="center",l+=o/2):(a="right",l=this.right)):a="right",{textAlign:a,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex((t=>t.value===e));if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const o=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&o({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&o({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,a=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=nI(e,this.left,s)-s/2,c=nI(e,this.right,o)+o/2,u=h=a):(u=nI(e,this.top,s)-s/2,h=nI(e,this.bottom,o)+o/2,l=c=a),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&aI(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;fI(t,r.label,0,r.textOffset,n,e)}n&&lI(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=kI(n.font),s=xI(n.padding),o=n.align;let a=r.lineHeight/2;"bottom"===t||"center"===t||Ok(t)?(a+=s.bottom,Nk(n.text)&&(a+=r.lineHeight*(n.text.length-1))):a+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=o-r,m=a-s;if(e.isHorizontal()){if(d=NS(i,s,a),Ok(n)){const e=Object.keys(n)[0],i=n[e];f=u[e].getPixelForValue(i)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:qT(e,n,t);h=a-s}else{if(Ok(n)){const e=Object.keys(n)[0],i=n[e];d=u[e].getPixelForValue(i)-m+t}else d="center"===n?(c.left+c.right)/2-m+t:qT(e,n,t);f=NS(i,o,r),p="left"===n?-rS:rS}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,a,t,o);fI(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:YT(o,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=Lk(e.grid&&e.grid.z,-1),i=Lk(e.border&&e.border.z,0);return this._isVisible()&&this.draw===XT.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return kI(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $T{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=Wk(Object.create(null),[n?ZS.get(n):{},ZS.get(t),e.defaults]);ZS.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach((n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),o=t[n].split("."),a=o.pop(),l=o.join(".");ZS.route(s,r,l,a)}))}(t,e.defaultRoutes);e.descriptors&&ZS.describe(t,e.descriptors)}(e,s,n),this.override&&ZS.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in ZS[i]&&(delete ZS[i][n],this.override&&delete QS[n])}}class JT{constructor(){this.controllers=new $T(LE,"datasets",!0),this.elements=new $T(UT,"elements"),this.plugins=new $T(Object,"plugins"),this.scales=new $T(XT,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach((t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):zk(t,(t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)}))}))}_exec(e,t,n){const i=Yk(e);Vk(n["before"+i],[],n),t[e](n),Vk(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var ZT=new JT;class eC{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===Vk(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){Dk(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=Lk(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(ZT.plugins.items);for(let s=0;s<i.length;s++)n.push(ZT.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const o=[],a=e.getContext();for(const l of r){const t=l.id,r=tC(n[t],i);null!==r&&o.push({plugin:l,options:nC(e.config,{plugin:l,local:s[t]},r,a)})}return o}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter((e=>!t.some((t=>e.plugin.id===t.plugin.id))));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function tC(e,t){return t||!1!==e?!0===e?{}:e:null}function nC(e,t,n,i){let{plugin:r,local:s}=t;const o=e.pluginScopeKeys(r),a=e.getOptionScopes(n,o);return s&&r.defaults&&a.push(r.defaults),e.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function iC(e,t){const n=ZS.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function rC(e){if("x"===e||"y"===e||"r"===e)return e}function sC(e){if(rC(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const s of n){const t=s.axis||("top"===(r=s.position)||"bottom"===r?"x":"left"===r||"right"===r?"y":void 0)||e.length>1&&rC(e[0].toLowerCase());if(t)return t}var r;throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function oC(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function aC(e,t){const n=QS[e.type]||{scales:{}},i=t.scales||{},r=iC(e.type,t),s=Object.create(null);return Object.keys(i).forEach((t=>{const o=i[t];if(!Ok(o))return console.error("Invalid scale configuration for scale: ".concat(t));if(o._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const a=sC(t,o,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter((t=>t.xAxisID===e||t.yAxisID===e));if(n.length)return oC(e,"x",n[0])||oC(e,"y",n[0])}return{}}(t,e),ZS.scales[o.type]),l=function(e,t){return e===t?"_index_":"_value_"}(a,r),c=n.scales||{};s[t]=Hk(Object.create(null),[{axis:a},o,c[a],c[l]])})),e.data.datasets.forEach((n=>{const r=n.type||e.type,o=n.indexAxis||iC(r,t),a=(QS[r]||{}).scales||{};Object.keys(a).forEach((e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,o),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),Hk(s[r],[{axis:t},i[r],a[e]])}))})),Object.keys(s).forEach((e=>{const t=s[e];Hk(t,[ZS.scales[t.type],ZS.scale])})),s}function lC(e){const t=e.options||(e.options={});t.plugins=Lk(t.plugins,{}),t.scales=aC(e,t)}function cC(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const uC=new Map,hC=new Set;function dC(e,t){let n=uC.get(e);return n||(n=t(),uC.set(e,n),hC.add(n)),n}const fC=(e,t,n)=>{const i=Qk(t,n);void 0!==i&&e.add(i)};class pC{constructor(e){this._config=function(e){return(e=e||{}).data=cC(e.data),lC(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=cC(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),lC(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return dC(e,(()=>[["datasets.".concat(e),""]]))}datasetAnimationScopeKeys(e,t){return dC("".concat(e,".transition.").concat(t),(()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]]))}datasetElementScopeKeys(e,t){return dC("".concat(e,"-").concat(t),(()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]]))}pluginScopeKeys(e){const t=e.id,n=this.type;return dC("".concat(n,"-plugin-").concat(t),(()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]]))}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),o=s.get(t);if(o)return o;const a=new Set;t.forEach((t=>{e&&(a.add(e),t.forEach((t=>fC(a,e,t)))),t.forEach((e=>fC(a,i,e))),t.forEach((e=>fC(a,QS[r]||{},e))),t.forEach((e=>fC(a,ZS,e))),t.forEach((e=>fC(a,YS,e)))}));const l=Array.from(a);return 0===l.length&&l.push(Object.create(null)),hC.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,QS[t]||{},ZS.datasets[t]||{},{type:t},ZS,YS]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:o}=gC(this._resolverCache,e,i);let a=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=CI(e);for(const r of t){const t=n(r),s=i(r),o=(s||t)&&e[r];if(t&&($k(o)||mC(o))||s&&Nk(o))return!0}return!1}(s,t)){r.$shared=!1;a=TI(s,n=$k(n)?n():n,this.createResolver(e,n,o))}for(const l of t)r[l]=a[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=gC(this._resolverCache,e,n);return Ok(t)?TI(r,t,void 0,i):r}}function gC(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:EI(t,n),subPrefixes:n.filter((e=>!e.toLowerCase().includes("hover")))},i.set(r,s)}return s}const mC=e=>Ok(e)&&Object.getOwnPropertyNames(e).some((t=>$k(e[t])));const yC=["top","bottom","left","right","chartArea"];function vC(e,t){return"top"===e||"bottom"===e||-1===yC.indexOf(e)&&"x"===t}function bC(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function wC(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Vk(n&&n.onComplete,[e],t)}function _C(e){const t=e.chart,n=t.options.animation;Vk(n&&n.onProgress,[e],t)}function xC(e){return GI()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const kC={},SC=e=>{const t=xC(e);return Object.values(kC).filter((e=>e.canvas===t)).pop()};function IC(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}function EC(e,t,n){return e.options.clip?e[n]:t[n]}class TC{static register(){ZT.add(...arguments),CC()}static unregister(){ZT.remove(...arguments),CC()}constructor(e,t){const n=this.config=new pC(t),i=xC(e),r=SC(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!GI()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?ST:zT}(i)),this.platform.updateConfig(n);const o=this.platform.acquireContext(i,s.aspectRatio),a=o&&o.canvas,l=a&&a.height,c=a&&a.width;this.id=Pk(),this.ctx=o,this.canvas=a,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new eC,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}((e=>this.update(e)),s.resizeDelay||0),this._dataChanges=[],kC[this.id]=this,o&&a?(wE.listen(this,"complete",wC),wE.listen(this,"progress",_C),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return Dk(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ZT}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():iE(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return iI(this.canvas,this.ctx),this}stop(){return wE.stop(this),this}resize(e,t){wE.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),o=n.devicePixelRatio||this.platform.getDevicePixelRatio(),a=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,iE(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Vk(n.onResize,[this,s],this),this.attached&&this._doResize(a)&&this.render())}ensureScalesHaveIDs(){zk(this.options.scales||{},((e,t)=>{e.id=t}))}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce(((e,t)=>(e[t]=!1,e)),{});let r=[];t&&(r=r.concat(Object.keys(t).map((e=>{const n=t[e],i=sC(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}})))),zk(r,(t=>{const r=t.options,s=r.id,o=sC(s,r),a=Lk(r.type,t.dtype);void 0!==r.position&&vC(r.position,o)===vC(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===a)l=n[s];else{l=new(ZT.getScale(a))({id:s,type:a,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)})),zk(i,((e,t)=>{e||delete n[t]})),zk(n,(e=>{xT.configure(this,e,e.options),xT.addBox(this,e)}))}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort(((e,t)=>e.index-t.index)),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(bC("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach(((e,n)=>{0===t.filter((t=>t===e._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||iC(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=ZT.getController(s),{datasetElementType:i,dataElementType:o}=ZS.datasets[s];Object.assign(t,{dataElementType:ZT.getElement(o),datasetElementType:i&&ZT.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){zk(this.data.datasets,((e,t)=>{this.getDatasetMeta(t).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||zk(r,(e=>{e.reset()})),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(bC("z","_idx"));const{_active:o,_lastEvent:a}=this;a?this._eventHandler(a,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){zk(this.scales,(e=>{xT.removeBox(this,e)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Jk(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){IC(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter((e=>e[0]===t)).map(((e,t)=>t+","+e.splice(1).join(",")))),i=n(0);for(let r=1;r<t;r++)if(!Jk(i,n(r)))return;return Array.from(i).map((e=>e.split(","))).map((e=>({method:e[1],start:+e[2],count:+e[3]})))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;xT.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],zk(this.boxes,(e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))}),this),this._layers.forEach(((e,t)=>{e._idx=t})),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,$k(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(wE.has(this)?this.attached&&!wE.running(this)&&wE.start(this):(this.draw(),wC({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resize(e,t),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,i=!n.disabled,r=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:EC(n,t,"left"),right:EC(n,t,"right"),top:EC(i,t,"top"),bottom:EC(i,t,"bottom")}:t}(e,this.chartArea),s={meta:e,index:e.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",s)&&(i&&aI(t,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),e.controller.draw(),i&&lI(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return oI(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=cT.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter((e=>e&&e._dataset===t)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=II(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);Xk(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update((t=>t.datasetIndex===e?i:void 0)))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),wE.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),iI(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete kC[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};zk(this.options.events,(e=>n(e,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",o)},t.isAttached(this.canvas)?o():s()}unbindEvents(){zk(this._listeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._listeners={},zk(this._responsiveListeners,((e,t)=>{this.platform.removeEventListener(this,t,e)})),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,o,a;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),o=0,a=e.length;o<a;++o){s=e[o];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}));!Uk(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter((t=>t.plugin.id===e)).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter((e=>!t.some((t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)))),s=r(t,e),o=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,o=this._getActiveElements(e,i,n,s),a=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,a);n&&(this._lastEvent=null,Vk(r.onHover,[e,o,this],this),a&&Vk(r.onClick,[e,o,this],this));const c=!Uk(o,i);return(c||t)&&(this._active=o,this._updateHoverStyles(o,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function CC(){return zk(TC.instances,(e=>e._plugins.invalidate()))}function AC(e,t,n,i){const r=bI(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,o=Math.min(s,i*t/2),a=e=>{const t=(n-Math.min(s,e))*i/2;return _S(e,0,Math.min(s,t))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:_S(r.innerStart,0,o),innerEnd:_S(r.innerEnd,0,o)}}function PC(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function DC(e,t,n,i,r,s){const{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const e=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==e?p*e/(e+i):p))/2}const g=(p-Math.max(.001,p*h-n/Zk)/h)/2,m=l+g+f,y=r-g-f,{outerStart:v,outerEnd:b,innerStart:w,innerEnd:_}=AC(t,d,h,y-m),x=h-v,k=h-b,S=m+v/x,I=y-b/k,E=d+w,T=d+_,C=m+w/E,A=y-_/T;if(e.beginPath(),s){const t=(S+I)/2;if(e.arc(o,a,h,S,t),e.arc(o,a,h,t,I),b>0){const t=PC(k,I,o,a);e.arc(t.x,t.y,b,I,y+rS)}const n=PC(T,y,o,a);if(e.lineTo(n.x,n.y),_>0){const t=PC(T,A,o,a);e.arc(t.x,t.y,_,y+rS,A+Math.PI)}const i=(y-_/d+(m+w/d))/2;if(e.arc(o,a,d,y-_/d,i,!0),e.arc(o,a,d,i,m+w/d,!0),w>0){const t=PC(E,C,o,a);e.arc(t.x,t.y,w,C+Math.PI,m-rS)}const r=PC(x,m,o,a);if(e.lineTo(r.x,r.y),v>0){const t=PC(x,S,o,a);e.arc(t.x,t.y,v,m-rS,S)}}else{e.moveTo(o,a);const t=Math.cos(S)*h+o,n=Math.sin(S)*h+a;e.lineTo(t,n);const i=Math.cos(I)*h+o,r=Math.sin(I)*h+a;e.lineTo(i,r)}e.closePath()}function NC(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,f="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,f?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let p=t.endAngle;if(s){DC(e,t,n,i,p,r);for(let t=0;t<s;++t)e.stroke();isNaN(a)||(p=o+(a%eS||eS))}f&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t;let c=r/a;e.beginPath(),e.arc(s,o,a,i-c,n+c),l>r?(c=r/l,e.arc(s,o,l,n+c,i-c,!0)):e.arc(s,o,r,n+rS,i-rS),e.closePath(),e.clip()}(e,t,p),s||(DC(e,t,n,i,p,r),e.stroke())}Yx(TC,"defaults",ZS),Yx(TC,"instances",kC),Yx(TC,"overrides",QS),Yx(TC,"registry",ZT),Yx(TC,"version","4.4.2"),Yx(TC,"getChart",SC);class OC extends UT{constructor(e){super(),Yx(this,"circumference",void 0),Yx(this,"endAngle",void 0),Yx(this,"fullCircles",void 0),Yx(this,"innerRadius",void 0),Yx(this,"outerRadius",void 0),Yx(this,"pixelMargin",void 0),Yx(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=mS(i,{x:e,y:t}),{startAngle:o,endAngle:a,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=Lk(u,a-o)>=eS||wS(r,o,a),f=xS(s,l+h,c+h);return d&&f}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:a,spacing:l}=this.options,c=(i+r)/2,u=(s+o+l+a)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>eS?Math.floor(n/eS):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const o=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(o)*i,Math.sin(o)*i);const a=i*(1-Math.sin(Math.min(Zk,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:o,circumference:a}=t;let l=t.endAngle;if(s){DC(e,t,n,i,l,r);for(let t=0;t<s;++t)e.fill();isNaN(a)||(l=o+(a%eS||eS))}DC(e,t,n,i,l,r),e.fill()}(e,this,a,r,s),NC(e,this,a,r,s),e.restore()}}function MC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=Lk(n.borderCapStyle,t.borderCapStyle),e.setLineDash(Lk(n.borderDash,t.borderDash)),e.lineDashOffset=Lk(n.borderDashOffset,t.borderDashOffset),e.lineJoin=Lk(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=Lk(n.borderWidth,t.borderWidth),e.strokeStyle=Lk(n.borderColor,t.borderColor)}function RC(e,t,n){e.lineTo(n.x,n.y)}function LC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function FC(e,t,n,i){const{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=LC(r,n,i),u=function(e){return e.stepped?cI:e.tension||"monotone"===e.cubicInterpolationMode?uI:RC}(s);let h,d,f,{move:p=!0,reverse:g}=i||{};for(h=0;h<=c;++h)d=r[(a+(g?c-h:h))%o],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,g,s.stepped),f=d);return l&&(d=r[(a+(g?c:0))%o],u(e,f,d,g,s.stepped)),!!l}function VC(e,t,n,i){const r=t.points,{count:s,start:o,ilen:a}=LC(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,g,m=0,y=0;const v=e=>(o+(c?a-e:e))%s,b=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(h=r[v(0)],e.moveTo(h.x,h.y)),u=0;u<=a;++u){if(h=r[v(u)],h.skip)continue;const t=h.x,n=h.y,i=0|t;i===d?(n<f?f=n:n>p&&(p=n),m=(y*m+t)/++y):(b(),e.lineTo(t,n),d=i,y=0,f=p=n),g=n}b()}function zC(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?VC:FC}Yx(OC,"id","arc"),Yx(OC,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0}),Yx(OC,"defaultRoutes",{backgroundColor:"backgroundColor"}),Yx(OC,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const UC="function"===typeof Path2D;function jC(e,t,n,i){UC&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),MC(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,o=zC(t);for(const a of r)MC(e,s,a.style),e.beginPath(),o(e,t,a,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class BC extends UT{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;KI(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:o,end:a}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return mE(e,!0===i?[{start:o,end:a,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let o,a=t,l=e[t];for(o=t+1;o<=n;++o){const n=e[o%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:t%r,end:(o-1)%r,loop:i}),t=a=n.stop?o:null):(a=o,l.skip&&(t=o)),l=n}return null!==a&&s.push({start:t%r,end:a%r,loop:i}),s}(n,o,a<o?a+r:a,!!e._fullLoop&&0===o&&a===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=gE(this,{property:t,start:i,end:i});if(!s.length)return;const o=[],a=function(e){return e.stepped?aE:e.tension||"monotone"===e.cubicInterpolationMode?lE:oE}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=r[c],d=r[u];if(h===d){o.push(h);continue}const f=a(h,d,Math.abs((i-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],o.push(f)}return 1===o.length?o[0]:o}pathSegment(e,t,n){return zC(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=zC(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const o of i)s&=r(e,this,o,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),jC(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function qC(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}Yx(BC,"id","line"),Yx(BC,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Yx(BC,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Yx(BC,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class WC extends UT{constructor(e){super(),Yx(this,"parsed",void 0),Yx(this,"skip",void 0),Yx(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return qC(this,e,"x",t)}inYRange(e,t){return qC(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!oI(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,rI(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function HC(e,t){const{x:n,y:i,base:r,width:s,height:o}=e.getProps(["x","y","base","width","height"],t);let a,l,c,u,h;return e.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function KC(e,t,n,i){return e?0:_S(t,n,i)}function GC(e){const t=HC(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=wI(i);return{t:KC(r.top,s.top,0,n),r:KC(r.right,s.right,0,t),b:KC(r.bottom,s.bottom,0,n),l:KC(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=_I(r),o=Math.min(t,n),a=e.borderSkipped,l=i||Ok(r);return{topLeft:KC(!l||a.top||a.left,s.topLeft,0,o),topRight:KC(!l||a.top||a.right,s.topRight,0,o),bottomLeft:KC(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:KC(!l||a.bottom||a.right,s.bottomRight,0,o)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function QC(e,t,n,i){const r=null===t,s=null===n,o=e&&!(r&&s)&&HC(e,i);return o&&(r||xS(t,o.left,o.right))&&(s||xS(n,o.top,o.bottom))}function YC(e,t){e.rect(t.x,t.y,t.w,t.h)}function XC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,o=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+o,radius:e.radius}}Yx(WC,"id","point"),Yx(WC,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Yx(WC,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class $C extends UT{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=GC(this),o=(a=s.radius).topLeft||a.topRight||a.bottomLeft||a.bottomRight?pI:YC;var a;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),o(e,XC(s,t,r)),e.clip(),o(e,XC(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),o(e,XC(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return QC(this,e,t,n)}inXRange(e,t){return QC(this,e,null,t)}inYRange(e,t){return QC(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}Yx($C,"id","bar"),Yx($C,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Yx($C,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var JC=Object.freeze({__proto__:null,ArcElement:OC,BarElement:$C,LineElement:BC,PointElement:WC});const ZC=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],eA=ZC.map((e=>e.replace("rgb(","rgba(").replace(")",", 0.5)")));function tA(e){return ZC[e%ZC.length]}function nA(e){return eA[e%eA.length]}function iA(e){let t=0;return(n,i)=>{const r=e.getDatasetMeta(i).controller;r instanceof GE?t=function(e,t){return e.backgroundColor=e.data.map((()=>tA(t++))),t}(n,t):r instanceof YE?t=function(e,t){return e.backgroundColor=e.data.map((()=>nA(t++))),t}(n,t):r&&(t=function(e,t){return e.borderColor=tA(t),e.backgroundColor=nA(t),++t}(n,t))}}function rA(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var sA={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=e.config,{elements:s}=r;if(!n.forceOverride&&(rA(i)||(o=r)&&(o.borderColor||o.backgroundColor)||s&&rA(s)))return;var o;const a=iA(e);i.forEach(a)}};function oA(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function aA(e){e.data.datasets.forEach((e=>{oA(e)}))}var lA={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void aA(e);const i=e.width;e.data.datasets.forEach(((t,r)=>{const{_data:s,indexAxis:o}=t,a=e.getDatasetMeta(r),l=s||t.data;if("y"===SI([o,e.options.indexAxis]))return;if(!a.controller.supportsDecimation)return;const c=e.scales[a.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:u,count:h}=function(e,t){const n=t.length;let i,r=0;const{iScale:s}=e,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(r=_S(SS(t,s.axis,o).lo,0,n-1)),i=c?_S(SS(t,s.axis,a).hi+1,r,n)-r:n-r,{start:r,count:i}}(a,l);if(h<=(n.threshold||4*i))return void oA(t);let d;switch(Dk(s)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":d=function(e,t,n,i,r){const s=r.samples||i;if(s>=n)return e.slice(t,t+n);const o=[],a=(n-2)/(s-2);let l=0;const c=t+n-1;let u,h,d,f,p,g=t;for(o[l++]=e[g],u=0;u<s-2;u++){let i,r=0,s=0;const c=Math.floor((u+1)*a)+1+t,m=Math.min(Math.floor((u+2)*a)+1,n)+t,y=m-c;for(i=c;i<m;i++)r+=e[i].x,s+=e[i].y;r/=y,s/=y;const v=Math.floor(u*a)+1+t,b=Math.min(Math.floor((u+1)*a)+1,n)+t,{x:w,y:_}=e[g];for(d=f=-1,i=v;i<b;i++)f=.5*Math.abs((w-r)*(e[i].y-_)-(w-e[i].x)*(s-_)),f>d&&(d=f,h=e[i],p=i);o[l++]=h,g=p}return o[l++]=e[c],o}(l,u,h,i,n);break;case"min-max":d=function(e,t,n,i){let r,s,o,a,l,c,u,h,d,f,p=0,g=0;const m=[],y=t+n-1,v=e[t].x,b=e[y].x-v;for(r=t;r<t+n;++r){s=e[r],o=(s.x-v)/b*i,a=s.y;const t=0|o;if(t===l)a<d?(d=a,c=r):a>f&&(f=a,u=r),p=(g*p+s.x)/++g;else{const n=r-1;if(!Dk(c)&&!Dk(u)){const t=Math.min(c,u),i=Math.max(c,u);t!==h&&t!==n&&m.push({...e[t],x:p}),i!==h&&i!==n&&m.push({...e[i],x:p})}r>0&&n!==h&&m.push(e[n]),m.push(s),l=t,g=0,d=f=a,c=u=h=r}}return m}(l,u,h,i);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}t._decimated=d}))},destroy(e){aA(e)}};function cA(e,t,n,i){if(i)return;let r=t[e],s=n[e];return"angle"===e&&(r=bS(r),s=bS(s)),{property:e,start:r,end:s}}function uA(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function hA(e,t,n,i){return e&&t?i(e[n],t[n]):e?e[n]:t?t[n]:0}function dA(e,t){let n=[],i=!1;return Nk(e)?(i=!0,n=e):n=function(e,t){const{x:n=null,y:i=null}=e||{},r=t.points,s=[];return t.segments.forEach((e=>{let{start:t,end:o}=e;o=uA(t,o,r);const a=r[t],l=r[o];null!==i?(s.push({x:a.x,y:i}),s.push({x:l.x,y:i})):null!==n&&(s.push({x:n,y:a.y}),s.push({x:n,y:l.y}))})),s}(e,t),n.length?new BC({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function fA(e){return e&&!1!==e.fill}function pA(e,t,n){let i=e[t].fill;const r=[t];let s;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!Mk(i))return i;if(s=e[i],!s)return!1;if(s.visible)return i;r.push(i),i=s.fill}return!1}function gA(e,t,n){const i=function(e){const t=e.options,n=t.fill;let i=Lk(n&&n.target,n);void 0===i&&(i=!!t.backgroundColor);if(!1===i||null===i)return!1;if(!0===i)return"origin";return i}(e);if(Ok(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return Mk(r)&&Math.floor(r)===r?function(e,t,n,i){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=i)return!1;return n}(i[0],t,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function mA(e,t,n){const i=[];for(let r=0;r<n.length;r++){const s=n[r],{first:o,last:a,point:l}=yA(s,t,"x");if(!(!l||o&&a))if(o)i.unshift(l);else if(e.push(l),!a)break}e.push(...i)}function yA(e,t,n){const i=e.interpolate(t,n);if(!i)return{};const r=i[n],s=e.segments,o=e.points;let a=!1,l=!1;for(let c=0;c<s.length;c++){const e=s[c],t=o[e.start][n],i=o[e.end][n];if(xS(r,t,i)){a=r===t,l=r===i;break}}return{first:a,last:l,point:i}}class vA{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:i,y:r,radius:s}=this;return t=t||{start:0,end:eS},e.arc(i,r,s,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:i}=this,r=e.angle;return{x:t+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function bA(e){const{chart:t,fill:n,line:i}=e;if(Mk(n))return function(e,t){const n=e.getDatasetMeta(t),i=n&&e.isDatasetVisible(t);return i?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:i}=e,r=[],s=i.segments,o=i.points,a=function(e,t){const n=[],i=e.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){const e=i[r];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);a.push(dA({x:null,y:t.bottom},i));for(let l=0;l<s.length;l++){const e=s[l];for(let t=e.start;t<=e.end;t++)mA(r,o[t],a)}return new BC({points:r,options:{}})}(e);if("shape"===n)return!0;const r=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=function(e,t,n){let i;return i="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:Ok(e)?e.value:t.getBaseValue(),i}(n,t,s),a=[];if(i.grid.circular){const e=t.getPointPositionForValue(0,s);return new vA({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}(e);return function(e){const{scale:t={},fill:n}=e,i=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:Ok(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(Mk(i)){const e=t.isHorizontal();return{x:e?i:null,y:e?null:i}}return null}(e)}(e);return r instanceof vA?r:dA(r,i)}function wA(e,t,n){const i=bA(t),{line:r,scale:s,axis:o}=t,a=r.options,l=a.fill,c=a.backgroundColor,{above:u=c,below:h=c}=l||{};i&&r.points.length&&(aI(e,n),function(e,t){const{line:n,target:i,above:r,below:s,area:o,scale:a}=t,l=n._loop?"angle":t.axis;e.save(),"x"===l&&s!==r&&(_A(e,i,o.top),xA(e,{line:n,target:i,color:r,scale:a,property:l}),e.restore(),e.save(),_A(e,i,o.bottom));xA(e,{line:n,target:i,color:s,scale:a,property:l}),e.restore()}(e,{line:r,target:i,above:u,below:h,area:n,scale:s,axis:o}),lI(e))}function _A(e,t,n){const{segments:i,points:r}=t;let s=!0,o=!1;e.beginPath();for(const a of i){const{start:i,end:l}=a,c=r[i],u=r[uA(i,l,r)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),o=!!t.pathSegment(e,a,{move:o}),o?e.closePath():e.lineTo(u.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function xA(e,t){const{line:n,target:i,property:r,color:s,scale:o}=t,a=function(e,t,n){const i=e.segments,r=e.points,s=t.points,o=[];for(const a of i){let{start:e,end:i}=a;i=uA(e,i,r);const l=cA(n,r[e],r[i],a.loop);if(!t.segments){o.push({source:a,target:l,start:r[e],end:r[i]});continue}const c=gE(t,l);for(const t of c){const e=cA(n,s[t.start],s[t.end],t.loop),i=pE(a,r,e);for(const r of i)o.push({source:r,target:t,start:{[n]:hA(l,e,"start",Math.max)},end:{[n]:hA(l,e,"end",Math.min)}})}}return o}(n,i,r);for(const{source:l,target:c,start:u,end:h}of a){const{style:{backgroundColor:t=s}={}}=l,a=!0!==i;e.save(),e.fillStyle=t,kA(e,o,a&&cA(r,u,h)),e.beginPath();const d=!!n.pathSegment(e,l);let f;if(a){d?e.closePath():SA(e,i,h,r);const t=!!i.pathSegment(e,c,{move:d,reverse:!0});f=d&&t,f||SA(e,i,u,r)}e.closePath(),e.fill(f?"evenodd":"nonzero"),e.restore()}}function kA(e,t,n){const{top:i,bottom:r}=t.chart.chartArea,{property:s,start:o,end:a}=n||{};"x"===s&&(e.beginPath(),e.rect(o,i,a-o,r-i),e.clip())}function SA(e,t,n,i){const r=t.interpolate(n,i);r&&e.lineTo(r.x,r.y)}var IA={id:"filler",afterDatasetsUpdate(e,t,n){const i=(e.data.datasets||[]).length,r=[];let s,o,a,l;for(o=0;o<i;++o)s=e.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof BC&&(l={visible:e.isDatasetVisible(o),index:o,fill:gA(a,o,i),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<i;++o)l=r[o],l&&!1!==l.fill&&(l.fill=pA(r,o,n.propagate))},beforeDraw(e,t,n){const i="beforeDraw"===n.drawTime,r=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let o=r.length-1;o>=0;--o){const t=r[o].$filler;t&&(t.line.updateControlPoints(s,t.axis),i&&t.fill&&wA(e.ctx,t,s))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=e.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){const t=i[r].$filler;fA(t)&&wA(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const i=t.meta.$filler;fA(i)&&"beforeDatasetDraw"===n.drawTime&&wA(e.ctx,i,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const EA=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class TA extends UT{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Vk(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter((t=>e.filter(t,this.chart.data)))),e.sort&&(t=t.sort(((t,n)=>e.sort(t,n,this.chart.data)))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=kI(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:a}=EA(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,o,a)+10):(c=this.maxHeight,l=this._fitCols(s,i,o,a)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+o;let u=e;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((e,f)=>{const p=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*o>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),a[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+o})),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:o}}}=this,a=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=o,h=0,d=0,f=0,p=0;return this.legendItems.forEach(((e,s)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,i,r){const s=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce(((e,t)=>e.length>t.length?e:t)));return t+n.size/2+i.measureText(r).width}(i,e,t,n),o=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=CA(t,n));return i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}(n,t,r,e,i);s>0&&d+m+2*o>c&&(u+=h+o,l.push({width:h,height:d}),f+=h+o,p++,h=d=0),a[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+o})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=cE(r,this.left,this.width);if(this.isHorizontal()){let r=0,o=NS(n,this.left+i,this.right-this.lineWidths[r]);for(const a of t)r!==a.row&&(r=a.row,o=NS(n,this.left+i,this.right-this.lineWidths[r])),a.top+=this.top+e+i,a.left=s.leftForLtr(s.x(o),a.width),o+=a.width+i}else{let r=0,o=NS(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const a of t)a.col!==r&&(r=a.col,o=NS(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),a.top=o,a.left+=this.left+i,a.left=s.leftForLtr(s.x(a.left),a.width),o+=a.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;aI(e,this),this._draw(),lI(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,o=ZS.color,a=cE(e.rtl,this.left,this.width),l=kI(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=a.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=EA(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:NS(r,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:NS(r,this.top+y+c,this.bottom-t[0].height),line:0},uE(this.ctx,e.textDirection);const v=g+c;this.legendItems.forEach(((b,w)=>{i.strokeStyle=b.fontColor,i.fillStyle=b.fontColor;const _=i.measureText(b.text).width,x=a.textAlign(b.textAlign||(b.textAlign=s.textAlign)),k=f+h+_;let S=d.x,I=d.y;a.setWidth(this.width),m?w>0&&S+k+c>this.right&&(I=d.y+=v,d.line++,S=d.x=NS(r,this.left+c,this.right-n[d.line])):w>0&&I+v>this.bottom&&(S=d.x=S+t[d.line].width+c,d.line++,I=d.y=NS(r,this.top+y+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=Lk(n.lineWidth,1);if(i.fillStyle=Lk(n.fillStyle,o),i.lineCap=Lk(n.lineCap,"butt"),i.lineDashOffset=Lk(n.lineDashOffset,0),i.lineJoin=Lk(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=Lk(n.strokeStyle,o),i.setLineDash(Lk(n.lineDash,[])),s.usePointStyle){const o={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=a.xPlus(e,f/2);sI(i,o,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),o=a.leftForLtr(e,f),l=_I(n.borderRadius);i.beginPath(),Object.values(l).some((e=>0!==e))?pI(i,{x:o,y:s,w:f,h:p,radius:l}):i.rect(o,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(a.x(S),I,b),S=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(x,S+f+h,m?S+k:this.right,e.rtl),function(e,t,n){fI(i,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:a.textAlign(n.textAlign)})}(a.x(S),I,b),m)d.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;d.y+=CA(b,e)+c}else d.y+=v})),hE(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=kI(t.font),i=xI(t.padding);if(!t.display)return;const r=cE(e.rtl,this.left,this.width),s=this.ctx,o=t.position,a=n.size/2,l=i.top+a;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=NS(e.align,u,this.right-h);else{const t=this.columnSizes.reduce(((e,t)=>Math.max(e,t.height)),0);c=l+NS(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=NS(o,u,u+h);s.textAlign=r.textAlign(DS(o)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,fI(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=kI(e.font),n=xI(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(xS(e,this.left,this.right)&&xS(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],xS(e,i.left,i.left+i.width)&&xS(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const i=this._hoveredItem,r=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(i,n);i&&!r&&Vk(t.onLeave,[e,i,this],this),this._hoveredItem=n,n&&!r&&Vk(t.onHover,[e,n,this],this)}else n&&Vk(t.onClick,[e,n,this],this)}}function CA(e,t){return t*(e.text?e.text.length:0)}var AA={id:"legend",_element:TA,start(e,t,n){const i=e.legend=new TA({ctx:e.ctx,options:n,chart:e});xT.configure(e,i,n),xT.addBox(e,i)},stop(e){xT.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;xT.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=e.legend.options;return e._getSortedDatasetMetas().map((e=>{const l=e.controller.getStyle(n?0:void 0),c=xI(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:e.index}}),this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class PA extends UT{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=Nk(n.text)?n.text.length:1;this._padding=xI(n.padding);const r=i*kI(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:s}=this,o=s.align;let a,l,c,u=0;return this.isHorizontal()?(l=NS(o,n,r),c=t+e,a=r-n):("left"===s.position?(l=n+e,c=NS(o,i,t),u=-.5*Zk):(l=r-e,c=NS(o,t,i),u=.5*Zk),a=i-t),{titleX:l,titleY:c,maxWidth:a,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=kI(t.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:o,rotation:a}=this._drawArgs(i);fI(e,t.text,0,0,n,{color:t.color,maxWidth:o,rotation:a,textAlign:DS(t.align),textBaseline:"middle",translation:[r,s]})}}var DA={id:"title",_element:PA,start(e,t,n){!function(e,t){const n=new PA({ctx:e.ctx,options:t,chart:e});xT.configure(e,n,t),xT.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;xT.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;xT.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const NA=new WeakMap;var OA={id:"subtitle",start(e,t,n){const i=new PA({ctx:e.ctx,options:n,chart:e});xT.configure(e,i,n),xT.addBox(e,i),NA.set(e,i)},stop(e){xT.removeBox(e,NA.get(e)),NA.delete(e)},beforeUpdate(e,t,n){const i=NA.get(e);xT.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const MA={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}const o=[...i].reduce(((e,t)=>e+t))/i.size;return{x:o,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,o=t.y,a=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=yS(t,i.getCenterPoint());e<a&&(a=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,o=e.y}return{x:s,y:o}}};function RA(e,t){return t&&(Nk(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function LA(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function FA(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:e,label:o,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function VA(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:o,boxHeight:a}=t,l=kI(t.bodyFont),c=kI(t.titleFont),u=kI(t.footerFont),h=s.length,d=r.length,f=i.length,p=xI(t.padding);let g=p.height,m=0,y=i.reduce(((e,t)=>e+t.before.length+t.lines.length+t.after.length),0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){g+=f*(t.displayColors?Math.max(a,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const b=function(e){m=Math.max(m,n.measureText(e).width+v)};return n.save(),n.font=c.string,zk(e.title,b),n.font=l.string,zk(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?o+2+t.boxPadding:0,zk(i,(e=>{zk(e.before,b),zk(e.lines,b),zk(e.after,b)})),v=0,n.font=u.string,zk(e.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function zA(e,t,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=e;let c="center";return"center"===i?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;return"left"===e&&r+s+o>t.width||"right"===e&&r-s-o<0||void 0}(c,e,t,n)&&(c="center"),c}function UA(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||zA(e,t,n,i),yAlign:i}}function jA(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=e,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=_I(o);let p=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,a);const g=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===a?p+=c:"right"===a&&(p-=c):"left"===a?p-=Math.max(u,d)+r:"right"===a&&(p+=Math.max(h,f)+r),{x:_S(p,0,i.width-t.width),y:_S(g,0,i.height-t.height)}}function BA(e,t,n){const i=xI(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function qA(e){return RA([],LA(e))}function WA(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const HA={beforeTitle:Ak,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:Ak,beforeBody:Ak,beforeLabel:Ak,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return Dk(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Ak,afterBody:Ak,beforeFooter:Ak,footer:Ak,afterFooter:Ak};function KA(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?HA[t].call(n,i):r}class GA extends UT{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new SE(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,II(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=KA(n,"beforeTitle",this,e),r=KA(n,"title",this,e),s=KA(n,"afterTitle",this,e);let o=[];return o=RA(o,LA(i)),o=RA(o,LA(r)),o=RA(o,LA(s)),o}getBeforeBody(e,t){return qA(KA(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return zk(e,(e=>{const t={before:[],lines:[],after:[]},r=WA(n,e);RA(t.before,LA(KA(r,"beforeLabel",this,e))),RA(t.lines,KA(r,"label",this,e)),RA(t.after,LA(KA(r,"afterLabel",this,e))),i.push(t)})),i}getAfterBody(e,t){return qA(KA(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=KA(n,"beforeFooter",this,e),r=KA(n,"footer",this,e),s=KA(n,"afterFooter",this,e);let o=[];return o=RA(o,LA(i)),o=RA(o,LA(r)),o=RA(o,LA(s)),o}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let o,a,l=[];for(o=0,a=t.length;o<a;++o)l.push(FA(this.chart,t[o]));return e.filter&&(l=l.filter(((t,i,r)=>e.filter(t,i,r,n)))),e.itemSort&&(l=l.sort(((t,i)=>e.itemSort(t,i,n)))),zk(l,(t=>{const n=WA(e.callbacks,t);i.push(KA(n,"labelColor",this,t)),r.push(KA(n,"labelPointStyle",this,t)),s.push(KA(n,"labelTextColor",this,t))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=MA[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=VA(this,n),o=Object.assign({},e,t),a=UA(this.chart,n,o),l=jA(n,o,a,this.chart);this.xAlign=a.xAlign,this.yAlign=a.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:o}=n,{topLeft:a,topRight:l,bottomLeft:c,bottomRight:u}=_I(o),{x:h,y:d}=e,{width:f,height:p}=t;let g,m,y,v,b,w;return"center"===r?(b=d+p/2,"left"===i?(g=h,m=g-s,v=b+s,w=b-s):(g=h+f,m=g+s,v=b-s,w=b+s),y=g):(m="left"===i?h+Math.max(a,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(v=d,b=v-s,g=m-s,y=m+s):(v=d+p,b=v+s,g=m+s,y=m-s),w=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:w}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,o,a;if(r){const l=cE(n.rtl,this.x,this.width);for(e.x=BA(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=kI(n.titleFont),o=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+o,a+1===r&&(e.y+=n.titleMarginBottom-o)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],o=this.labelPointStyles[n],{boxHeight:a,boxWidth:l}=r,c=kI(r.bodyFont),u=BA(this,"left",r),h=i.x(u),d=a<c.lineHeight?(c.lineHeight-a)/2:0,f=t.y+d;if(r.usePointStyle){const t={radius:Math.min(l,a)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+a/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,rI(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,rI(e,t,n,c)}else{e.lineWidth=Ok(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),o=_I(s.borderRadius);Object.values(o).some((e=>0!==e))?(e.beginPath(),e.fillStyle=r.multiKeyBackground,pI(e,{x:t,y:f,w:l,h:a,radius:o}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),pI(e,{x:n,y:f+1,w:l-2,h:a-2,radius:o}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,a),e.strokeRect(t,f,l,a),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,a-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:o,boxHeight:a,boxWidth:l,boxPadding:c}=n,u=kI(n.bodyFont);let h=u.lineHeight,d=0;const f=cE(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+r},g=f.textAlign(s);let m,y,v,b,w,_,x;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=BA(this,g,n),t.fillStyle=n.bodyColor,zk(this.beforeBody,p),d=o&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,_=i.length;b<_;++b){for(m=i[b],y=this.labelTextColors[b],t.fillStyle=y,zk(m.before,p),v=m.lines,o&&v.length&&(this._drawColorBox(t,e,b,f,n),h=Math.max(u.lineHeight,a)),w=0,x=v.length;w<x;++w)p(v[w]),h=u.lineHeight;zk(m.after,p)}d=0,h=u.lineHeight,zk(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,o;if(r){const a=cE(n.rtl,this.x,this.width);for(e.x=BA(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=a.textAlign(n.footerAlign),t.textBaseline="middle",s=kI(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],a.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:o,y:a}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=_I(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(o+u,a),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+l-h,a),t.quadraticCurveTo(o+l,a,o+l,a+h),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(o+l,a+c-f),t.quadraticCurveTo(o+l,a+c,o+l-f,a+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(o+d,a+c),t.quadraticCurveTo(o,a+c,o,a+c-d),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(o,a+u),t.quadraticCurveTo(o,a,o+u,a),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=MA[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=VA(this,e),o=Object.assign({},n,this._size),a=UA(t,e,o),l=jA(e,o,a,t);i._to===l.x&&r._to===l.y||(this.xAlign=a.xAlign,this.yAlign=a.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=xI(t.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&o&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),uE(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),hE(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map((e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}})),r=!Uk(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),o=this._positionChanged(s,e),a=t||!Uk(s,r)||o;return a&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),a}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter((e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index)));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=MA[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}Yx(GA,"positioners",MA);var QA={id:"tooltip",_element:GA,positioners:MA,afterInit(e,t,n){n&&(e.tooltip=new GA({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:HA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},YA=Object.freeze({__proto__:null,Colors:sA,Decimation:lA,Filler:IA,Legend:AA,SubTitle:OA,Title:DA,Tooltip:QA});function XA(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function $A(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class JA extends XT{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(Dk(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:_S(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:XA(n,e,Lk(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return $A.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function ZA(e,t){const n=[],{bounds:i,step:r,min:s,max:o,precision:a,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=r||1,f=c-1,{min:p,max:g}=t,m=!Dk(s),y=!Dk(o),v=!Dk(l),b=(g-p)/(u+1);let w,_,x,k,S=uS((g-p)/f/d)*d;if(S<1e-14&&!m&&!y)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>f&&(S=uS(k*S/f/d)*d),Dk(a)||(w=Math.pow(10,a),S=Math.ceil(S*w)/w),"ticks"===i?(_=Math.floor(p/S)*S,x=Math.ceil(g/S)*S):(_=p,x=g),m&&y&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((o-s)/r,S/1e3)?(k=Math.round(Math.min((o-s)/S,c)),S=(o-s)/k,_=s,x=o):v?(_=m?s:_,x=y?o:x,k=l-1,S=(x-_)/k):(k=(x-_)/S,k=cS(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const I=Math.max(gS(S),gS(_));w=Math.pow(10,Dk(a)?I:a),_=Math.round(_*w)/w,x=Math.round(x*w)/w;let E=0;for(m&&(h&&_!==s?(n.push({value:s}),_<s&&E++,cS(Math.round((_+E*S)*w)/w,s,eP(s,b,e))&&E++):_<s&&E++);E<k;++E){const e=Math.round((_+E*S)*w)/w;if(y&&e>o)break;n.push({value:e})}return y&&h&&x!==o?n.length&&cS(n[n.length-1].value,o,eP(o,b,e))?n[n.length-1].value=o:n.push({value:o}):y&&x!==o||n.push({value:x}),n}function eP(e,t,n){let{horizontal:i,minRotation:r}=n;const s=fS(r),o=(i?Math.sin(s):Math.cos(s))||.001,a=.75*t*(""+e).length;return Math.min(t/o,a)}Yx(JA,"id","category"),Yx(JA,"defaults",{ticks:{callback:$A}});class tP extends XT{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return Dk(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,o=e=>r=n?r:e;if(e){const e=lS(i),t=lS(r);e<0&&t<0?o(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);o(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=ZA({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&dS(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return HS(e,this.chart.options.locale,this.options.ticks.format)}}class nP extends tP{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Mk(e)?e:0,this.max=Mk(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=fS(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Yx(nP,"id","linear"),Yx(nP,"defaults",{ticks:{callback:GS.formatters.numeric}});const iP=e=>Math.floor(aS(e)),rP=(e,t)=>Math.pow(10,iP(e)+t);function sP(e){return 1===e/Math.pow(10,iP(e))}function oP(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function aP(e,t){let{min:n,max:i}=t;n=Rk(e.min,n);const r=[],s=iP(n);let o=function(e,t){let n=iP(t-e);for(;oP(e,t,n)>10;)n++;for(;oP(e,t,n)<10;)n--;return Math.min(n,iP(e))}(n,i),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=s>o?Math.pow(10,s):0,u=Math.round((n-c)*a)/a,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),f=Rk(e.min,Math.round((c+h+d*Math.pow(10,o))*a)/a);for(;f<i;)r.push({value:f,major:sP(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,a=o>=0?1:a),f=Math.round((c+h+d*Math.pow(10,o))*a)/a;const p=Rk(e.max,f);return r.push({value:p,major:sP(p),significand:d}),r}class lP extends XT{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=tP.prototype.parse.apply(this,[e,t]);if(0!==n)return Mk(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=Mk(e)?Math.max(0,e):null,this.max=Mk(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Mk(this._userMin)&&(this.min=e===rP(this.min,0)?rP(this.min,-1):rP(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e;n===i&&(n<=0?(r(1),s(10)):(r(rP(n,-1)),s(rP(i,1)))),n<=0&&r(rP(i,-1)),i<=0&&s(rP(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=aP({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&dS(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":HS(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=aS(e),this._valueRange=aS(this.max)-aS(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(aS(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function cP(e){const t=e.ticks;if(t.display&&e.display){const e=xI(t.backdropPadding);return Lk(t.font&&t.font.size,ZS.font.size)+e.height}return 0}function uP(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function hP(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,o=e.options.pointLabels,a=o.centerPointLabels?Zk/s:0;for(let h=0;h<s;h++){const s=o.setContext(e.getPointLabelContext(h));r[h]=s.padding;const d=e.getPointPosition(h,e.drawingArea+r[h],a),f=kI(s.font),p=(l=e.ctx,c=f,u=Nk(u=e._pointLabels[h])?u:[u],{w:tI(l,c.string,u),h:u.length*c.lineHeight});i[h]=p;const g=bS(e.getIndexAngle(h)+a),m=Math.round(pS(g));dP(n,t,g,uP(m,d.x,p.w,0,180),uP(m,d.y,p.h,90,270))}var l,c,u;e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:cP(s)/2,additionalAngle:o?Zk/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=fP(e,u,l);i.push(r),"auto"===a&&(r.visible=pP(r,c),r.visible&&(c=r))}return i}(e,i,r)}function dP(e,t,n,i,r){const s=Math.abs(Math.sin(n)),o=Math.abs(Math.cos(n));let a=0,l=0;i.start<t.l?(a=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,e.b=Math.max(e.b,t.b+l))}function fP(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=n,l=e.getPointPosition(t,i+r+o,s),c=Math.round(pS(bS(l.angle+rS))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,a.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,a.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+a.w,bottom:u+a.h}}function pP(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(oI({x:n,y:i},t)||oI({x:n,y:s},t)||oI({x:r,y:i},t)||oI({x:r,y:s},t))}function gP(e,t,n){const{left:i,top:r,right:s,bottom:o}=n,{backdropColor:a}=t;if(!Dk(a)){const n=_I(t.borderRadius),l=xI(t.backdropPadding);e.fillStyle=a;const c=i-l.left,u=r-l.top,h=s-i+l.width,d=o-r+l.height;Object.values(n).some((e=>0!==e))?(e.beginPath(),pI(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function mP(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,eS);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}Yx(lP,"id","logarithmic"),Yx(lP,"defaults",{ticks:{callback:GS.formatters.logarithmic,major:{enabled:!0}}});class yP extends tP{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=xI(cP(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=Mk(e)&&!isNaN(e)?e:0,this.max=Mk(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/cP(this.options))}generateTickLabels(e){tP.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map(((e,t)=>{const n=Vk(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""})).filter(((e,t)=>this.chart.getDataVisibility(t)))}fit(){const e=this.options;e.display&&e.pointLabels.display?hP(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return bS(e*(eS/(this._pointLabels.length||1))+fS(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(Dk(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(Dk(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return II(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-rS+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),mP(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,s=this._pointLabels.length;let o,a,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=i.setContext(e.getPointLabelContext(r));gP(n,s,t);const o=kI(s.font),{x:a,y:l,textAlign:c}=t;fI(n,e._pointLabels[r],a,l+o.lineHeight/2,o,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach(((e,t)=>{if(0!==t||0===t&&this.min<0){a=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),o=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const s=e.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!i||!a||!l||n<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),mP(e,n,o,i),s.closePath(),s.stroke(),s.restore())}(this,o,a,s,l)}})),n.display){for(e.save(),o=s-1;o>=0;o--){const i=n.setContext(this.getPointLabelContext(o)),{color:r,lineWidth:s}=i;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,a=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),l=this.getPointPosition(o,a),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach(((i,o)=>{if(0===o&&this.min>=0&&!t.reverse)return;const a=n.setContext(this.getContext(o)),l=kI(a.font);if(r=this.getDistanceFromCenterForValue(this.ticks[o].value),a.showLabelBackdrop){e.font=l.string,s=e.measureText(i.label).width,e.fillStyle=a.backdropColor;const t=xI(a.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}fI(e,i.label,0,-r,l,{color:a.color,strokeColor:a.textStrokeColor,strokeWidth:a.textStrokeWidth})})),e.restore()}drawTitle(){}}Yx(yP,"id","radialLinear"),Yx(yP,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:GS.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),Yx(yP,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Yx(yP,"descriptors",{angleLines:{_fallback:"grid"}});const vP={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bP=Object.keys(vP);function wP(e,t){return e-t}function _P(e,t){if(Dk(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let o=t;return"function"===typeof i&&(o=i(o)),Mk(o)||(o="string"===typeof i?n.parse(o,i):n.parse(o)),null===o?null:(r&&(o="week"!==r||!hS(s)&&!0!==s?n.startOf(o,r):n.startOf(o,"isoWeek",s)),+o)}function xP(e,t,n,i){const r=bP.length;for(let s=bP.indexOf(e);s<r-1;++s){const e=vP[bP[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return bP[s]}return bP[r-1]}function kP(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=kS(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function SP(e,t,n){const i=[],r={},s=t.length;let o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class IP extends XT{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new nT(e.adapters.date);i.init(t),Hk(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:_P(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:o}=this.getUserBounds();function a(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),o||isNaN(e.max)||(r=Math.max(r,e.max))}s&&o||(a(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||a(this.getMinMax(!1))),i=Mk(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=Mk(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?xP(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=bP.length-1;s>=bP.indexOf(n);s--){const n=bP[s];if(vP[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return bP[n?bP.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=bP.indexOf(e)+1,n=bP.length;t<n;++t)if(vP[bP[t]].common)return bP[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),SP(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((e=>+e.value)))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=_S(i,0,s),r=_S(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||xP(r.minUnit,t,n,this._getLabelCapacity(t)),o=Lk(i.ticks.stepSize,1),a="week"===s&&r.isoWeekday,l=hS(a)||!0===a,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",a)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*o)throw new Error(t+" and "+n+" are too far apart with stepSize of "+o+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,o,s),h++)kP(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||kP(c,u,f),Object.keys(c).sort(wP).map((e=>+e))}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return Vk(s,[e,t,n],this);const o=r.time.displayFormats,a=this._unit,l=this._majorUnit,c=a&&o[a],u=l&&o[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,i||(d?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=fS(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:n*r+o*s,h:n*s+o*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,SP(this,[e],this._majorUnit),i),s=this._getLabelSize(r),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(_P(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return CS(e.sort(wP))}}function EP(e,t,n){let i,r,s,o,a=0,l=e.length-1;n?(t>=e[a].pos&&t<=e[l].pos&&({lo:a,hi:l}=SS(e,"pos",t)),({pos:i,time:s}=e[a]),({pos:r,time:o}=e[l])):(t>=e[a].time&&t<=e[l].time&&({lo:a,hi:l}=SS(e,"time",t)),({time:i,pos:s}=e[a]),({time:r,pos:o}=e[l]));const c=r-i;return c?s+(o-s)*(t-i)/c:s}Yx(IP,"id","time"),Yx(IP,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class TP extends IP{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=EP(t,this.min),this._tableRange=EP(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;++s)l=e[s],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,o=i.length;s<o;++s)c=i[s+1],a=i[s-1],l=i[s],Math.round((c+a)/2)!==l&&r.push({time:l,pos:s/(o-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort(((e,t)=>e-t))}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(EP(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return EP(this._table,n*this._tableRange+this._minPos,!0)}}Yx(TP,"id","timeseries"),Yx(TP,"defaults",IP.defaults);const CP=[ZE,JC,YA,Object.freeze({__proto__:null,CategoryScale:JA,LinearScale:nP,LogarithmicScale:lP,RadialLinearScale:yP,TimeScale:IP,TimeSeriesScale:TP})];TC.register(...CP);const AP=TC;function PP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function DP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PP(Object(n),!0).forEach((function(t){MP(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function NP(e){return NP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},NP(e)}function OP(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function MP(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RP(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,s=[],o=!0,a=!1;try{for(n=n.call(e);!(o=(i=n.next()).done)&&(s.push(i.value),!t||s.length!==t);o=!0);}catch(l){a=!0,r=l}finally{try{o||null==n.return||n.return()}finally{if(a)throw r}}return s}(e,t)||FP(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LP(e){return function(e){if(Array.isArray(e))return VP(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||FP(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FP(e,t){if(e){if("string"===typeof e)return VP(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?VP(e,t):void 0}}function VP(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var zP=function(){},UP={},jP={},BP=null,qP={mark:zP,measure:zP};try{"undefined"!==typeof window&&(UP=window),"undefined"!==typeof document&&(jP=document),"undefined"!==typeof MutationObserver&&(BP=MutationObserver),"undefined"!==typeof performance&&(qP=performance)}catch(bM){}var WP,HP,KP,GP,QP,YP=(UP.navigator||{}).userAgent,XP=void 0===YP?"":YP,$P=UP,JP=jP,ZP=BP,eD=qP,tD=($P.document,!!JP.documentElement&&!!JP.head&&"function"===typeof JP.addEventListener&&"function"===typeof JP.createElement),nD=~XP.indexOf("MSIE")||~XP.indexOf("Trident/"),iD="___FONT_AWESOME___",rD=16,sD="fa",oD="svg-inline--fa",aD="data-fa-i2svg",lD="data-fa-pseudo-element",cD="data-fa-pseudo-element-pending",uD="data-prefix",hD="data-icon",dD="fontawesome-i2svg",fD="async",pD=["HTML","HEAD","STYLE","SCRIPT"],gD=function(){try{return!0}catch(bM){return!1}}(),mD="classic",yD="sharp",vD=[mD,yD];function bD(e){return new Proxy(e,{get:function(e,t){return t in e?e[t]:e[mD]}})}var wD=bD((MP(WP={},mD,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit",fakd:"kit","fa-kit":"kit","fa-kit-duotone":"kit"}),MP(WP,yD,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"}),WP)),_D=bD((MP(HP={},mD,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),MP(HP,yD,{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"}),HP)),xD=bD((MP(KP={},mD,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),MP(KP,yD,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"}),KP)),kD=bD((MP(GP={},mD,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),MP(GP,yD,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"}),GP)),SD=/fa(s|r|l|t|d|b|k|ss|sr|sl|st)?[\-\ ]/,ID="fa-layers-text",ED=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,TD=bD((MP(QP={},mD,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),MP(QP,yD,{900:"fass",400:"fasr",300:"fasl",100:"fast"}),QP)),CD=[1,2,3,4,5,6,7,8,9,10],AD=CD.concat([11,12,13,14,15,16,17,18,19,20]),PD=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],DD={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},ND=new Set;Object.keys(_D[mD]).map(ND.add.bind(ND)),Object.keys(_D[yD]).map(ND.add.bind(ND));var OD=[].concat(vD,LP(ND),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",DD.GROUP,DD.SWAP_OPACITY,DD.PRIMARY,DD.SECONDARY]).concat(CD.map((function(e){return"".concat(e,"x")}))).concat(AD.map((function(e){return"w-".concat(e)}))),MD=$P.FontAwesomeConfig||{};if(JP&&"function"===typeof JP.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((function(e){var t=RP(e,2),n=t[0],i=t[1],r=function(e){return""===e||"false"!==e&&("true"===e||e)}(function(e){var t=JP.querySelector("script["+e+"]");if(t)return t.getAttribute(e)}(n));void 0!==r&&null!==r&&(MD[i]=r)}))}var RD={styleDefault:"solid",familyDefault:"classic",cssPrefix:sD,replacementClass:oD,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};MD.familyPrefix&&(MD.cssPrefix=MD.familyPrefix);var LD=DP(DP({},RD),MD);LD.autoReplaceSvg||(LD.observeMutations=!1);var FD={};Object.keys(RD).forEach((function(e){Object.defineProperty(FD,e,{enumerable:!0,set:function(t){LD[e]=t,VD.forEach((function(e){return e(FD)}))},get:function(){return LD[e]}})})),Object.defineProperty(FD,"familyPrefix",{enumerable:!0,set:function(e){LD.cssPrefix=e,VD.forEach((function(e){return e(FD)}))},get:function(){return LD.cssPrefix}}),$P.FontAwesomeConfig=FD;var VD=[];var zD=rD,UD={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};var jD="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function BD(){for(var e=12,t="";e-- >0;)t+=jD[62*Math.random()|0];return t}function qD(e){for(var t=[],n=(e||[]).length>>>0;n--;)t[n]=e[n];return t}function WD(e){return e.classList?qD(e.classList):(e.getAttribute("class")||"").split(" ").filter((function(e){return e}))}function HD(e){return"".concat(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function KD(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,": ").concat(e[n].trim(),";")}),"")}function GD(e){return e.size!==UD.size||e.x!==UD.x||e.y!==UD.y||e.rotate!==UD.rotate||e.flipX||e.flipY}var QD=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-transform-origin: center center;\n          transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-counter-scale, 0.25));\n          transform: scale(var(--fa-counter-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom right;\n          transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: bottom left;\n          transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top right;\n          transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  -webkit-transform: scale(var(--fa-layers-scale, 0.25));\n          transform: scale(var(--fa-layers-scale, 0.25));\n  -webkit-transform-origin: top left;\n          transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(var(--fa-li-width, 2em) * -1);\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  -webkit-animation-name: fa-beat;\n          animation-name: fa-beat;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  -webkit-animation-name: fa-bounce;\n          animation-name: fa-bounce;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  -webkit-animation-name: fa-fade;\n          animation-name: fa-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  -webkit-animation-name: fa-beat-fade;\n          animation-name: fa-beat-fade;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  -webkit-animation-name: fa-flip;\n          animation-name: fa-flip;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);\n          animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  -webkit-animation-name: fa-shake;\n          animation-name: fa-shake;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-delay: var(--fa-animation-delay, 0s);\n          animation-delay: var(--fa-animation-delay, 0s);\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 2s);\n          animation-duration: var(--fa-animation-duration, 2s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, linear);\n          animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  -webkit-animation-name: fa-spin;\n          animation-name: fa-spin;\n  -webkit-animation-direction: var(--fa-animation-direction, normal);\n          animation-direction: var(--fa-animation-direction, normal);\n  -webkit-animation-duration: var(--fa-animation-duration, 1s);\n          animation-duration: var(--fa-animation-duration, 1s);\n  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n          animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));\n          animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    -webkit-animation-delay: -1ms;\n            animation-delay: -1ms;\n    -webkit-animation-duration: 1ms;\n            animation-duration: 1ms;\n    -webkit-animation-iteration-count: 1;\n            animation-iteration-count: 1;\n    -webkit-transition-delay: 0s;\n            transition-delay: 0s;\n    -webkit-transition-duration: 0s;\n            transition-duration: 0s;\n  }\n}\n@-webkit-keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  45% {\n    -webkit-transform: scale(var(--fa-beat-scale, 1.25));\n            transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@-webkit-keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    -webkit-transform: scale(1, 1) translateY(0);\n            transform: scale(1, 1) translateY(0);\n  }\n}\n@-webkit-keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@-webkit-keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    -webkit-transform: scale(1);\n            transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));\n            transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@-webkit-keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@-webkit-keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@keyframes fa-shake {\n  0% {\n    -webkit-transform: rotate(-15deg);\n            transform: rotate(-15deg);\n  }\n  4% {\n    -webkit-transform: rotate(15deg);\n            transform: rotate(15deg);\n  }\n  8%, 24% {\n    -webkit-transform: rotate(-18deg);\n            transform: rotate(-18deg);\n  }\n  12%, 28% {\n    -webkit-transform: rotate(18deg);\n            transform: rotate(18deg);\n  }\n  16% {\n    -webkit-transform: rotate(-22deg);\n            transform: rotate(-22deg);\n  }\n  20% {\n    -webkit-transform: rotate(22deg);\n            transform: rotate(22deg);\n  }\n  32% {\n    -webkit-transform: rotate(-12deg);\n            transform: rotate(-12deg);\n  }\n  36% {\n    -webkit-transform: rotate(12deg);\n            transform: rotate(12deg);\n  }\n  40%, 100% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n}\n@-webkit-keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n  }\n  100% {\n    -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  -webkit-transform: rotate(90deg);\n          transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  -webkit-transform: rotate(180deg);\n          transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  -webkit-transform: rotate(270deg);\n          transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  -webkit-transform: scale(-1, 1);\n          transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  -webkit-transform: scale(1, -1);\n          transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  -webkit-transform: scale(-1, -1);\n          transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  -webkit-transform: rotate(var(--fa-rotate-angle, 0));\n          transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}\n\n.fad.fa-inverse,\n.fa-duotone.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}';function YD(){var e=sD,t=oD,n=FD.cssPrefix,i=FD.replacementClass,r=QD;if(n!==e||i!==t){var s=new RegExp("\\.".concat(e,"\\-"),"g"),o=new RegExp("\\--".concat(e,"\\-"),"g"),a=new RegExp("\\.".concat(t),"g");r=r.replace(s,".".concat(n,"-")).replace(o,"--".concat(n,"-")).replace(a,".".concat(i))}return r}var XD=!1;function $D(){FD.autoAddCss&&!XD&&(!function(e){if(e&&tD){var t=JP.createElement("style");t.setAttribute("type","text/css"),t.innerHTML=e;for(var n=JP.head.childNodes,i=null,r=n.length-1;r>-1;r--){var s=n[r],o=(s.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(o)>-1&&(i=s)}JP.head.insertBefore(t,i)}}(YD()),XD=!0)}var JD={mixout:function(){return{dom:{css:YD,insertCss:$D}}},hooks:function(){return{beforeDOMElementCreation:function(){$D()},beforeI2svg:function(){$D()}}}},ZD=$P||{};ZD[iD]||(ZD[iD]={}),ZD[iD].styles||(ZD[iD].styles={}),ZD[iD].hooks||(ZD[iD].hooks={}),ZD[iD].shims||(ZD[iD].shims=[]);var eN=ZD[iD],tN=[],nN=!1;function iN(e){var t=e.tag,n=e.attributes,i=void 0===n?{}:n,r=e.children,s=void 0===r?[]:r;return"string"===typeof e?HD(e):"<".concat(t," ").concat(function(e){return Object.keys(e||{}).reduce((function(t,n){return t+"".concat(n,'="').concat(HD(e[n]),'" ')}),"").trim()}(i),">").concat(s.map(iN).join(""),"</").concat(t,">")}function rN(e,t,n){if(e&&e[t]&&e[t][n])return{prefix:t,iconName:n,icon:e[t][n]}}tD&&((nN=(JP.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(JP.readyState))||JP.addEventListener("DOMContentLoaded",(function e(){JP.removeEventListener("DOMContentLoaded",e),nN=1,tN.map((function(e){return e()}))})));var sN=function(e,t,n,i){var r,s,o,a=Object.keys(e),l=a.length,c=void 0!==i?function(e,t){return function(n,i,r,s){return e.call(t,n,i,r,s)}}(t,i):t;for(void 0===n?(r=1,o=e[a[0]]):(r=0,o=n);r<l;r++)o=c(o,e[s=a[r]],s,e);return o};function oN(e){var t=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=e.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var s=e.charCodeAt(n++);56320==(64512&s)?t.push(((1023&r)<<10)+(1023&s)+65536):(t.push(r),n--)}else t.push(r)}return t}(e);return 1===t.length?t[0].toString(16):null}function aN(e){return Object.keys(e).reduce((function(t,n){var i=e[n];return!!i.icon?t[i.iconName]=i.icon:t[n]=i,t}),{})}function lN(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipHooks,i=void 0!==n&&n,r=aN(t);"function"!==typeof eN.hooks.addPack||i?eN.styles[e]=DP(DP({},eN.styles[e]||{}),r):eN.hooks.addPack(e,aN(t)),"fas"===e&&lN("fa",t)}var cN,uN,hN,dN=eN.styles,fN=eN.shims,pN=(MP(cN={},mD,Object.values(xD[mD])),MP(cN,yD,Object.values(xD[yD])),cN),gN=null,mN={},yN={},vN={},bN={},wN={},_N=(MP(uN={},mD,Object.keys(wD[mD])),MP(uN,yD,Object.keys(wD[yD])),uN);function xN(e,t){var n,i=t.split("-"),r=i[0],s=i.slice(1).join("-");return r!==e||""===s||(n=s,~OD.indexOf(n))?null:s}var kN=function(){var e=function(e){return sN(dN,(function(t,n,i){return t[i]=sN(n,e,{}),t}),{})};mN=e((function(e,t,n){if(t[3]&&(e[t[3]]=n),t[2]){var i=t[2].filter((function(e){return"number"===typeof e}));i.forEach((function(t){e[t.toString(16)]=n}))}return e})),yN=e((function(e,t,n){if(e[n]=n,t[2]){var i=t[2].filter((function(e){return"string"===typeof e}));i.forEach((function(t){e[t]=n}))}return e})),wN=e((function(e,t,n){var i=t[2];return e[n]=n,i.forEach((function(t){e[t]=n})),e}));var t="far"in dN||FD.autoFetchSvg,n=sN(fN,(function(e,n){var i=n[0],r=n[1],s=n[2];return"far"!==r||t||(r="fas"),"string"===typeof i&&(e.names[i]={prefix:r,iconName:s}),"number"===typeof i&&(e.unicodes[i.toString(16)]={prefix:r,iconName:s}),e}),{names:{},unicodes:{}});vN=n.names,bN=n.unicodes,gN=AN(FD.styleDefault,{family:FD.familyDefault})};function SN(e,t){return(mN[e]||{})[t]}function IN(e,t){return(wN[e]||{})[t]}function EN(e){return vN[e]||{prefix:null,iconName:null}}function TN(){return gN}!function(e){VD.push(e)}((function(e){gN=AN(e.styleDefault,{family:FD.familyDefault})})),kN();var CN=function(){return{prefix:null,iconName:null,rest:[]}};function AN(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).family,n=void 0===t?mD:t,i=wD[n][e],r=_D[n][e]||_D[n][i],s=e in eN.styles?e:null;return r||s||null}var PN=(MP(hN={},mD,Object.keys(xD[mD])),MP(hN,yD,Object.keys(xD[yD])),hN);function DN(e){var t,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).skipLookups,i=void 0!==n&&n,r=(MP(t={},mD,"".concat(FD.cssPrefix,"-").concat(mD)),MP(t,yD,"".concat(FD.cssPrefix,"-").concat(yD)),t),s=null,o=mD;(e.includes(r[mD])||e.some((function(e){return PN[mD].includes(e)})))&&(o=mD),(e.includes(r[yD])||e.some((function(e){return PN[yD].includes(e)})))&&(o=yD);var a=e.reduce((function(e,t){var n=xN(FD.cssPrefix,t);if(dN[t]?(t=pN[o].includes(t)?kD[o][t]:t,s=t,e.prefix=t):_N[o].indexOf(t)>-1?(s=t,e.prefix=AN(t,{family:o})):n?e.iconName=n:t!==FD.replacementClass&&t!==r[mD]&&t!==r[yD]&&e.rest.push(t),!i&&e.prefix&&e.iconName){var a="fa"===s?EN(e.iconName):{},l=IN(e.prefix,e.iconName);a.prefix&&(s=null),e.iconName=a.iconName||l||e.iconName,e.prefix=a.prefix||e.prefix,"far"!==e.prefix||dN.far||!dN.fas||FD.autoFetchSvg||(e.prefix="fas")}return e}),CN());return(e.includes("fa-brands")||e.includes("fab"))&&(a.prefix="fab"),(e.includes("fa-duotone")||e.includes("fad"))&&(a.prefix="fad"),a.prefix||o!==yD||!dN.fass&&!FD.autoFetchSvg||(a.prefix="fass",a.iconName=IN(a.prefix,a.iconName)||a.iconName),"fa"!==a.prefix&&"fa"!==s||(a.prefix=TN()||"fas"),a}var NN=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.definitions={}}var t,n,i;return t=e,n=[{key:"add",value:function(){for(var e=this,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n.reduce(this._pullDefinitions,{});Object.keys(r).forEach((function(t){e.definitions[t]=DP(DP({},e.definitions[t]||{}),r[t]),lN(t,r[t]);var n=xD[mD][t];n&&lN(n,r[t]),kN()}))}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(e,t){var n=t.prefix&&t.iconName&&t.icon?{0:t}:t;return Object.keys(n).map((function(t){var i=n[t],r=i.prefix,s=i.iconName,o=i.icon,a=o[2];e[r]||(e[r]={}),a.length>0&&a.forEach((function(t){"string"===typeof t&&(e[r][t]=o)})),e[r][s]=o})),e}}],n&&OP(t.prototype,n),i&&OP(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ON=[],MN={},RN={},LN=Object.keys(RN);function FN(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];return(MN[e]||[]).forEach((function(e){t=e.apply(null,[t].concat(i))})),t}function VN(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];(MN[e]||[]).forEach((function(e){e.apply(null,n)}))}function zN(){var e=arguments[0],t=Array.prototype.slice.call(arguments,1);return RN[e]?RN[e].apply(null,t):void 0}function UN(e){"fa"===e.prefix&&(e.prefix="fas");var t=e.iconName,n=e.prefix||TN();if(t)return t=IN(n,t)||t,rN(jN.definitions,n,t)||rN(eN.styles,n,t)}var jN=new NN,BN={i2svg:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return tD?(VN("beforeI2svg",e),zN("pseudoElements2svg",e),zN("i2svg",e)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.autoReplaceSvgRoot;!1===FD.autoReplaceSvg&&(FD.autoReplaceSvg=!0),FD.observeMutations=!0,e=function(){HN({autoReplaceSvgRoot:n}),VN("watch",t)},tD&&(nN?setTimeout(e,0):tN.push(e))}},qN={icon:function(e){if(null===e)return null;if("object"===NP(e)&&e.prefix&&e.iconName)return{prefix:e.prefix,iconName:IN(e.prefix,e.iconName)||e.iconName};if(Array.isArray(e)&&2===e.length){var t=0===e[1].indexOf("fa-")?e[1].slice(3):e[1],n=AN(e[0]);return{prefix:n,iconName:IN(n,t)||t}}if("string"===typeof e&&(e.indexOf("".concat(FD.cssPrefix,"-"))>-1||e.match(SD))){var i=DN(e.split(" "),{skipLookups:!0});return{prefix:i.prefix||TN(),iconName:IN(i.prefix,i.iconName)||i.iconName}}if("string"===typeof e){var r=TN();return{prefix:r,iconName:IN(r,e)||e}}}},WN={noAuto:function(){FD.autoReplaceSvg=!1,FD.observeMutations=!1,VN("noAuto")},config:FD,dom:BN,parse:qN,library:jN,findIconDefinition:UN,toHtml:iN},HN=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).autoReplaceSvgRoot,t=void 0===e?JP:e;(Object.keys(eN.styles).length>0||FD.autoFetchSvg)&&tD&&FD.autoReplaceSvg&&WN.dom.i2svg({node:t})};function KN(e,t){return Object.defineProperty(e,"abstract",{get:t}),Object.defineProperty(e,"html",{get:function(){return e.abstract.map((function(e){return iN(e)}))}}),Object.defineProperty(e,"node",{get:function(){if(tD){var t=JP.createElement("div");return t.innerHTML=e.html,t.children}}}),e}function GN(e){var t=e.icons,n=t.main,i=t.mask,r=e.prefix,s=e.iconName,o=e.transform,a=e.symbol,l=e.title,c=e.maskId,u=e.titleId,h=e.extra,d=e.watchable,f=void 0!==d&&d,p=i.found?i:n,g=p.width,m=p.height,y="fak"===r,v=[FD.replacementClass,s?"".concat(FD.cssPrefix,"-").concat(s):""].filter((function(e){return-1===h.classes.indexOf(e)})).filter((function(e){return""!==e||!!e})).concat(h.classes).join(" "),b={children:[],attributes:DP(DP({},h.attributes),{},{"data-prefix":r,"data-icon":s,class:v,role:h.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(g," ").concat(m)})},w=y&&!~h.classes.indexOf("fa-fw")?{width:"".concat(g/m*16*.0625,"em")}:{};f&&(b.attributes[aD]=""),l&&(b.children.push({tag:"title",attributes:{id:b.attributes["aria-labelledby"]||"title-".concat(u||BD())},children:[l]}),delete b.attributes.title);var _=DP(DP({},b),{},{prefix:r,iconName:s,main:n,mask:i,maskId:c,transform:o,symbol:a,styles:DP(DP({},w),h.styles)}),x=i.found&&n.found?zN("generateAbstractMask",_)||{children:[],attributes:{}}:zN("generateAbstractIcon",_)||{children:[],attributes:{}},k=x.children,S=x.attributes;return _.children=k,_.attributes=S,a?function(e){var t=e.prefix,n=e.iconName,i=e.children,r=e.attributes,s=e.symbol,o=!0===s?"".concat(t,"-").concat(FD.cssPrefix,"-").concat(n):s;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:DP(DP({},r),{},{id:o}),children:i}]}]}(_):function(e){var t=e.children,n=e.main,i=e.mask,r=e.attributes,s=e.styles,o=e.transform;if(GD(o)&&n.found&&!i.found){var a={x:n.width/n.height/2,y:.5};r.style=KD(DP(DP({},s),{},{"transform-origin":"".concat(a.x+o.x/16,"em ").concat(a.y+o.y/16,"em")}))}return[{tag:"svg",attributes:r,children:t}]}(_)}function QN(e){var t=e.content,n=e.width,i=e.height,r=e.transform,s=e.title,o=e.extra,a=e.watchable,l=void 0!==a&&a,c=DP(DP(DP({},o.attributes),s?{title:s}:{}),{},{class:o.classes.join(" ")});l&&(c[aD]="");var u=DP({},o.styles);GD(r)&&(u.transform=function(e){var t=e.transform,n=e.width,i=void 0===n?rD:n,r=e.height,s=void 0===r?rD:r,o=e.startCentered,a=void 0!==o&&o,l="";return l+=a&&nD?"translate(".concat(t.x/zD-i/2,"em, ").concat(t.y/zD-s/2,"em) "):a?"translate(calc(-50% + ".concat(t.x/zD,"em), calc(-50% + ").concat(t.y/zD,"em)) "):"translate(".concat(t.x/zD,"em, ").concat(t.y/zD,"em) "),l+="scale(".concat(t.size/zD*(t.flipX?-1:1),", ").concat(t.size/zD*(t.flipY?-1:1),") "),l+"rotate(".concat(t.rotate,"deg) ")}({transform:r,startCentered:!0,width:n,height:i}),u["-webkit-transform"]=u.transform);var h=KD(u);h.length>0&&(c.style=h);var d=[];return d.push({tag:"span",attributes:c,children:[t]}),s&&d.push({tag:"span",attributes:{class:"sr-only"},children:[s]}),d}var YN=eN.styles;function XN(e){var t=e[0],n=e[1],i=RP(e.slice(4),1)[0];return{found:!0,width:t,height:n,icon:Array.isArray(i)?{tag:"g",attributes:{class:"".concat(FD.cssPrefix,"-").concat(DD.GROUP)},children:[{tag:"path",attributes:{class:"".concat(FD.cssPrefix,"-").concat(DD.SECONDARY),fill:"currentColor",d:i[0]}},{tag:"path",attributes:{class:"".concat(FD.cssPrefix,"-").concat(DD.PRIMARY),fill:"currentColor",d:i[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:i}}}}var $N={found:!1,width:512,height:512};function JN(e,t){var n=t;return"fa"===t&&null!==FD.styleDefault&&(t=TN()),new Promise((function(i,r){zN("missingIconAbstract");if("fa"===n){var s=EN(e)||{};e=s.iconName||e,t=s.prefix||t}if(e&&t&&YN[t]&&YN[t][e])return i(XN(YN[t][e]));!function(e,t){gD||FD.showMissingIcons||!e||console.error('Icon with name "'.concat(e,'" and prefix "').concat(t,'" is missing.'))}(e,t),i(DP(DP({},$N),{},{icon:FD.showMissingIcons&&e&&zN("missingIconAbstract")||{}}))}))}var ZN=function(){},eO=FD.measurePerformance&&eD&&eD.mark&&eD.measure?eD:{mark:ZN,measure:ZN},tO='FA "6.5.2"',nO=function(e){eO.mark("".concat(tO," ").concat(e," ends")),eO.measure("".concat(tO," ").concat(e),"".concat(tO," ").concat(e," begins"),"".concat(tO," ").concat(e," ends"))},iO={begin:function(e){return eO.mark("".concat(tO," ").concat(e," begins")),function(){return nO(e)}},end:nO},rO=function(){};function sO(e){return"string"===typeof(e.getAttribute?e.getAttribute(aD):null)}function oO(e){return JP.createElementNS("http://www.w3.org/2000/svg",e)}function aO(e){return JP.createElement(e)}function lO(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).ceFn,n=void 0===t?"svg"===e.tag?oO:aO:t;if("string"===typeof e)return JP.createTextNode(e);var i=n(e.tag);return Object.keys(e.attributes||[]).forEach((function(t){i.setAttribute(t,e.attributes[t])})),(e.children||[]).forEach((function(e){i.appendChild(lO(e,{ceFn:n}))})),i}var cO={replace:function(e){var t=e[0];if(t.parentNode)if(e[1].forEach((function(e){t.parentNode.insertBefore(lO(e),t)})),null===t.getAttribute(aD)&&FD.keepOriginalSource){var n=JP.createComment(function(e){var t=" ".concat(e.outerHTML," ");return"".concat(t,"Font Awesome fontawesome.com ")}(t));t.parentNode.replaceChild(n,t)}else t.remove()},nest:function(e){var t=e[0],n=e[1];if(~WD(t).indexOf(FD.replacementClass))return cO.replace(e);var i=new RegExp("".concat(FD.cssPrefix,"-.*"));if(delete n[0].attributes.id,n[0].attributes.class){var r=n[0].attributes.class.split(" ").reduce((function(e,t){return t===FD.replacementClass||t.match(i)?e.toSvg.push(t):e.toNode.push(t),e}),{toNode:[],toSvg:[]});n[0].attributes.class=r.toSvg.join(" "),0===r.toNode.length?t.removeAttribute("class"):t.setAttribute("class",r.toNode.join(" "))}var s=n.map((function(e){return iN(e)})).join("\n");t.setAttribute(aD,""),t.innerHTML=s}};function uO(e){e()}function hO(e,t){var n="function"===typeof t?t:rO;if(0===e.length)n();else{var i=uO;FD.mutateApproach===fD&&(i=$P.requestAnimationFrame||uO),i((function(){var t=!0===FD.autoReplaceSvg?cO.replace:cO[FD.autoReplaceSvg]||cO.replace,i=iO.begin("mutate");e.map(t),i(),n()}))}}var dO=!1;function fO(){dO=!0}function pO(){dO=!1}var gO=null;function mO(e){if(ZP&&FD.observeMutations){var t=e.treeCallback,n=void 0===t?rO:t,i=e.nodeCallback,r=void 0===i?rO:i,s=e.pseudoElementsCallback,o=void 0===s?rO:s,a=e.observeMutationsRoot,l=void 0===a?JP:a;gO=new ZP((function(e){if(!dO){var t=TN();qD(e).forEach((function(e){if("childList"===e.type&&e.addedNodes.length>0&&!sO(e.addedNodes[0])&&(FD.searchPseudoElements&&o(e.target),n(e.target)),"attributes"===e.type&&e.target.parentNode&&FD.searchPseudoElements&&o(e.target.parentNode),"attributes"===e.type&&sO(e.target)&&~PD.indexOf(e.attributeName))if("class"===e.attributeName&&function(e){var t=e.getAttribute?e.getAttribute(uD):null,n=e.getAttribute?e.getAttribute(hD):null;return t&&n}(e.target)){var i=DN(WD(e.target)),s=i.prefix,a=i.iconName;e.target.setAttribute(uD,s||t),a&&e.target.setAttribute(hD,a)}else(l=e.target)&&l.classList&&l.classList.contains&&l.classList.contains(FD.replacementClass)&&r(e.target);var l}))}})),tD&&gO.observe(l,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function yO(e){var t=e.getAttribute("data-prefix"),n=e.getAttribute("data-icon"),i=void 0!==e.innerText?e.innerText.trim():"",r=DN(WD(e));return r.prefix||(r.prefix=TN()),t&&n&&(r.prefix=t,r.iconName=n),r.iconName&&r.prefix||(r.prefix&&i.length>0&&(r.iconName=function(e,t){return(yN[e]||{})[t]}(r.prefix,e.innerText)||SN(r.prefix,oN(e.innerText))),!r.iconName&&FD.autoFetchSvg&&e.firstChild&&e.firstChild.nodeType===Node.TEXT_NODE&&(r.iconName=e.firstChild.data)),r}function vO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0},n=yO(e),i=n.iconName,r=n.prefix,s=n.rest,o=function(e){var t=qD(e.attributes).reduce((function(e,t){return"class"!==e.name&&"style"!==e.name&&(e[t.name]=t.value),e}),{}),n=e.getAttribute("title"),i=e.getAttribute("data-fa-title-id");return FD.autoA11y&&(n?t["aria-labelledby"]="".concat(FD.replacementClass,"-title-").concat(i||BD()):(t["aria-hidden"]="true",t.focusable="false")),t}(e),a=FN("parseNodeAttributes",{},e),l=t.styleParser?function(e){var t=e.getAttribute("style"),n=[];return t&&(n=t.split(";").reduce((function(e,t){var n=t.split(":"),i=n[0],r=n.slice(1);return i&&r.length>0&&(e[i]=r.join(":").trim()),e}),{})),n}(e):[];return DP({iconName:i,title:e.getAttribute("title"),titleId:e.getAttribute("data-fa-title-id"),prefix:r,transform:UD,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:s,styles:l,attributes:o}},a)}var bO=eN.styles;function wO(e){var t="nest"===FD.autoReplaceSvg?vO(e,{styleParser:!1}):vO(e);return~t.extra.classes.indexOf(ID)?zN("generateLayersText",e,t):zN("generateSvgReplacementMutation",e,t)}var _O=new Set;function xO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!tD)return Promise.resolve();var n=JP.documentElement.classList,i=function(e){return n.add("".concat(dD,"-").concat(e))},r=function(e){return n.remove("".concat(dD,"-").concat(e))},s=FD.autoFetchSvg?_O:vD.map((function(e){return"fa-".concat(e)})).concat(Object.keys(bO));s.includes("fa")||s.push("fa");var o=[".".concat(ID,":not([").concat(aD,"])")].concat(s.map((function(e){return".".concat(e,":not([").concat(aD,"])")}))).join(", ");if(0===o.length)return Promise.resolve();var a=[];try{a=qD(e.querySelectorAll(o))}catch(bM){}if(!(a.length>0))return Promise.resolve();i("pending"),r("complete");var l=iO.begin("onTree"),c=a.reduce((function(e,t){try{var n=wO(t);n&&e.push(n)}catch(bM){gD||"MissingIcon"===bM.name&&console.error(bM)}return e}),[]);return new Promise((function(e,n){Promise.all(c).then((function(n){hO(n,(function(){i("active"),i("complete"),r("pending"),"function"===typeof t&&t(),l(),e()}))})).catch((function(e){l(),n(e)}))}))}function kO(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;wO(e).then((function(e){e&&hO([e],t)}))}vD.map((function(e){_O.add("fa-".concat(e))})),Object.keys(wD[mD]).map(_O.add.bind(_O)),Object.keys(wD[yD]).map(_O.add.bind(_O)),_O=LP(_O);var SO=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,i=void 0===n?UD:n,r=t.symbol,s=void 0!==r&&r,o=t.mask,a=void 0===o?null:o,l=t.maskId,c=void 0===l?null:l,u=t.title,h=void 0===u?null:u,d=t.titleId,f=void 0===d?null:d,p=t.classes,g=void 0===p?[]:p,m=t.attributes,y=void 0===m?{}:m,v=t.styles,b=void 0===v?{}:v;if(e){var w=e.prefix,_=e.iconName,x=e.icon;return KN(DP({type:"icon"},e),(function(){return VN("beforeDOMElementCreation",{iconDefinition:e,params:t}),FD.autoA11y&&(h?y["aria-labelledby"]="".concat(FD.replacementClass,"-title-").concat(f||BD()):(y["aria-hidden"]="true",y.focusable="false")),GN({icons:{main:XN(x),mask:a?XN(a.icon):{found:!1,width:null,height:null,icon:{}}},prefix:w,iconName:_,transform:DP(DP({},UD),i),symbol:s,title:h,maskId:c,titleId:f,extra:{attributes:y,styles:b,classes:g}})}))}},IO={mixout:function(){return{icon:(e=SO,function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(t||{}).icon?t:UN(t||{}),r=n.mask;return r&&(r=(r||{}).icon?r:UN(r||{})),e(i,DP(DP({},n),{},{mask:r}))})};var e},hooks:function(){return{mutationObserverCallbacks:function(e){return e.treeCallback=xO,e.nodeCallback=kO,e}}},provides:function(e){e.i2svg=function(e){var t=e.node,n=void 0===t?JP:t,i=e.callback;return xO(n,void 0===i?function(){}:i)},e.generateSvgReplacementMutation=function(e,t){var n=t.iconName,i=t.title,r=t.titleId,s=t.prefix,o=t.transform,a=t.symbol,l=t.mask,c=t.maskId,u=t.extra;return new Promise((function(t,h){Promise.all([JN(n,s),l.iconName?JN(l.iconName,l.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((function(l){var h=RP(l,2),d=h[0],f=h[1];t([e,GN({icons:{main:d,mask:f},prefix:s,iconName:n,transform:o,symbol:a,maskId:c,title:i,titleId:r,extra:u,watchable:!0})])})).catch(h)}))},e.generateAbstractIcon=function(e){var t,n=e.children,i=e.attributes,r=e.main,s=e.transform,o=KD(e.styles);return o.length>0&&(i.style=o),GD(s)&&(t=zN("generateAbstractTransformGrouping",{main:r,transform:s,containerWidth:r.width,iconWidth:r.width})),n.push(t||r.icon),{children:n,attributes:i}}}},EO={mixout:function(){return{layer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.classes,i=void 0===n?[]:n;return KN({type:"layer"},(function(){VN("beforeDOMElementCreation",{assembler:e,params:t});var n=[];return e((function(e){Array.isArray(e)?e.map((function(e){n=n.concat(e.abstract)})):n=n.concat(e.abstract)})),[{tag:"span",attributes:{class:["".concat(FD.cssPrefix,"-layers")].concat(LP(i)).join(" ")},children:n}]}))}}}},TO={mixout:function(){return{counter:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.title,i=void 0===n?null:n,r=t.classes,s=void 0===r?[]:r,o=t.attributes,a=void 0===o?{}:o,l=t.styles,c=void 0===l?{}:l;return KN({type:"counter",content:e},(function(){return VN("beforeDOMElementCreation",{content:e,params:t}),function(e){var t=e.content,n=e.title,i=e.extra,r=DP(DP(DP({},i.attributes),n?{title:n}:{}),{},{class:i.classes.join(" ")}),s=KD(i.styles);s.length>0&&(r.style=s);var o=[];return o.push({tag:"span",attributes:r,children:[t]}),n&&o.push({tag:"span",attributes:{class:"sr-only"},children:[n]}),o}({content:e.toString(),title:i,extra:{attributes:a,styles:c,classes:["".concat(FD.cssPrefix,"-layers-counter")].concat(LP(s))}})}))}}}},CO={mixout:function(){return{text:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.transform,i=void 0===n?UD:n,r=t.title,s=void 0===r?null:r,o=t.classes,a=void 0===o?[]:o,l=t.attributes,c=void 0===l?{}:l,u=t.styles,h=void 0===u?{}:u;return KN({type:"text",content:e},(function(){return VN("beforeDOMElementCreation",{content:e,params:t}),QN({content:e,transform:DP(DP({},UD),i),title:s,extra:{attributes:c,styles:h,classes:["".concat(FD.cssPrefix,"-layers-text")].concat(LP(a))}})}))}}},provides:function(e){e.generateLayersText=function(e,t){var n=t.title,i=t.transform,r=t.extra,s=null,o=null;if(nD){var a=parseInt(getComputedStyle(e).fontSize,10),l=e.getBoundingClientRect();s=l.width/a,o=l.height/a}return FD.autoA11y&&!n&&(r.attributes["aria-hidden"]="true"),Promise.resolve([e,QN({content:e.innerHTML,width:s,height:o,transform:i,title:n,extra:r,watchable:!0})])}}},AO=new RegExp('"',"ug"),PO=[1105920,1112319];function DO(e,t){var n="".concat(cD).concat(t.replace(":","-"));return new Promise((function(i,r){if(null!==e.getAttribute(n))return i();var s=qD(e.children).filter((function(e){return e.getAttribute(lD)===t}))[0],o=$P.getComputedStyle(e,t),a=o.getPropertyValue("font-family").match(ED),l=o.getPropertyValue("font-weight"),c=o.getPropertyValue("content");if(s&&!a)return e.removeChild(s),i();if(a&&"none"!==c&&""!==c){var u=o.getPropertyValue("content"),h=~["Sharp"].indexOf(a[2])?yD:mD,d=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(a[2])?_D[h][a[2].toLowerCase()]:TD[h][l],f=function(e){var t=e.replace(AO,""),n=function(e,t){var n,i=e.length,r=e.charCodeAt(t);return r>=55296&&r<=56319&&i>t+1&&(n=e.charCodeAt(t+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}(t,0),i=n>=PO[0]&&n<=PO[1],r=2===t.length&&t[0]===t[1];return{value:oN(r?t[0]:t),isSecondary:i||r}}(u),p=f.value,g=f.isSecondary,m=a[0].startsWith("FontAwesome"),y=SN(d,p),v=y;if(m){var b=function(e){var t=bN[e],n=SN("fas",e);return t||(n?{prefix:"fas",iconName:n}:null)||{prefix:null,iconName:null}}(p);b.iconName&&b.prefix&&(y=b.iconName,d=b.prefix)}if(!y||g||s&&s.getAttribute(uD)===d&&s.getAttribute(hD)===v)i();else{e.setAttribute(n,v),s&&e.removeChild(s);var w={iconName:null,title:null,titleId:null,prefix:null,transform:UD,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},_=w.extra;_.attributes[lD]=t,JN(y,d).then((function(r){var s=GN(DP(DP({},w),{},{icons:{main:r,mask:CN()},prefix:d,iconName:v,extra:_,watchable:!0})),o=JP.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===t?e.insertBefore(o,e.firstChild):e.appendChild(o),o.outerHTML=s.map((function(e){return iN(e)})).join("\n"),e.removeAttribute(n),i()})).catch(r)}}else i()}))}function NO(e){return Promise.all([DO(e,"::before"),DO(e,"::after")])}function OO(e){return e.parentNode!==document.head&&!~pD.indexOf(e.tagName.toUpperCase())&&!e.getAttribute(lD)&&(!e.parentNode||"svg"!==e.parentNode.tagName)}function MO(e){if(tD)return new Promise((function(t,n){var i=qD(e.querySelectorAll("*")).filter(OO).map(NO),r=iO.begin("searchPseudoElements");fO(),Promise.all(i).then((function(){r(),pO(),t()})).catch((function(){r(),pO(),n()}))}))}var RO=!1,LO=function(e){return e.toLowerCase().split(" ").reduce((function(e,t){var n=t.toLowerCase().split("-"),i=n[0],r=n.slice(1).join("-");if(i&&"h"===r)return e.flipX=!0,e;if(i&&"v"===r)return e.flipY=!0,e;if(r=parseFloat(r),isNaN(r))return e;switch(i){case"grow":e.size=e.size+r;break;case"shrink":e.size=e.size-r;break;case"left":e.x=e.x-r;break;case"right":e.x=e.x+r;break;case"up":e.y=e.y-r;break;case"down":e.y=e.y+r;break;case"rotate":e.rotate=e.rotate+r}return e}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0})},FO={mixout:function(){return{parse:{transform:function(e){return LO(e)}}}},hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-transform");return n&&(e.transform=LO(n)),e}}},provides:function(e){e.generateAbstractTransformGrouping=function(e){var t=e.main,n=e.transform,i=e.containerWidth,r=e.iconWidth,s={transform:"translate(".concat(i/2," 256)")},o="translate(".concat(32*n.x,", ").concat(32*n.y,") "),a="scale(".concat(n.size/16*(n.flipX?-1:1),", ").concat(n.size/16*(n.flipY?-1:1),") "),l="rotate(".concat(n.rotate," 0 0)"),c={outer:s,inner:{transform:"".concat(o," ").concat(a," ").concat(l)},path:{transform:"translate(".concat(r/2*-1," -256)")}};return{tag:"g",attributes:DP({},c.outer),children:[{tag:"g",attributes:DP({},c.inner),children:[{tag:t.icon.tag,children:t.icon.children,attributes:DP(DP({},t.icon.attributes),c.path)}]}]}}}},VO={x:0,y:0,width:"100%",height:"100%"};function zO(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.attributes&&(e.attributes.fill||t)&&(e.attributes.fill="black"),e}var UO={hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-mask"),i=n?DN(n.split(" ").map((function(e){return e.trim()}))):CN();return i.prefix||(i.prefix=TN()),e.mask=i,e.maskId=t.getAttribute("data-fa-mask-id"),e}}},provides:function(e){e.generateAbstractMask=function(e){var t,n=e.children,i=e.attributes,r=e.main,s=e.mask,o=e.maskId,a=e.transform,l=r.width,c=r.icon,u=s.width,h=s.icon,d=function(e){var t=e.transform,n=e.containerWidth,i=e.iconWidth,r={transform:"translate(".concat(n/2," 256)")},s="translate(".concat(32*t.x,", ").concat(32*t.y,") "),o="scale(".concat(t.size/16*(t.flipX?-1:1),", ").concat(t.size/16*(t.flipY?-1:1),") "),a="rotate(".concat(t.rotate," 0 0)");return{outer:r,inner:{transform:"".concat(s," ").concat(o," ").concat(a)},path:{transform:"translate(".concat(i/2*-1," -256)")}}}({transform:a,containerWidth:u,iconWidth:l}),f={tag:"rect",attributes:DP(DP({},VO),{},{fill:"white"})},p=c.children?{children:c.children.map(zO)}:{},g={tag:"g",attributes:DP({},d.inner),children:[zO(DP({tag:c.tag,attributes:DP(DP({},c.attributes),d.path)},p))]},m={tag:"g",attributes:DP({},d.outer),children:[g]},y="mask-".concat(o||BD()),v="clip-".concat(o||BD()),b={tag:"mask",attributes:DP(DP({},VO),{},{id:y,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[f,m]},w={tag:"defs",children:[{tag:"clipPath",attributes:{id:v},children:(t=h,"g"===t.tag?t.children:[t])},b]};return n.push(w,{tag:"rect",attributes:DP({fill:"currentColor","clip-path":"url(#".concat(v,")"),mask:"url(#".concat(y,")")},VO)}),{children:n,attributes:i}}}},jO={provides:function(e){var t=!1;$P.matchMedia&&(t=$P.matchMedia("(prefers-reduced-motion: reduce)").matches),e.missingIconAbstract=function(){var e=[],n={fill:"currentColor"},i={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};e.push({tag:"path",attributes:DP(DP({},n),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var r=DP(DP({},i),{},{attributeName:"opacity"}),s={tag:"circle",attributes:DP(DP({},n),{},{cx:"256",cy:"364",r:"28"}),children:[]};return t||s.children.push({tag:"animate",attributes:DP(DP({},i),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:DP(DP({},r),{},{values:"1;0;1;1;0;1;"})}),e.push(s),e.push({tag:"path",attributes:DP(DP({},n),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:t?[]:[{tag:"animate",attributes:DP(DP({},r),{},{values:"1;0;0;0;0;1;"})}]}),t||e.push({tag:"path",attributes:DP(DP({},n),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:DP(DP({},r),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:e}}}};!function(e,t){var n=t.mixoutsTo;ON=e,MN={},Object.keys(RN).forEach((function(e){-1===LN.indexOf(e)&&delete RN[e]})),ON.forEach((function(e){var t=e.mixout?e.mixout():{};if(Object.keys(t).forEach((function(e){"function"===typeof t[e]&&(n[e]=t[e]),"object"===NP(t[e])&&Object.keys(t[e]).forEach((function(i){n[e]||(n[e]={}),n[e][i]=t[e][i]}))})),e.hooks){var i=e.hooks();Object.keys(i).forEach((function(e){MN[e]||(MN[e]=[]),MN[e].push(i[e])}))}e.provides&&e.provides(RN)}))}([JD,IO,EO,TO,CO,{hooks:function(){return{mutationObserverCallbacks:function(e){return e.pseudoElementsCallback=MO,e}}},provides:function(e){e.pseudoElements2svg=function(e){var t=e.node,n=void 0===t?JP:t;FD.searchPseudoElements&&MO(n)}}},{mixout:function(){return{dom:{unwatch:function(){fO(),RO=!0}}}},hooks:function(){return{bootstrap:function(){mO(FN("mutationObserverCallbacks",{}))},noAuto:function(){gO&&gO.disconnect()},watch:function(e){var t=e.observeMutationsRoot;RO?pO():mO(FN("mutationObserverCallbacks",{observeMutationsRoot:t}))}}}},FO,UO,jO,{hooks:function(){return{parseNodeAttributes:function(e,t){var n=t.getAttribute("data-fa-symbol"),i=null!==n&&(""===n||n);return e.symbol=i,e}}}}],{mixoutsTo:WN});var BO=WN.parse,qO=WN.icon,WO=n(173),HO=n.n(WO);function KO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function GO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?KO(Object(n),!0).forEach((function(t){YO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function QO(e){return QO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},QO(e)}function YO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function XO(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},s=Object.keys(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $O(e){return function(e){if(Array.isArray(e))return JO(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return JO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return JO(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JO(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ZO(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}var eM=["style"];var tM=!1;try{tM=!0}catch(bM){}function nM(e){return e&&"object"===QO(e)&&e.prefix&&e.iconName&&e.icon?e:BO.icon?BO.icon(e):null===e?null:e&&"object"===QO(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function iM(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?YO({},e,t):{}}var rM=t.forwardRef((function(e,t){var n=e.icon,i=e.mask,r=e.symbol,s=e.className,o=e.title,a=e.titleId,l=e.maskId,c=nM(n),u=iM("classes",[].concat($O(function(e){var t,n=e.beat,i=e.fade,r=e.beatFade,s=e.bounce,o=e.shake,a=e.flash,l=e.spin,c=e.spinPulse,u=e.spinReverse,h=e.pulse,d=e.fixedWidth,f=e.inverse,p=e.border,g=e.listItem,m=e.flip,y=e.size,v=e.rotation,b=e.pull,w=(YO(t={"fa-beat":n,"fa-fade":i,"fa-beat-fade":r,"fa-bounce":s,"fa-shake":o,"fa-flash":a,"fa-spin":l,"fa-spin-reverse":u,"fa-spin-pulse":c,"fa-pulse":h,"fa-fw":d,"fa-inverse":f,"fa-border":p,"fa-li":g,"fa-flip":!0===m,"fa-flip-horizontal":"horizontal"===m||"both"===m,"fa-flip-vertical":"vertical"===m||"both"===m},"fa-".concat(y),"undefined"!==typeof y&&null!==y),YO(t,"fa-rotate-".concat(v),"undefined"!==typeof v&&null!==v&&0!==v),YO(t,"fa-pull-".concat(b),"undefined"!==typeof b&&null!==b),YO(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(w).map((function(e){return w[e]?e:null})).filter((function(e){return e}))}(e)),$O(s.split(" ")))),h=iM("transform","string"===typeof e.transform?BO.transform(e.transform):e.transform),d=iM("mask",nM(i)),f=qO(c,GO(GO(GO(GO({},u),h),d),{},{symbol:r,title:o,titleId:a,maskId:l}));if(!f)return function(){var e;!tM&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",c),null;var p=f.abstract,g={ref:t};return Object.keys(e).forEach((function(t){rM.defaultProps.hasOwnProperty(t)||(g[t]=e[t])})),sM(p[0],g)}));rM.displayName="FontAwesomeIcon",rM.propTypes={beat:HO().bool,border:HO().bool,beatFade:HO().bool,bounce:HO().bool,className:HO().string,fade:HO().bool,flash:HO().bool,mask:HO().oneOfType([HO().object,HO().array,HO().string]),maskId:HO().string,fixedWidth:HO().bool,inverse:HO().bool,flip:HO().oneOf([!0,!1,"horizontal","vertical","both"]),icon:HO().oneOfType([HO().object,HO().array,HO().string]),listItem:HO().bool,pull:HO().oneOf(["right","left"]),pulse:HO().bool,rotation:HO().oneOf([0,90,180,270]),shake:HO().bool,size:HO().oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:HO().bool,spinPulse:HO().bool,spinReverse:HO().bool,symbol:HO().oneOfType([HO().bool,HO().string]),title:HO().string,titleId:HO().string,transform:HO().oneOfType([HO().string,HO().object]),swapOpacity:HO().bool},rM.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var sM=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var r=(n.children||[]).map((function(n){return e(t,n)})),s=Object.keys(n.attributes||{}).reduce((function(e,t){var i=n.attributes[t];switch(t){case"class":e.attrs.className=i,delete n.attributes.class;break;case"style":e.attrs.style=i.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,i=t.indexOf(":"),r=ZO(t.slice(0,i)),s=t.slice(i+1).trim();return r.startsWith("webkit")?e[(n=r,n.charAt(0).toUpperCase()+n.slice(1))]=s:e[r]=s,e}),{});break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=i:e.attrs[ZO(t)]=i}return e}),{attrs:{}}),o=i.style,a=void 0===o?{}:o,l=XO(i,eM);return s.attrs.style=GO(GO({},s.attrs.style),a),t.apply(void 0,[n.tag,GO(GO({},s.attrs),l)].concat($O(r)))}.bind(null,t.createElement),oM={prefix:"fab",iconName:"google",icon:[488,512,[],"f1a0","M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"]},aM={prefix:"fas",iconName:"right-from-bracket",icon:[512,512,["sign-out-alt"],"f2f5","M377.9 105.9L500.7 228.7c7.2 7.2 11.3 17.1 11.3 27.3s-4.1 20.1-11.3 27.3L377.9 406.1c-6.4 6.4-15 9.9-24 9.9c-18.7 0-33.9-15.2-33.9-33.9l0-62.1-128 0c-17.7 0-32-14.3-32-32l0-64c0-17.7 14.3-32 32-32l128 0 0-62.1c0-18.7 15.2-33.9 33.9-33.9c9 0 17.6 3.6 24 9.9zM160 96L96 96c-17.7 0-32 14.3-32 32l0 256c0 17.7 14.3 32 32 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c-53 0-96-43-96-96L0 128C0 75 43 32 96 32l64 0c17.7 0 32 14.3 32 32s-14.3 32-32 32z"]},lM=aM,cM={prefix:"fas",iconName:"bars",icon:[448,512,["navicon"],"f0c9","M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"]},uM={prefix:"fas",iconName:"pen-to-square",icon:[512,512,["edit"],"f044","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"]},hM=uM,dM={prefix:"fas",iconName:"trash",icon:[448,512,[],"f1f8","M135.2 17.7L128 32H32C14.3 32 0 46.3 0 64S14.3 96 32 96H416c17.7 0 32-14.3 32-32s-14.3-32-32-32H320l-7.2-14.3C307.4 6.8 296.3 0 284.2 0H163.8c-12.1 0-23.2 6.8-28.6 17.7zM416 128H32L53.2 467c1.6 25.3 22.6 45 47.9 45H346.9c25.3 0 46.3-19.7 47.9-45L416 128z"]},fM=n(579);et.initializeApp({apiKey:"AIzaSyBEaewAHZQ3R6H0FNCryNzpZVik1tFJQ5w",authDomain:"moneysprint-6e195.firebaseapp.com",projectId:"moneysprint-6e195",storageBucket:"moneysprint-6e195.appspot.com",messagingSenderId:"676782706866",appId:"1:676782706866:web:7cc2b972a82ed1959ab9ab",measurementId:"G-4MX8HX1Z88"});const pM=et.firestore(),gM=et.auth(),mM=new(window.SpeechRecognition||window.webkitSpeechRecognition),yM=()=>{const[e,n]=(0,t.useState)(null),[i,r]=(0,t.useState)({amount:"",category:"",date:""}),[s,o]=(0,t.useState)([]),[a,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(""),[h,d]=(0,t.useState)(!1),[f,p]=(0,t.useState)("1 day"),[g,m]=(0,t.useState)(null),[y,v]=(0,t.useState)(null),[b,w]=(0,t.useState)({amount:"",category:"",date:""});(0,t.useEffect)((()=>{const e=localStorage.getItem("expense_tracker_user");e&&n(JSON.parse(e))}),[]);const _=(0,t.useCallback)((()=>{e&&pM.collection("users").doc(e.uid).collection("categories").get().then((e=>{const t=e.docs.map((e=>e.data().name));l(t)})).catch((e=>{console.error("Error fetching categories: ",e)}))}),[e]),x=(0,t.useCallback)((()=>{if(!e)return;let t=new Date;"1 day"===f?t.setDate(t.getDate()-1):"1 week"===f?t.setDate(t.getDate()-7):"1 month"===f?t.setMonth(t.getMonth()-1):"1 year"===f&&t.setFullYear(t.getFullYear()-1),pM.collection("users").doc(e.uid).collection("expenses").where("date",">=",t.toISOString()).get().then((e=>{const t=e.docs.map((e=>({id:e.id,...e.data()})));o(t)})).catch((e=>{console.error("Error fetching expenses: ",e)}))}),[e,f]);(0,t.useEffect)((()=>{const e=gM.onAuthStateChanged((e=>{n(e)}));return()=>e()}),[]),(0,t.useEffect)((()=>{e&&(_(),x())}),[e,_,x]);const k=(0,t.useCallback)((()=>{if(!e)return;const t=document.getElementById("expense-chart").getContext("2d"),n=s.reduce(((e,t)=>(e[t.category]||(e[t.category]=0),e[t.category]+=parseFloat(t.amount),e)),{}),i=Object.keys(n),r=Object.values(n);window.expenseChart&&window.expenseChart.destroy(),window.expenseChart=new AP(t,{type:"bar",data:{labels:i,datasets:[{label:"Total Amount Spent",data:r,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:1}]},options:{scales:{y:{beginAtZero:!0,title:{display:!0,text:"Total Expense Amount (INR)"}},x:{title:{display:!0,text:"Category"}}},plugins:{tooltip:{callbacks:{label:e=>(e.dataset.label||"")+": "+(e.parsed.y||0)}}}}})}),[s,e]);(0,t.useEffect)((()=>{e&&k()}),[s,k,e]);const S=e=>{const t=e.match(/add (\d+) (?:rupees|dollars|INR) for (\w+) (?:on )?year (\d{4}) month (\d{2}) date (\d{2})/);if(t){const[,e,n,i,r,s]=t;return{amount:e,category:n,date:"".concat(i,"-").concat(r,"-").concat(s)}}return null},I=t=>{let{amount:n,category:i,date:s}=t;e&&pM.collection("users").doc(e.uid).collection("expenses").add({amount:n,category:i,date:s}).then((()=>{x(),r({amount:"",category:"",date:""}),m(null)})).catch((e=>{console.error("Error adding expense: ",e)}))};return(0,t.useEffect)((()=>{e&&localStorage.setItem("expense_tracker_user",JSON.stringify(e))}),[e]),(0,fM.jsx)("div",{children:e?(0,fM.jsxs)("div",{children:[(0,fM.jsxs)("nav",{className:"navbar ".concat(h?"open":""),children:[(0,fM.jsx)("div",{className:"navbar-toggle",onClick:()=>{d(!h)},children:(0,fM.jsx)(rM,{icon:cM})}),(0,fM.jsxs)("ul",{className:"navbar-menu ".concat(h?"open":""),children:[(0,fM.jsx)("li",{children:"Home"}),(0,fM.jsx)("li",{children:"About"}),(0,fM.jsx)("li",{children:"Contact"})]}),e&&(0,fM.jsxs)("button",{onClick:async()=>{try{await gM.signOut(),localStorage.removeItem("expense_tracker_user"),n(null)}catch(g){console.error("Error signing out: ",g)}},className:"sign-out-btn",children:[(0,fM.jsx)(rM,{icon:lM}),"Sign out"]})]}),(0,fM.jsxs)("div",{className:"container",children:[(0,fM.jsx)("h2",{children:"MoneySprint"}),g&&(0,fM.jsx)("div",{className:"error",children:g}),(0,fM.jsxs)("form",{onSubmit:t=>{t.preventDefault(),i.amount&&i.category&&i.date?c||"__new__"!==i.category?pM.collection("users").doc(e.uid).collection("expenses").add(i).then((()=>{x(),r({amount:"",category:"",date:""}),m(null)})).catch((e=>{console.error("Error adding expense: ",e)})):m("Category name cannot be empty"):m("All fields are required")},children:[(0,fM.jsxs)("label",{children:["Amount:",(0,fM.jsx)("input",{type:"number",value:i.amount,onChange:e=>r({...i,amount:e.target.value})})]}),(0,fM.jsxs)("label",{children:["Category:",(0,fM.jsxs)("select",{value:i.category,onChange:e=>{const t=e.target.value;"__new__"===t?(u(""),r({...i,category:t})):r({...i,category:t})},children:[(0,fM.jsx)("option",{value:"",children:"Select category..."}),a.map(((e,t)=>(0,fM.jsx)("option",{value:e,children:e},t))),(0,fM.jsx)("option",{value:"__new__",children:"Add New Category..."})]}),"__new__"===i.category&&(0,fM.jsxs)("div",{children:[(0,fM.jsx)("input",{type:"text",value:c,onChange:e=>{u(e.target.value),m(null)},placeholder:"Enter new category..."}),(0,fM.jsx)("button",{type:"button",onClick:()=>{c?a.includes(c)?m("Category already exists"):pM.collection("users").doc(e.uid).collection("categories").add({name:c}).then((()=>{_(),u(""),m(null)})).catch((e=>{console.error("Error adding new category: ",e)})):m("Category name cannot be empty")},children:"Add"})]})]}),(0,fM.jsxs)("label",{children:["Date:",(0,fM.jsx)("input",{type:"date",value:i.date,onChange:e=>r({...i,date:e.target.value})})]}),(0,fM.jsxs)("button",{type:"button",onClick:()=>{mM&&(mM.onresult=e=>{const t=e.results[0][0].transcript.toLowerCase();console.log("Transcript:",t);const n=S(t);if(n){const{amount:e,category:t,date:i}=n;if(!e||!t||!i)return void console.error("Incomplete expense details extracted.");I({amount:e,category:t,date:i})}else console.error("Unable to extract expense details from speech input.")},mM.start())},children:["Add Expense via Speech",(0,fM.jsx)("span",{className:"tooltip",children:"Click and start speaking to add an expense"})]}),(0,fM.jsx)("button",{type:"submit",children:"Add Expense"})]}),(0,fM.jsxs)("div",{className:"expense-list",children:[(0,fM.jsx)("h3",{children:"Expenses:"}),s.map((t=>(0,fM.jsxs)("div",{className:"expense-card",children:[(0,fM.jsxs)("div",{children:[(0,fM.jsx)("strong",{children:"Amount:"})," \u20b9",t.amount]}),(0,fM.jsxs)("div",{children:[(0,fM.jsx)("strong",{children:"Category:"})," ",t.category]}),(0,fM.jsxs)("div",{children:[(0,fM.jsx)("strong",{children:"Date:"})," ",t.date]}),y===t.id?(0,fM.jsxs)(fM.Fragment,{children:[(0,fM.jsx)("input",{type:"number",value:b.amount,onChange:e=>w({...b,amount:e.target.value})}),(0,fM.jsx)("input",{type:"text",value:b.category,onChange:e=>w({...b,category:e.target.value})}),(0,fM.jsx)("input",{type:"date",value:b.date,onChange:e=>w({...b,date:e.target.value})}),(0,fM.jsx)("button",{onClick:()=>(t=>{pM.collection("users").doc(e.uid).collection("expenses").doc(t).update(b).then((()=>{const e=s.map((e=>e.id===t?b:e));o(e),v(null)})).catch((e=>{console.error("Error updating expense:",e)}))})(t.id),children:"Save"})]}):(0,fM.jsx)(rM,{icon:hM,onClick:()=>(e=>{v(e)})(t.id),className:"edit-icon"}),(0,fM.jsx)("span",{style:{marginRight:"10px"}}),(0,fM.jsx)(rM,{icon:dM,onClick:()=>(t=>{pM.collection("users").doc(e.uid).collection("expenses").doc(t).delete().then((()=>{o(s.filter((e=>e.id!==t)))})).catch((e=>{console.error("Error deleting expense: ",e)}))})(t.id),className:"delete-icon"})]},t.id)))]}),(0,fM.jsxs)("div",{className:"date-range-filter",children:[(0,fM.jsx)("label",{children:"Select Date Range:"}),(0,fM.jsxs)("select",{value:f,onChange:e=>{p(e.target.value)},children:[(0,fM.jsx)("option",{value:"1 day",children:"1 Day"}),(0,fM.jsx)("option",{value:"1 week",children:"1 Week"}),(0,fM.jsx)("option",{value:"1 month",children:"1 Month"}),(0,fM.jsx)("option",{value:"1 year",children:"1 Year"})]})]}),(0,fM.jsx)("div",{className:"chart-container",children:(0,fM.jsx)("canvas",{id:"expense-chart"})})]})]}):(0,fM.jsx)("div",{className:"center-container",children:(0,fM.jsxs)("div",{className:"center-content",children:[(0,fM.jsxs)("button",{onClick:async()=>{try{const e=new et.auth.GoogleAuthProvider;await gM.signInWithPopup(e)}catch(g){console.error("Error signing in: ",g)}},className:"google-signin-btn",children:[(0,fM.jsx)(rM,{icon:oM}),"Sign in with Google"]}),(0,fM.jsx)("div",{children:"Please sign in to access the Expense Tracker."})]})})})},vM=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then((t=>{let{getCLS:n,getFID:i,getFCP:r,getLCP:s,getTTFB:o}=t;n(e),i(e),r(e),s(e),o(e)}))};i.createRoot(document.getElementById("root")).render((0,fM.jsx)(t.StrictMode,{children:(0,fM.jsx)(yM,{})})),vM()})()})();
//# sourceMappingURL=main.2b95540f.js.map